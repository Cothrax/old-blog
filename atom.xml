<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Cothrax</title>
  <subtitle>I don&#39;t need a subtitle.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://cothrax.github.io/"/>
  <updated>2016-08-24T06:41:18.205Z</updated>
  <id>https://cothrax.github.io/</id>
  
  <author>
    <name>Cothrax</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>[JSOI2016] æé«˜2ç­ DP</title>
    <link href="https://cothrax.github.io/2016/08/24/JSOI2016-%E6%8F%90%E9%AB%982%E7%8F%AD-DP/"/>
    <id>https://cothrax.github.io/2016/08/24/JSOI2016-æé«˜2ç­-DP/</id>
    <published>2016-08-24T05:30:36.000Z</published>
    <updated>2016-08-24T06:41:18.205Z</updated>
    
    <content type="html"><![CDATA[<h1 id="P1-é£æ‰¬çš„å°é¸Ÿ"><a href="#P1-é£æ‰¬çš„å°é¸Ÿ" class="headerlink" title="P1 é£æ‰¬çš„å°é¸Ÿ"></a>P1 é£æ‰¬çš„å°é¸Ÿ</h1><p>Flappy Bird æ˜¯ä¸€æ¬¾é£é¡ä¸€æ—¶çš„ä¼‘é—²æ‰‹æœºæ¸¸æˆã€‚ç©å®¶éœ€è¦ä¸æ–­æ§åˆ¶ç‚¹å‡»æ‰‹æœºå±å¹•çš„é¢‘ç‡æ¥è°ƒèŠ‚å°é¸Ÿçš„é£è¡Œé«˜åº¦ï¼Œè®©å°é¸Ÿé¡ºåˆ©é€šè¿‡ç”»é¢å³æ–¹çš„ç®¡é“ç¼éš™ã€‚å¦‚æœå°é¸Ÿä¸€ä¸å°å¿ƒæ’åˆ°äº†æ°´ç®¡æˆ–è€…æ‰åœ¨åœ°ä¸Šçš„è¯ï¼Œä¾¿å®£å‘Šå¤±è´¥ã€‚<br><img src="/2016/08/24/JSOI2016-æé«˜2ç­-DP/noip2014tgd1p3i1.jpg" alt="noip2014tgd1p3i1.jpg" title=""><br>ä¸ºäº†ç®€åŒ–é—®é¢˜ï¼Œæˆ‘ä»¬å¯¹æ¸¸æˆè§„åˆ™è¿›è¡Œäº†ç®€åŒ–å’Œæ”¹ç¼–ï¼š</p>
<ol>
<li>æ¸¸æˆç•Œé¢æ˜¯ä¸€ä¸ªé•¿ä¸º nï¼Œé«˜ä¸º m çš„äºŒç»´å¹³é¢ï¼Œå…¶ä¸­æœ‰k ä¸ªç®¡é“ï¼ˆå¿½ç•¥ç®¡é“çš„å®½åº¦ï¼‰ã€‚</li>
<li>å°é¸Ÿå§‹ç»ˆåœ¨æ¸¸æˆç•Œé¢å†…ç§»åŠ¨ã€‚å°é¸Ÿä»æ¸¸æˆç•Œé¢æœ€å·¦è¾¹ ä»»æ„æ•´æ•°é«˜åº¦ä½ç½®å‡ºå‘ï¼Œåˆ°è¾¾æ¸¸æˆç•Œé¢æœ€å³è¾¹æ—¶ï¼Œæ¸¸æˆå®Œæˆã€‚</li>
<li>å°é¸Ÿæ¯ä¸ªå•ä½æ—¶é—´æ²¿æ¨ªåæ ‡æ–¹å‘å³ç§»çš„è·ç¦»ä¸º 1ï¼Œç«–ç›´ç§»åŠ¨çš„è·ç¦»ç”±ç©å®¶æ§åˆ¶ã€‚å¦‚æœç‚¹å‡»å±å¹•ï¼Œå°é¸Ÿå°±ä¼šä¸Šå‡ä¸€å®šé«˜åº¦ Xï¼Œæ¯ä¸ªå•ä½æ—¶é—´å¯ä»¥ç‚¹å‡»å¤šæ¬¡ï¼Œæ•ˆæœå åŠ ï¼› å¦‚æœä¸ç‚¹å‡»å±å¹•ï¼Œå°é¸Ÿå°±ä¼šä¸‹é™ä¸€å®šé«˜åº¦ Yã€‚å°é¸Ÿä½äºæ¨ªåæ ‡æ–¹å‘ä¸åŒä½ç½®æ—¶ï¼Œä¸Š å‡çš„é«˜åº¦ X å’Œä¸‹é™çš„é«˜åº¦ Y å¯èƒ½äº’ä¸ç›¸åŒã€‚</li>
<li>å°é¸Ÿé«˜åº¦ç­‰äº 0 æˆ–è€…å°é¸Ÿç¢°åˆ°ç®¡é“æ—¶ï¼Œæ¸¸æˆå¤±è´¥ã€‚å°é¸Ÿé«˜åº¦ä¸º m æ—¶ï¼Œæ— æ³•å†ä¸Šå‡ã€‚</li>
</ol>
<p>ç°åœ¨ï¼Œè¯·ä½ åˆ¤æ–­æ˜¯å¦å¯ä»¥å®Œæˆæ¸¸æˆã€‚å¦‚æœå¯ä»¥ï¼Œè¾“å‡ºæœ€å°‘ç‚¹å‡»å±å¹•æ•°ï¼›å¦åˆ™ï¼Œè¾“å‡ºå°é¸Ÿæœ€å¤šå¯ä»¥é€šè¿‡å¤šå°‘ä¸ªç®¡é“ç¼éš™ã€‚</p>
<h2 id="æ ¼å¼"><a href="#æ ¼å¼" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼"><a href="#è¾“å…¥æ ¼å¼" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬ 1 è¡Œæœ‰ 3 ä¸ªæ•´æ•° nï¼Œmï¼Œkï¼Œåˆ†åˆ«è¡¨ç¤ºæ¸¸æˆç•Œé¢çš„é•¿åº¦ï¼Œé«˜åº¦å’Œæ°´ç®¡çš„æ•°é‡ï¼Œæ¯ä¸¤ä¸ª æ•´æ•°ä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ï¼›<br>æ¥ä¸‹æ¥çš„ n è¡Œï¼Œæ¯è¡Œ 2 ä¸ªç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€çš„æ•´æ•° X å’Œ Yï¼Œä¾æ¬¡è¡¨ç¤ºåœ¨æ¨ªåæ ‡ä½ç½® 0~n-1 ä¸Šç©å®¶ç‚¹å‡»å±å¹•åï¼Œå°é¸Ÿåœ¨ä¸‹ä¸€ä½ç½®ä¸Šå‡çš„é«˜åº¦ Xï¼Œä»¥åŠåœ¨è¿™ä¸ªä½ç½®ä¸Šç©å®¶ä¸ç‚¹å‡»å±å¹•æ—¶ï¼Œ å°é¸Ÿåœ¨ä¸‹ä¸€ä½ç½®ä¸‹é™çš„é«˜åº¦ Yã€‚<br>æ¥ä¸‹æ¥ k è¡Œï¼Œæ¯è¡Œ 3 ä¸ªæ•´æ•° Pï¼ŒLï¼ŒHï¼Œæ¯ä¸¤ä¸ªæ•´æ•°ä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ã€‚æ¯è¡Œè¡¨ç¤ºä¸€ä¸ªç®¡é“ï¼Œå…¶ä¸­ P è¡¨ç¤ºç®¡é“çš„æ¨ªåæ ‡ï¼ŒL è¡¨ç¤ºæ­¤ç®¡é“ç¼éš™çš„ä¸‹è¾¹æ²¿é«˜åº¦ä¸º Lï¼ŒH è¡¨ç¤ºç®¡é“ç¼éš™ä¸Šè¾¹æ²¿çš„é«˜åº¦ï¼ˆè¾“å…¥æ•°æ®ä¿è¯ P å„ä¸ç›¸åŒï¼Œä½†ä¸ä¿è¯æŒ‰ç…§å¤§å°é¡ºåºç»™å‡ºï¼‰ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼"><a href="#è¾“å‡ºæ ¼å¼" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>å…±ä¸¤è¡Œã€‚<br>ç¬¬ä¸€è¡Œï¼ŒåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œå¦‚æœå¯ä»¥æˆåŠŸå®Œæˆæ¸¸æˆï¼Œåˆ™è¾“å‡º 1ï¼Œå¦åˆ™è¾“å‡º 0ã€‚ ç¬¬äºŒè¡Œï¼ŒåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œå¦‚æœç¬¬ä¸€è¡Œä¸º 1ï¼Œåˆ™è¾“å‡ºæˆåŠŸå®Œæˆæ¸¸æˆéœ€è¦æœ€å°‘ç‚¹å‡»å±å¹•æ•°ï¼Œå¦åˆ™ï¼Œè¾“å‡ºå°é¸Ÿæœ€å¤šå¯ä»¥é€šè¿‡å¤šå°‘ä¸ªç®¡é“ç¼éš™ã€‚<br><a id="more"></a></p>
<h2 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥"><a href="#æ ·ä¾‹è¾“å…¥" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>10 10 6<br>3 9<br>9 9<br>1 2<br>1 3<br>1 2<br>1 1<br>2 1<br>2 1<br>1 6<br>2 2<br>1 2 7<br>5 1 5<br>6 3 5<br>7 5 8<br>8 7 9<br>9 1 3</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º"><a href="#æ ·ä¾‹è¾“å‡º" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>1<br>6</p>
</blockquote>
<h2 id="æç¤ºâ€‹"><a href="#æç¤ºâ€‹" class="headerlink" title="æç¤ºâ€‹"></a>æç¤ºâ€‹</h2><p>å¯¹äº 30%çš„æ•°æ®ï¼š5â‰¤nâ‰¤10ï¼Œ5â‰¤mâ‰¤10ï¼Œk=0ï¼Œä¿è¯å­˜åœ¨ä¸€ç»„æœ€ä¼˜è§£ä½¿å¾—åŒä¸€å•ä½æ—¶é—´æœ€å¤šç‚¹å‡»å±å¹• 3 æ¬¡ï¼›<br>å¯¹äº 50%çš„æ•°æ®ï¼š5â‰¤nâ‰¤20ï¼Œ5â‰¤mâ‰¤10ï¼Œä¿è¯å­˜åœ¨ä¸€ç»„æœ€ä¼˜è§£ä½¿å¾—åŒä¸€å•ä½æ—¶é—´æœ€å¤šç‚¹å‡»å±å¹• 3 æ¬¡ï¼›<br>å¯¹äº 70%çš„æ•°æ®ï¼š5â‰¤nâ‰¤1000ï¼Œ5â‰¤mâ‰¤100ï¼›<br>å¯¹äº 100%çš„æ•°æ®ï¼š<span>$5&le;n&le;10000,5&le;m&le;1000,0&le;k&lt;n,$</span><!-- Has MathJax --><br><span>$0&lt;X&lt;m,0&lt;Y&lt;m,0&lt;P&lt;n,0&le;L&lt;H&le;m,L+1&lt;H$</span><!-- Has MathJax -->ã€‚</p>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè“è‰²ç›´çº¿è¡¨ç¤ºå°é¸Ÿçš„é£è¡Œè½¨è¿¹ï¼Œçº¢è‰²ç›´çº¿è¡¨ç¤ºç®¡é“ã€‚<br><img src="/2016/08/24/JSOI2016-æé«˜2ç­-DP/noip2014tgd1p3i2.png" alt="noip2014tgd1p3i2.png" title=""></p>
<p>NOIP2014 æé«˜ç»„ Day1</p>
<h2 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>å˜å½¢èƒŒåŒ…ï¼Œå‡ ä¸ªæ³¨æ„ç‚¹</p>
<ol>
<li>é¡¶ç«¯è¦ç‰¹åˆ¤ä¸€ä¸‹</li>
<li>ä»¥ä¸‹æ–¹æ¡ˆæ˜¯<strong>ä¸å¯è¡Œ</strong>çš„ï¼šå¯¹äºç¬¬iåˆ—ï¼Œ<strong>åª</strong>å¯¹ä¸è¢«ç®¡é“è¦†ç›–çš„ç‚¹åšèƒŒåŒ…ã€‚<br>å› ä¸ºç”¨äº†å®Œå…¨èƒŒåŒ…çš„$O(N^2)$ä¼˜åŒ–ï¼Œè¢«ç®¡é“è¦†ç›–çš„ç‚¹æ˜¯æœ‰å¯èƒ½ä½œä¸ºä¸­é—´å€¼å‡ºç°çš„ï¼Œæ‰€ä»¥æ­£ç¡®çš„æ–¹æ¡ˆæ˜¯ï¼š<strong>å…ˆè¯¥åˆ—å¯¹æ‰€æœ‰åšèƒŒåŒ…ï¼Œç„¶åæŠŠè¢«ç®¡é“è¦†ç›–çš„ç‚¹æ ‡è®°ä¸ºinfã€‚</strong></li>
</ol>
<dir style="text-align:right"><a href="/2016/08/24/JSOI2016-æé«˜2ç­-DP/pp1907.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>pp1907.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">const</span> inf=<span class="number">1000000000</span>;</div><div class="line"><span class="keyword">var</span></div><div class="line">    n,m,k,i,i1,i0,j,cnt,ans:int;</div><div class="line">    x,y,lb,ub:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">10010</span>] <span class="keyword">of</span> int;</div><div class="line">    flag:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">10010</span>] <span class="keyword">of</span> boolean;b:boolean;</div><div class="line">    f:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1</span>,<span class="number">0</span>..<span class="number">1010</span>] <span class="keyword">of</span> int;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">read</span>(n,m,k);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(x[i],y[i]);</div><div class="line">        lb[i]:=<span class="number">0</span>;ub[i]:=m+<span class="number">1</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    fillchar(flag,sizeof(flag),false);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> k <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(j);<span class="keyword">read</span>(lb[j],ub[j]);</div><div class="line">        flag[j]:=true;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    </div><div class="line">    filldword(f[<span class="number">0</span>],sizeof(f[<span class="number">0</span>]) <span class="keyword">div</span> <span class="number">4</span>,inf);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span> f[<span class="number">0</span>,i]:=<span class="number">0</span>;</div><div class="line">    cnt:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        i1:=i <span class="keyword">mod</span> <span class="number">2</span>;i0:=<span class="number">1</span>-i1;</div><div class="line">        filldword(f[i1],sizeof(f[i1]) <span class="keyword">div</span> <span class="number">4</span>,inf);</div><div class="line">        <span class="keyword">for</span> j:=<span class="number">1</span>+x[i] <span class="keyword">to</span> m <span class="keyword">do</span> <span class="comment">//å®Œå…¨èƒŒåŒ…ï¼ˆä¸Šå‡ï¼‰</span></div><div class="line">            f[i1,j]:=min(f[i1,j],min(f[i1,j-x[i]],f[i0,j-x[i]])+<span class="number">1</span>);</div><div class="line">        <span class="keyword">for</span> j:=<span class="number">0</span> <span class="keyword">to</span> x[i] <span class="keyword">do</span> <span class="comment">//ç‰¹åˆ¤é¡¶ç‚¹</span></div><div class="line">            f[i1,m]:=min(f[i1,m],min(f[i0,m-j],f[i1,m-j])+<span class="number">1</span>);</div><div class="line">        <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> m-y[i] <span class="keyword">do</span> <span class="comment">//01èƒŒåŒ…ï¼ˆä¸‹è½ï¼‰</span></div><div class="line">            f[i1,j]:=min(f[i1,j],f[i0,j+y[i]]);</div><div class="line">        <span class="comment">//ä¸å¯è¾¾çš„ç‚¹æ ‡è®°ä¸ºinf</span></div><div class="line">        <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> lb[i] <span class="keyword">do</span> f[i1,j]:=inf;</div><div class="line">        <span class="keyword">for</span> j:=ub[i] <span class="keyword">to</span> m <span class="keyword">do</span> f[i1,j]:=inf;</div><div class="line">        <span class="comment">//åˆ¤æ— è§£ï¼Œå’Œcntæ›´æ–°</span></div><div class="line">        b:=false;</div><div class="line">        <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span></div><div class="line">            <span class="keyword">if</span> f[i1,j]&lt;&gt;inf <span class="keyword">then</span> <span class="keyword">begin</span> b:=true;break <span class="keyword">end</span>;</div><div class="line">        <span class="keyword">if</span> <span class="keyword">not</span> b <span class="keyword">then</span> break</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> flag[i] <span class="keyword">then</span> inc(cnt);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">if</span> b <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">        ans:=inf;i1:=n <span class="keyword">mod</span> <span class="number">2</span>;</div><div class="line">        <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span> ans:=min(ans,f[i1,i]);</div><div class="line">        writeln(<span class="number">1</span>);<span class="keyword">write</span>(ans);</div><div class="line">    <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">begin</span></div><div class="line">        writeln(<span class="number">0</span>);<span class="keyword">write</span>(cnt);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P2-Sanguo"><a href="#P2-Sanguo" class="headerlink" title="P2 Sanguo"></a>P2 Sanguo</h1><p>After East Han dynasty, China was divided into several states. Wei, Wu, and Shu are the greatest three states among them. This was the era of Sanguo. During this period, wars frequently happened between states. Zhuge Liang, the commander and strategist of Shu, wanted to enlarge Shuâ€™s power. He was considering conquering N cities. However, these cities must be defeated in a specified order. City-X could be defeated only after City-1, City-2, City-3 â€¦ City-(X-1) had been defeated. However, passing through the cities that had not been defeated was eligible. Zhuge wanted to use three generals, Guan Yu, Zhang Fei, and Zhao yun, each of whom should lead an army. The three armies, started from Yizhou, which was numbered with City-0. After conquered all the N cities (each cities must be conquered at least by one army), they had to return to Yizhou.<br>The N cities and Yizhou were connected by M bi-directed roads. To travel from city to city was a very boring and expensive thing. So Zhuge wanted to minimize the total length of the three armiesâ€™ traveling. You were hired to help him to compute the minimum total length of the traveling.</p>
<h2 id="æ ¼å¼-1"><a href="#æ ¼å¼-1" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-1"><a href="#è¾“å…¥æ ¼å¼-1" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>Line1: two integers N and M. N is the number of cities Zhuge wanted to conquer, and M is the number of roads between the N + 1 cities.<br>Line2â€¦Line(M+1): each line contain 3 integers, X, Y, Len, indicating a road between City-X and City-Y, with the length of Len.<br>You can suppose that all the N + 1 cities are connected.<br>N â‰¤ 500, M â‰¤ 20000, Len â‰¤ 1000</p>
<h2 id="è¾“å‡ºæ ¼å¼-1"><a href="#è¾“å‡ºæ ¼å¼-1" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>Line1: an integer, which is the minimum total length of the three armiesâ€™ traveling.<br><!--more--></p>
<h2 id="æ ·ä¾‹-1"><a href="#æ ·ä¾‹-1" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-1"><a href="#æ ·ä¾‹è¾“å…¥-1" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>5 15<br>5 5 48<br>1 4 658<br>4 0 843<br>1 4 41<br>1 4 330<br>5 2 864<br>4 2 115<br>4 0 303<br>2 3 685<br>0 0 879<br>1 5 649<br>2 4 942<br>4 0 379<br>5 2 769<br>5 1 856</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-1"><a href="#æ ·ä¾‹è¾“å‡º-1" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>3668</p>
</blockquote>
<h2 id="é¢˜è§£-1"><a href="#é¢˜è§£-1" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p><strong>å›¾ä¸ŠDP+floyd+æ»šåŠ¨æ•°ç»„</strong><br>è·‘floydå¾—ä»»æ„ä¸¤ç‚¹æœ€çŸ­è·¯d[i,j]ã€‚<br>f[i,j,k]è¡¨ç¤ºå·²ç»1..içš„åŸå¸‚ï¼Œä¸‰æ”¯éƒ¨é˜Ÿåˆ†åˆ«åœ¨i,j,k(j,k&lt;=i)çš„æœ€å°è·¯ç¨‹ã€‚<br>f[0,0,0]=0<br>f[i+1,j,k]=min(f[i+1,j,k],f[i,j,k]+d[i,i+1])<br>f[i+1,i,k]=min(f[i+1,i,k],f[i,j,k]+d[j,i+1])<br>f[i+1,i,j]=min(f[i+1,i,j],f[i,j,k]+d[k,i+1])<br>ans=min{f[n,j,k]+d[n,0]+d[j,0]+d[k,0]}<br>æ»šåŠ¨æ•°ç»„æ³¨æ„æ¯æ¬¡ç”¨çš„æ—¶å€™ï¼Œè¦<strong>åˆå§‹åŒ–</strong>ã€‚</p>
<dir style="text-align:right"><a href="/2016/08/24/JSOI2016-æé«˜2ç­-DP/3368.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>3368.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">const</span> inf=<span class="number">100000000</span>;</div><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">var</span> n,m,i,j,k,tmp,ans,i0,i1:int;</div><div class="line">	d:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">510</span>,<span class="number">0</span>..<span class="number">510</span>] <span class="keyword">of</span> int;</div><div class="line">	f:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1</span>,<span class="number">0</span>..<span class="number">510</span>,<span class="number">0</span>..<span class="number">510</span>] <span class="keyword">of</span> int;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">	<span class="keyword">read</span>(n,m);</div><div class="line">	filldword(d,sizeof(d) <span class="keyword">div</span> <span class="number">4</span>,inf);</div><div class="line">	<span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">		<span class="keyword">read</span>(j,k,tmp);</div><div class="line">		d[j,k]:=min(d[j,k],tmp);d[k,j]:=d[j,k];</div><div class="line">	<span class="keyword">end</span>;</div><div class="line">	<span class="keyword">for</span> i:=<span class="number">0</span> <span class="keyword">to</span> n <span class="keyword">do</span> d[i,i]:=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> k:=<span class="number">0</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">		<span class="keyword">for</span> i:=<span class="number">0</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">			<span class="keyword">for</span> j:=<span class="number">0</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">				d[i,j]:=min(d[i,j],d[i,k]+d[k,j]);</div><div class="line">	</div><div class="line">	filldword(f,sizeof(f) <span class="keyword">div</span> <span class="number">4</span>,inf);</div><div class="line">	f[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]:=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> i:=<span class="number">0</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">		i0:=i <span class="keyword">mod</span> <span class="number">2</span>;i1:=<span class="number">1</span>-i0;</div><div class="line">		filldword(f[i1],sizeof(f[i1]) <span class="keyword">div</span> <span class="number">4</span>,inf);</div><div class="line">		<span class="keyword">for</span> j:=<span class="number">0</span> <span class="keyword">to</span> i <span class="keyword">do</span></div><div class="line">			<span class="keyword">for</span> k:=<span class="number">0</span> <span class="keyword">to</span> i <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">				f[i1,j,k]:=min(f[i1,j,k],f[i0,j,k]+d[i,i+<span class="number">1</span>]);</div><div class="line">				f[i1,i,k]:=min(f[i1,i,k],f[i0,j,k]+d[j,i+<span class="number">1</span>]);</div><div class="line">				f[i1,j,i]:=min(f[i1,j,i],f[i0,j,k]+d[k,i+<span class="number">1</span>]);</div><div class="line">			<span class="keyword">end</span>;</div><div class="line">	<span class="keyword">end</span>;</div><div class="line">	ans:=inf;i0:=n <span class="keyword">mod</span> <span class="number">2</span>;</div><div class="line">	<span class="keyword">for</span> i:=<span class="number">0</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">		<span class="keyword">for</span> j:=<span class="number">0</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">			ans:=min(ans,f[i0,i,j]+d[<span class="number">0</span>,n]+d[i,<span class="number">0</span>]+d[j,<span class="number">0</span>]);</div><div class="line">	<span class="keyword">write</span>(ans);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;P1-é£æ‰¬çš„å°é¸Ÿ&quot;&gt;&lt;a href=&quot;#P1-é£æ‰¬çš„å°é¸Ÿ&quot; class=&quot;headerlink&quot; title=&quot;P1 é£æ‰¬çš„å°é¸Ÿ&quot;&gt;&lt;/a&gt;P1 é£æ‰¬çš„å°é¸Ÿ&lt;/h1&gt;&lt;p&gt;Flappy Bird æ˜¯ä¸€æ¬¾é£é¡ä¸€æ—¶çš„ä¼‘é—²æ‰‹æœºæ¸¸æˆã€‚ç©å®¶éœ€è¦ä¸æ–­æ§åˆ¶ç‚¹å‡»æ‰‹æœºå±å¹•çš„é¢‘ç‡æ¥è°ƒèŠ‚å°é¸Ÿçš„é£è¡Œé«˜åº¦ï¼Œè®©å°é¸Ÿé¡ºåˆ©é€šè¿‡ç”»é¢å³æ–¹çš„ç®¡é“ç¼éš™ã€‚å¦‚æœå°é¸Ÿä¸€ä¸å°å¿ƒæ’åˆ°äº†æ°´ç®¡æˆ–è€…æ‰åœ¨åœ°ä¸Šçš„è¯ï¼Œä¾¿å®£å‘Šå¤±è´¥ã€‚&lt;br&gt;&lt;img src=&quot;/2016/08/24/JSOI2016-æé«˜2ç­-DP/noip2014tgd1p3i1.jpg&quot; alt=&quot;noip2014tgd1p3i1.jpg&quot; title=&quot;&quot;&gt;&lt;br&gt;ä¸ºäº†ç®€åŒ–é—®é¢˜ï¼Œæˆ‘ä»¬å¯¹æ¸¸æˆè§„åˆ™è¿›è¡Œäº†ç®€åŒ–å’Œæ”¹ç¼–ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ¸¸æˆç•Œé¢æ˜¯ä¸€ä¸ªé•¿ä¸º nï¼Œé«˜ä¸º m çš„äºŒç»´å¹³é¢ï¼Œå…¶ä¸­æœ‰k ä¸ªç®¡é“ï¼ˆå¿½ç•¥ç®¡é“çš„å®½åº¦ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å°é¸Ÿå§‹ç»ˆåœ¨æ¸¸æˆç•Œé¢å†…ç§»åŠ¨ã€‚å°é¸Ÿä»æ¸¸æˆç•Œé¢æœ€å·¦è¾¹ ä»»æ„æ•´æ•°é«˜åº¦ä½ç½®å‡ºå‘ï¼Œåˆ°è¾¾æ¸¸æˆç•Œé¢æœ€å³è¾¹æ—¶ï¼Œæ¸¸æˆå®Œæˆã€‚&lt;/li&gt;
&lt;li&gt;å°é¸Ÿæ¯ä¸ªå•ä½æ—¶é—´æ²¿æ¨ªåæ ‡æ–¹å‘å³ç§»çš„è·ç¦»ä¸º 1ï¼Œç«–ç›´ç§»åŠ¨çš„è·ç¦»ç”±ç©å®¶æ§åˆ¶ã€‚å¦‚æœç‚¹å‡»å±å¹•ï¼Œå°é¸Ÿå°±ä¼šä¸Šå‡ä¸€å®šé«˜åº¦ Xï¼Œæ¯ä¸ªå•ä½æ—¶é—´å¯ä»¥ç‚¹å‡»å¤šæ¬¡ï¼Œæ•ˆæœå åŠ ï¼› å¦‚æœä¸ç‚¹å‡»å±å¹•ï¼Œå°é¸Ÿå°±ä¼šä¸‹é™ä¸€å®šé«˜åº¦ Yã€‚å°é¸Ÿä½äºæ¨ªåæ ‡æ–¹å‘ä¸åŒä½ç½®æ—¶ï¼Œä¸Š å‡çš„é«˜åº¦ X å’Œä¸‹é™çš„é«˜åº¦ Y å¯èƒ½äº’ä¸ç›¸åŒã€‚&lt;/li&gt;
&lt;li&gt;å°é¸Ÿé«˜åº¦ç­‰äº 0 æˆ–è€…å°é¸Ÿç¢°åˆ°ç®¡é“æ—¶ï¼Œæ¸¸æˆå¤±è´¥ã€‚å°é¸Ÿé«˜åº¦ä¸º m æ—¶ï¼Œæ— æ³•å†ä¸Šå‡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç°åœ¨ï¼Œè¯·ä½ åˆ¤æ–­æ˜¯å¦å¯ä»¥å®Œæˆæ¸¸æˆã€‚å¦‚æœå¯ä»¥ï¼Œè¾“å‡ºæœ€å°‘ç‚¹å‡»å±å¹•æ•°ï¼›å¦åˆ™ï¼Œè¾“å‡ºå°é¸Ÿæœ€å¤šå¯ä»¥é€šè¿‡å¤šå°‘ä¸ªç®¡é“ç¼éš™ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ ¼å¼&quot;&gt;&lt;a href=&quot;#æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;æ ¼å¼&quot;&gt;&lt;/a&gt;æ ¼å¼&lt;/h2&gt;&lt;h3 id=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å…¥æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å…¥æ ¼å¼&lt;/h3&gt;&lt;p&gt;ç¬¬ 1 è¡Œæœ‰ 3 ä¸ªæ•´æ•° nï¼Œmï¼Œkï¼Œåˆ†åˆ«è¡¨ç¤ºæ¸¸æˆç•Œé¢çš„é•¿åº¦ï¼Œé«˜åº¦å’Œæ°´ç®¡çš„æ•°é‡ï¼Œæ¯ä¸¤ä¸ª æ•´æ•°ä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ï¼›&lt;br&gt;æ¥ä¸‹æ¥çš„ n è¡Œï¼Œæ¯è¡Œ 2 ä¸ªç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€çš„æ•´æ•° X å’Œ Yï¼Œä¾æ¬¡è¡¨ç¤ºåœ¨æ¨ªåæ ‡ä½ç½® 0~n-1 ä¸Šç©å®¶ç‚¹å‡»å±å¹•åï¼Œå°é¸Ÿåœ¨ä¸‹ä¸€ä½ç½®ä¸Šå‡çš„é«˜åº¦ Xï¼Œä»¥åŠåœ¨è¿™ä¸ªä½ç½®ä¸Šç©å®¶ä¸ç‚¹å‡»å±å¹•æ—¶ï¼Œ å°é¸Ÿåœ¨ä¸‹ä¸€ä½ç½®ä¸‹é™çš„é«˜åº¦ Yã€‚&lt;br&gt;æ¥ä¸‹æ¥ k è¡Œï¼Œæ¯è¡Œ 3 ä¸ªæ•´æ•° Pï¼ŒLï¼ŒHï¼Œæ¯ä¸¤ä¸ªæ•´æ•°ä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ã€‚æ¯è¡Œè¡¨ç¤ºä¸€ä¸ªç®¡é“ï¼Œå…¶ä¸­ P è¡¨ç¤ºç®¡é“çš„æ¨ªåæ ‡ï¼ŒL è¡¨ç¤ºæ­¤ç®¡é“ç¼éš™çš„ä¸‹è¾¹æ²¿é«˜åº¦ä¸º Lï¼ŒH è¡¨ç¤ºç®¡é“ç¼éš™ä¸Šè¾¹æ²¿çš„é«˜åº¦ï¼ˆè¾“å…¥æ•°æ®ä¿è¯ P å„ä¸ç›¸åŒï¼Œä½†ä¸ä¿è¯æŒ‰ç…§å¤§å°é¡ºåºç»™å‡ºï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å‡ºæ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å‡ºæ ¼å¼&lt;/h2&gt;&lt;p&gt;å…±ä¸¤è¡Œã€‚&lt;br&gt;ç¬¬ä¸€è¡Œï¼ŒåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œå¦‚æœå¯ä»¥æˆåŠŸå®Œæˆæ¸¸æˆï¼Œåˆ™è¾“å‡º 1ï¼Œå¦åˆ™è¾“å‡º 0ã€‚ ç¬¬äºŒè¡Œï¼ŒåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œå¦‚æœç¬¬ä¸€è¡Œä¸º 1ï¼Œåˆ™è¾“å‡ºæˆåŠŸå®Œæˆæ¸¸æˆéœ€è¦æœ€å°‘ç‚¹å‡»å±å¹•æ•°ï¼Œå¦åˆ™ï¼Œè¾“å‡ºå°é¸Ÿæœ€å¤šå¯ä»¥é€šè¿‡å¤šå°‘ä¸ªç®¡é“ç¼éš™ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="Problem Set" scheme="https://cothrax.github.io/categories/Problem-Set/"/>
    
    
      <category term="OI" scheme="https://cothrax.github.io/tags/OI/"/>
    
      <category term="DP" scheme="https://cothrax.github.io/tags/DP/"/>
    
      <category term="èƒŒåŒ…" scheme="https://cothrax.github.io/tags/%E8%83%8C%E5%8C%85/"/>
    
  </entry>
  
  <entry>
    <title>[JSOI2016] æé«˜2ç­ è´ªå¿ƒ</title>
    <link href="https://cothrax.github.io/2016/08/23/JSOI2016-%E6%8F%90%E9%AB%982%E7%8F%AD-%E8%B4%AA%E5%BF%83/"/>
    <id>https://cothrax.github.io/2016/08/23/JSOI2016-æé«˜2ç­-è´ªå¿ƒ/</id>
    <published>2016-08-23T07:15:25.000Z</published>
    <updated>2016-08-23T10:12:27.950Z</updated>
    
    <content type="html"><![CDATA[<p>è´ªå¿ƒè€ƒçš„æ˜¯RPï¼Œæƒ³å¯¹è´ªå¿ƒç­–ç•¥å°±Aäº†ï¼Œæƒ³ä¸åˆ°åªæœ‰ä¹±æäº†ã€‚</p>
<h1 id="P1-æ‹¼ç‚¹æ¸¸æˆ"><a href="#P1-æ‹¼ç‚¹æ¸¸æˆ" class="headerlink" title="P1 æ‹¼ç‚¹æ¸¸æˆ"></a>P1 æ‹¼ç‚¹æ¸¸æˆ</h1><p>Cå’ŒSä¸¤ä½åŒå­¦ä¸€èµ·ç©æ‹¼ç‚¹æ¸¸æˆã€‚æœ‰ä¸€å †ç™½è‰²å¡ç‰Œå’Œä¸€å †è“è‰²å¡ç‰Œï¼Œæ¯å¼ å¡ç‰Œä¸Šå†™äº†ä¸€ä¸ªæ•´æ•°ç‚¹æ•°ã€‚CéšæœºæŠ½å–nå¼ ç™½è‰²å¡ç‰Œï¼ŒSéšæœºæŠ½å–nå¼ è“è‰²å¡ç‰Œï¼Œä»–ä»¬è¿›è¡Œnå›åˆæ‹¼ç‚¹ï¼Œæ¯æ¬¡ä¸¤äººå„å‡ºä¸€å¼ å¡ç‰Œï¼Œç‚¹æ•°å¤§è€…è·å¾—ä¸‰é¢—å·§å…‹åŠ›ï¼Œå°è€…è·å¾—ä¸€é¢—å·§å…‹åŠ›ï¼Œå¦‚æœç‚¹æ•°ç›¸åŒï¼Œæ¯äººå„å¾—äºŒé¢—å·§å…‹åŠ›ï¼Œä½¿ç”¨è¿‡çš„å¡ç‰Œä¸å¾—é‡å¤ä½¿ç”¨ã€‚å·²çŸ¥Cå’ŒSå–åˆ°çš„å¡ç‰Œç‚¹æ•°ï¼Œè¯·ç¼–ç¨‹è®¡ç®—Sæœ€å¤šå’Œæœ€å°‘èƒ½å¾—åˆ°å¤šå°‘é¢—å·§å…‹åŠ›ã€‚</p>
<h2 id="æ ¼å¼"><a href="#æ ¼å¼" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼"><a href="#è¾“å…¥æ ¼å¼" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>è¾“å…¥åŒ…å«å¤šç»„æµ‹è¯•æ•°æ®ã€‚<br>æ¯ç»„æµ‹è¯•æ•°æ®çš„ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•´æ•°n(1&lt;=n&lt;=1000)ï¼Œæ¥ä¸‹æ¥ä¸€è¡Œæ˜¯nä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºCæŠ½åˆ°çš„ç™½è‰²å¡ç‰Œçš„ç‚¹æ•°ï¼Œä¸‹ä¸€è¡Œä¹Ÿæ˜¯nä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºSæŠ½åˆ°çš„è“è‰²å¡ç‰Œçš„ç‚¹æ•°ã€‚<br>è¾“å…¥çš„æœ€åä»¥ä¸€ä¸ª0è¡¨ç¤ºç»“æŸã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼"><a href="#è¾“å‡ºæ ¼å¼" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>å¯¹æ¯ç»„æ•°æ®ï¼Œè¾“å‡ºä¸€è¡Œï¼Œå†…å®¹æ˜¯ä¸¤ä¸ªæ•´æ•°ç”¨ç©ºæ ¼æ ¼å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºSæœ€å¤šå’Œæœ€å°‘å¯è·å¾—çš„å·§å…‹åŠ›æ•°ã€‚<br><a id="more"></a></p>
<h2 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥"><a href="#æ ·ä¾‹è¾“å…¥" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>3<br>92 83 71<br>95 87 74<br>2<br>20 20<br>20 20<br>2<br>20 19<br>22 18<br>0</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º"><a href="#æ ·ä¾‹è¾“å‡º" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>9 5<br>4 4<br>4 4</p>
</blockquote>
<h2 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„æ˜¯äºŒåˆ†å›¾åŒ¹é…ï¼Œä½†nâ‰¤1000 KMç®—æ³•çš„å¤æ‚åº¦æ˜¯æ— æ³•æ‰¿å—çš„ã€‚<br>å…¶å®æ˜¯è´ªå¿ƒï¼Œç±»ä¼¼äºç”°å¿Œèµ›é©¬ã€‚</p>
<ol>
<li>Sçš„æœ€å°ç‰Œx&gt;Cçš„æœ€å°ç‰Œyï¼Œå…ˆå¾—3åˆ†ã€‚å› ä¸ºæ¯”xå¤§çš„ç‰Œä¸€å®šæ¯”xæœ‰æ›´å¹¿çš„é€‚ç”¨æ€§ï¼Œä¿ç•™ä¸€å®šæ˜¯æ›´ä¼˜çš„</li>
<li>Sçš„æœ€å¤§ç‰Œx&gt;Cçš„æœ€å¤§ç‰Œyï¼Œå…ˆå¾—3åˆ†ã€‚å› ä¸ºå¦‚æœsæ¬¡å¤§ç‰Œzæ¯”yå°ï¼Œä¸é€‰xçš„è¯åªèƒ½å¾—1åˆ†ï¼Œå¦‚æœzä¹Ÿæ¯”yå¤§ï¼Œç”±äºyæ˜¯Cçš„æœ€å¤§ç‰Œï¼Œå–xå’Œzæ˜¯ç­‰ä»·çš„ã€‚</li>
<li>ä¸Šè¿°éƒ½ä¸æ»¡è¶³ï¼Œå–Sçš„æœ€å°ç‰Œæ¶ˆè€—Yçš„æœ€å¤§ç‰Œ</li>
</ol>
<p>æœ€å°å¾—åˆ†å°±æ˜¯4*nï¼ˆæ€»å¾—åˆ†ï¼‰-Cçš„æœ€å¤§å¾—åˆ†</p>
<dir style="text-align:right"><a href="/2016/08/23/JSOI2016-æé«˜2ç­-è´ªå¿ƒ/2986.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>2986.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> </div><div class="line">    int=longint;</div><div class="line">    arr=<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1010</span>] <span class="keyword">of</span> int;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    n,i:int;</div><div class="line">    a,b:arr;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">swap</span><span class="params">(<span class="keyword">var</span> a,b:int)</span>;</span></div><div class="line"><span class="keyword">var</span> tmp:int;</div><div class="line"><span class="keyword">begin</span> tmp:=a;a:=b;b:=tmp <span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">qsort</span><span class="params">(<span class="keyword">var</span> a:arr;b,e:int)</span>;</span></div><div class="line"><span class="keyword">var</span> i,j,x:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    i:=b;j:=e;x:=a[random(e-b)+b];</div><div class="line">    <span class="keyword">repeat</span></div><div class="line">        <span class="keyword">while</span> a[i]&lt;x <span class="keyword">do</span> inc(i);</div><div class="line">        <span class="keyword">while</span> a[j]&gt;x <span class="keyword">do</span> dec(j);</div><div class="line">        <span class="keyword">if</span> i&lt;=j <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            swap(a[i],a[j]);</div><div class="line">            inc(i);dec(j);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">until</span> i&gt;j;</div><div class="line">    <span class="keyword">if</span> i&lt;e <span class="keyword">then</span> qsort(a,i,e);</div><div class="line">    <span class="keyword">if</span> b&lt;j <span class="keyword">then</span> qsort(a,b,j);</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">solve</span><span class="params">(a,b:arr)</span>:</span>int;</div><div class="line"><span class="keyword">var</span> la,lb,ra,rb,ans:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    la:=<span class="number">1</span>;lb:=<span class="number">1</span>;ra:=n;rb:=n;ans:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span> (la&lt;=ra) <span class="keyword">and</span> (lb&lt;=rb) <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">if</span> a[la]&lt;b[lb] <span class="keyword">then</span> <span class="keyword">begin</span> inc(ans,<span class="number">3</span>);inc(la);inc(lb) <span class="keyword">end</span></div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> a[ra]&lt;b[rb] <span class="keyword">then</span> <span class="keyword">begin</span> inc(ans,<span class="number">3</span>);dec(ra);dec(rb) <span class="keyword">end</span></div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> a[ra]=b[lb] <span class="keyword">then</span> <span class="keyword">begin</span> inc(ans,<span class="number">2</span>);dec(ra);inc(lb) <span class="keyword">end</span></div><div class="line">        <span class="keyword">else</span> <span class="keyword">begin</span> inc(ans);dec(ra);inc(lb) <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    solve:=ans;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">read</span>(n);</div><div class="line">    <span class="keyword">while</span> n&lt;&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">read</span>(a[i]);</div><div class="line">        <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">read</span>(b[i]);</div><div class="line">        qsort(a,<span class="number">1</span>,n);</div><div class="line">        qsort(b,<span class="number">1</span>,n);</div><div class="line">        writeln(solve(a,b),<span class="string">' '</span>,<span class="number">4</span>*n-solve(b,a));</div><div class="line">        <span class="keyword">read</span>(n);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P2-ç‰¹æ®Šå¯†ç é”"><a href="#P2-ç‰¹æ®Šå¯†ç é”" class="headerlink" title="P2 ç‰¹æ®Šå¯†ç é”"></a>P2 ç‰¹æ®Šå¯†ç é”</h1><p>æœ‰ä¸€ç§ç‰¹æ®Šçš„äºŒè¿›åˆ¶å¯†ç é”ï¼Œç”±nä¸ªç›¸è¿çš„æŒ‰é’®ç»„æˆï¼ˆn&lt;30ï¼‰ï¼ŒæŒ‰é’®æœ‰å‡¹/å‡¸ä¸¤ç§çŠ¶æ€ï¼Œç”¨æ‰‹æŒ‰æŒ‰é’®ä¼šæ”¹å˜å…¶çŠ¶æ€ã€‚<br>ç„¶è€Œè®©äººå¤´ç–¼çš„æ˜¯ï¼Œå½“ä½ æŒ‰ä¸€ä¸ªæŒ‰é’®æ—¶ï¼Œè·Ÿå®ƒç›¸é‚»çš„ä¸¤ä¸ªæŒ‰é’®çŠ¶æ€ä¹Ÿä¼šåè½¬ã€‚å½“ç„¶ï¼Œå¦‚æœä½ æŒ‰çš„æ˜¯æœ€å·¦æˆ–è€…æœ€å³è¾¹çš„æŒ‰é’®ï¼Œè¯¥æŒ‰é’®åªä¼šå½±å“åˆ°è·Ÿå®ƒç›¸é‚»çš„ä¸€ä¸ªæŒ‰é’®ã€‚<br>å½“å‰å¯†ç é”çŠ¶æ€å·²çŸ¥ï¼Œéœ€è¦è§£å†³çš„é—®é¢˜æ˜¯ï¼Œä½ è‡³å°‘éœ€è¦æŒ‰å¤šå°‘æ¬¡æŒ‰é’®ï¼Œæ‰èƒ½å°†å¯†ç é”è½¬å˜ä¸ºæ‰€æœŸæœ›çš„ç›®æ ‡çŠ¶æ€ã€‚</p>
<h2 id="æ ¼å¼-1"><a href="#æ ¼å¼-1" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-1"><a href="#è¾“å…¥æ ¼å¼-1" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ä¸¤è¡Œï¼Œç»™å‡ºä¸¤ä¸ªç”±0ã€1ç»„æˆçš„ç­‰é•¿å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå½“å‰/ç›®æ ‡å¯†ç é”çŠ¶æ€ï¼Œå…¶ä¸­0ä»£è¡¨å‡¹ï¼Œ1ä»£è¡¨å‡¸ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼-1"><a href="#è¾“å‡ºæ ¼å¼-1" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>è‡³å°‘éœ€è¦è¿›è¡Œçš„æŒ‰æŒ‰é’®æ“ä½œæ¬¡æ•°ï¼Œå¦‚æœæ— æ³•å®ç°è½¬å˜ï¼Œåˆ™è¾“å‡ºimpossibleã€‚<br><!--more--></p>
<h2 id="æ ·ä¾‹-1"><a href="#æ ·ä¾‹-1" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-1"><a href="#æ ·ä¾‹è¾“å…¥-1" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>011<br>000</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-1"><a href="#æ ·ä¾‹è¾“å‡º-1" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>1</p>
</blockquote>
<h2 id="é¢˜è§£-1"><a href="#é¢˜è§£-1" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„åè½¬é—®é¢˜<br>åŸºäºä»¥ä¸‹äº‹å®ï¼š</p>
<ol>
<li>æŒ‰æŒ‰é’®çš„é¡ºåºæ˜¯æ²¡æœ‰å½±å“çš„</li>
<li>å¯¹äºä¸€ä¸ªæŒ‰é’®è¢«åè½¬å¤šæ¬¡æ˜¯å¤šä½™çš„</li>
</ol>
<p>æ‰€ä»¥ï¼Œä»å·¦åˆ°å³æ‰«ä¸€è¾¹ï¼Œé‡åˆ°ä¸åŒçš„æŒ‰é’®iï¼Œå°†i..i+2åè½¬ï¼Œåˆ°næ—¶å¦‚æœä¸åŒè¯´æ˜æ— è§£ã€‚<br>è¿˜æœ‰ä¸€ä¸ªç»†èŠ‚ï¼Œå› ä¸ºæŒ‰ç¬¬1ä¸ªæŒ‰é’®ä¼šå½±å“åˆ°ç¬¬0ä¸ªæŒ‰é’®ï¼Œè€Œç¬¬0ä¸ªæŒ‰é’®çš„çŠ¶æ€æˆ‘ä»¬æ˜¯ä¸çŸ¥é“çš„ï¼Œå› æ­¤å³ä½¿1..2ä¸ªæŒ‰é’®çš„çŠ¶æ€æ˜¯æ­£ç¡®çš„ï¼Œæˆ‘ä»¬ä¹Ÿè¦å°è¯•ä¸€ä¸‹æŒ‰ç¬¬ä¸€ä¸ªæŒ‰é’®ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰æ›´ä¼˜è§£ã€‚</p>
<dir style="text-align:right"><a href="/2016/08/23/JSOI2016-æé«˜2ç­-è´ªå¿ƒ/8469.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>8469.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">var</span> n,ans:int;</div><div class="line">    s,d:<span class="keyword">string</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">flip</span><span class="params">(<span class="keyword">var</span> s:<span class="keyword">string</span>;i:int)</span>;</span></div><div class="line"><span class="keyword">begin</span></div><div class="line">    s[i]:=chr(ord(<span class="string">'1'</span>)+ord(<span class="string">'0'</span>)-ord(s[i]));</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">solve</span><span class="params">(s,d:<span class="keyword">string</span>)</span>:</span>int;</div><div class="line"><span class="keyword">var</span> i,j:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    i:=<span class="number">1</span>;solve:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span> i&lt;=n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">while</span> (s[i]=d[i]) <span class="keyword">and</span> (i&lt;=n) <span class="keyword">do</span> inc(i);</div><div class="line">        <span class="keyword">if</span> i&lt;n <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            <span class="keyword">for</span> j:=i <span class="keyword">to</span> min(i+<span class="number">2</span>,n) <span class="keyword">do</span> flip(s,j);</div><div class="line">            inc(solve);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">        inc(i);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">        <span class="keyword">if</span> s[i]&lt;&gt;d[i] <span class="keyword">then</span> <span class="keyword">exit</span>(maxlongint);</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    readln(s);readln(d);</div><div class="line">    n:=length(s);</div><div class="line">    ans:=solve(s,d);</div><div class="line">    flip(s,<span class="number">1</span>);flip(s,<span class="number">2</span>);</div><div class="line">    ans:=min(ans,solve(s,d)+<span class="number">1</span>);</div><div class="line">    <span class="keyword">if</span> ans=maxlongint <span class="keyword">then</span> <span class="keyword">write</span>(<span class="string">'impossible'</span>) <span class="keyword">else</span> <span class="keyword">write</span>(ans);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P3-ç”µæ± çš„å¯¿å‘½"><a href="#P3-ç”µæ± çš„å¯¿å‘½" class="headerlink" title="P3 ç”µæ± çš„å¯¿å‘½"></a>P3 ç”µæ± çš„å¯¿å‘½</h1><p>å°Sæ–°ä¹°äº†ä¸€ä¸ªæŒä¸Šæ¸¸æˆæœºï¼Œè¿™ä¸ªæ¸¸æˆæœºç”±ä¸¤èŠ‚5å·ç”µæ± ä¾›ç”µã€‚ä¸ºäº†ä¿è¯èƒ½å¤Ÿé•¿æ—¶é—´ç©æ¸¸æˆï¼Œä»–ä¹°äº†å¾ˆå¤š5å·ç”µæ± ï¼Œè¿™äº›ç”µæ± çš„ç”Ÿäº§å•†ä¸åŒï¼Œè´¨é‡ä¹Ÿæœ‰å·®å¼‚ï¼Œå› è€Œä½¿ç”¨å¯¿å‘½ä¹Ÿæœ‰æ‰€ä¸åŒï¼Œæœ‰çš„èƒ½ä½¿ç”¨5ä¸ªå°æ—¶ï¼Œæœ‰çš„å¯èƒ½å°±åªèƒ½ä½¿ç”¨3ä¸ªå°æ—¶ã€‚æ˜¾ç„¶å¦‚æœä»–åªæœ‰ä¸¤ä¸ªç”µæ± ä¸€ä¸ªèƒ½ç”¨5å°æ—¶ä¸€ä¸ªèƒ½ç”¨3å°æ—¶ï¼Œé‚£ä¹ˆä»–åªèƒ½ç©3ä¸ªå°æ—¶çš„æ¸¸æˆï¼Œæœ‰ä¸€ä¸ªç”µæ± å‰©ä¸‹çš„ç”µé‡æ— æ³•ä½¿ç”¨ï¼Œä½†æ˜¯å¦‚æœä»–æœ‰æ›´å¤šçš„ç”µæ± ï¼Œå°±å¯ä»¥æ›´åŠ å……åˆ†åœ°åˆ©ç”¨å®ƒä»¬ï¼Œæ¯”å¦‚ä»–æœ‰ä¸‰ä¸ªç”µæ± åˆ†åˆ«èƒ½ç”¨3ã€3ã€5å°æ—¶ï¼Œä»–å¯ä»¥å…ˆä½¿ç”¨ä¸¤èŠ‚èƒ½ç”¨3ä¸ªå°æ—¶çš„ç”µæ± ï¼Œä½¿ç”¨åŠä¸ªå°æ—¶åå†æŠŠå…¶ä¸­ä¸€ä¸ªæ¢æˆèƒ½ä½¿ç”¨5ä¸ªå°æ—¶çš„ç”µæ± ï¼Œä¸¤ä¸ªåŠå°æ—¶åå†æŠŠå‰©ä¸‹çš„ä¸€èŠ‚ç”µæ± æ¢æˆåˆšæ‰æ¢ä¸‹çš„ç”µæ± ï¼ˆé‚£ä¸ªç”µæ± è¿˜èƒ½ç”¨2.5ä¸ªå°æ—¶ï¼‰ï¼Œè¿™æ ·æ€»å…±å°±å¯ä»¥ä½¿ç”¨5.5ä¸ªå°æ—¶ï¼Œæ²¡æœ‰ä¸€ç‚¹æµªè´¹ã€‚<br>ç°åœ¨å·²çŸ¥ç”µæ± çš„æ•°é‡å’Œç”µæ± èƒ½å¤Ÿä½¿ç”¨çš„æ—¶é—´ï¼Œè¯·ä½ æ‰¾ä¸€ç§æ–¹æ¡ˆä½¿å¾—ä½¿ç”¨æ—¶é—´å°½å¯èƒ½çš„é•¿ã€‚</p>
<h2 id="æ ¼å¼-2"><a href="#æ ¼å¼-2" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-2"><a href="#è¾“å…¥æ ¼å¼-2" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>è¾“å…¥åŒ…å«å¤šç»„æ•°æ®ã€‚æ¯ç»„æ•°æ®åŒ…æ‹¬ä¸¤è¡Œï¼Œç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•´æ•°N (2 â‰¤ N â‰¤ 1000)ï¼Œè¡¨ç¤ºç”µæ± çš„æ•°ç›®ï¼Œæ¥ä¸‹æ¥ä¸€è¡Œæ˜¯Nä¸ªæ­£æ•´æ•°è¡¨ç¤ºç”µæ± èƒ½ä½¿ç”¨çš„æ—¶é—´ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼-2"><a href="#è¾“å‡ºæ ¼å¼-2" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>è¾“å…¥åŒ…å«å¤šç»„æ•°æ®ã€‚æ¯ç»„æ•°æ®åŒ…æ‹¬ä¸¤è¡Œï¼Œç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•´æ•°N (2 â‰¤ N â‰¤ 1000)ï¼Œè¡¨ç¤ºç”µæ± çš„æ•°ç›®ï¼Œæ¥ä¸‹æ¥ä¸€è¡Œæ˜¯Nä¸ªæ­£æ•´æ•°è¡¨ç¤ºç”µæ± èƒ½ä½¿ç”¨çš„æ—¶é—´ã€‚<br><!--more--></p>
<h2 id="æ ·ä¾‹-2"><a href="#æ ·ä¾‹-2" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-2"><a href="#æ ·ä¾‹è¾“å…¥-2" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>2<br>3 5<br>3<br>3 3 5</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-2"><a href="#æ ·ä¾‹è¾“å‡º-2" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>3.0<br>5.5</p>
</blockquote>
<h2 id="é¢˜è§£-2"><a href="#é¢˜è§£-2" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>è®°æœ€é•¿çš„ç”µæ± é•¿ä¸ºmxlï¼Œæ‰€æœ‰ç”µæ± é•¿åº¦åŠ èµ·æ¥ä¸ºsum<br>å¦‚æœmxl&lt;=sum/2ï¼Œé‚£ä¹ˆç­”æ¡ˆæ˜¯sum/2<br>å¦åˆ™ç­”æ¡ˆæ˜¯sum-mxl</p>
<dir style="text-align:right"><a href="/2016/08/23/JSOI2016-æé«˜2ç­-è´ªå¿ƒ/2469.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>8469.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">var</span> n,i,j,sum,mxl:int;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">while</span> <span class="keyword">not</span> eof <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        readln(n);</div><div class="line">        mxl:=<span class="number">0</span>;sum:=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            <span class="keyword">read</span>(j);</div><div class="line">            mxl:=max(mxl,j);</div><div class="line">            inc(sum,j);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">        readln;</div><div class="line">        writeln(min((sum-mxl)/<span class="number">1</span>,sum/<span class="number">2</span>):<span class="number">0</span>:<span class="number">1</span>);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P4-ç§¯æœ¨å¤§èµ›"><a href="#P4-ç§¯æœ¨å¤§èµ›" class="headerlink" title="P4 ç§¯æœ¨å¤§èµ›"></a>P4 ç§¯æœ¨å¤§èµ›</h1><p>æ˜¥æ˜¥å¹¼å„¿å›­ä¸¾åŠäº†ä¸€å¹´ä¸€åº¦çš„â€œç§¯æœ¨å¤§èµ›â€ã€‚ä»Šå¹´æ¯”èµ›çš„å†…å®¹æ˜¯æ­å»ºä¸€åº§å®½åº¦ä¸º n çš„å¤§å¦ï¼Œå¤§å¦å¯ä»¥çœ‹æˆç”± n å—å®½åº¦ä¸º1çš„ç§¯æœ¨ç»„æˆï¼Œç¬¬ğ‘–å—ç§¯æœ¨çš„æœ€ç»ˆé«˜åº¦éœ€è¦æ˜¯hiã€‚<br>åœ¨æ­å»ºå¼€å§‹ä¹‹å‰ï¼Œæ²¡æœ‰ä»»ä½•ç§¯æœ¨ï¼ˆå¯ä»¥çœ‹æˆ n å—é«˜åº¦ä¸º 0 çš„ç§¯æœ¨ï¼‰ã€‚æ¥ä¸‹æ¥æ¯æ¬¡æ“ä½œï¼Œå°æœ‹å‹ä»¬å¯ä»¥é€‰æ‹©ä¸€æ®µè¿ç»­åŒºé—´[L,R]ï¼Œç„¶åå°†ç¬¬ L å—åˆ°ç¬¬ R å—ä¹‹é—´ï¼ˆå«ç¬¬ L å—å’Œç¬¬ R å—ï¼‰æ‰€æœ‰ç§¯æœ¨çš„é«˜åº¦åˆ†åˆ«å¢åŠ 1ã€‚<br>å° M æ˜¯ä¸ªèªæ˜çš„å°æœ‹å‹ï¼Œå¥¹å¾ˆå¿«æƒ³å‡ºäº†å»ºé€ å¤§å¦çš„æœ€ä½³ç­–ç•¥ï¼Œä½¿å¾—å»ºé€ æ‰€éœ€çš„æ“ä½œæ¬¡æ•°æœ€å°‘ã€‚ä½†å¥¹ä¸æ˜¯ä¸€ä¸ªå‹¤äºåŠ¨æ‰‹çš„å­©å­ï¼Œæ‰€ä»¥æƒ³è¯·ä½ å¸®å¿™å®ç°è¿™ä¸ªç­–ç•¥ï¼Œå¹¶æ±‚å‡ºæœ€å°‘çš„æ“ä½œæ¬¡æ•°ã€‚</p>
<h2 id="æ ¼å¼-3"><a href="#æ ¼å¼-3" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-3"><a href="#è¾“å…¥æ ¼å¼-3" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>è¾“å…¥åŒ…å«ä¸¤è¡Œï¼Œç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•° nï¼Œè¡¨ç¤ºå¤§å¦çš„å®½åº¦ã€‚<br>ç¬¬äºŒè¡ŒåŒ…å« n ä¸ªæ•´æ•°ï¼Œç¬¬iä¸ªæ•´æ•°ä¸ºhiã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼-3"><a href="#è¾“å‡ºæ ¼å¼-3" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>ä»…ä¸€è¡Œï¼Œå³å»ºé€ æ‰€éœ€çš„æœ€å°‘æ“ä½œæ•°ã€‚<br><!--more--></p>
<h2 id="æ ·ä¾‹-3"><a href="#æ ·ä¾‹-3" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-3"><a href="#æ ·ä¾‹è¾“å…¥-3" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>5<br>2 3 4 1 2</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-3"><a href="#æ ·ä¾‹è¾“å‡º-3" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>5</p>
</blockquote>
<h3 id="æç¤º"><a href="#æç¤º" class="headerlink" title="æç¤º"></a>æç¤º</h3><p>æ¯ä¸ªæµ‹è¯•ç‚¹1sã€‚<br>å…¶ä¸­ä¸€ç§å¯è¡Œçš„æœ€ä½³æ–¹æ¡ˆ,ä¾æ¬¡é€‰æ‹© [1,5] [1,3] [2,3] [3,3] [5,5]<br>å¯¹äº 30%çš„æ•°æ®ï¼Œæœ‰1 â‰¤ n â‰¤ 10;<br>å¯¹äº 70%çš„æ•°æ®ï¼Œæœ‰1 â‰¤ n â‰¤ 1000;<br>å¯¹äº 100%çš„æ•°æ®ï¼Œæœ‰1 â‰¤ n â‰¤ 100000ï¼Œ0 â‰¤ hi â‰¤ 10000ã€‚</p>
<h2 id="é¢˜è§£-3"><a href="#é¢˜è§£-3" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>æ˜¾ç„¶æˆ‘ä»¬å¸Œæœ›ä¸€ä¸ªåŒºé—´å°½é‡åœ°é•¿ã€‚<br>å¯¹äºä¸€å—çš„é«˜åº¦h(i)<br>å¦‚æœh(i+1)&lt;=h(i)ï¼Œè¦†ç›–1..içš„åŒºé—´ä¸€å®šèƒ½è¦†ç›–h(i)ï¼Œä¸ç”¨å¢åŠ æ–°åŒºé—´ã€‚<br>å¦åˆ™ï¼Œè¦è¦†ç›–h(i+1)-h(i)çš„é«˜åº¦å·®ï¼Œæ–°åŒºé—´æ•°=é«˜åº¦å·®ã€‚</p>
<dir style="text-align:right"><a href="/2016/08/23/JSOI2016-æé«˜2ç­-è´ªå¿ƒ/p1844.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>p1844.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">var</span> n,i,j,last,ans:longint;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">read</span>(n);</div><div class="line">    ans:=<span class="number">0</span>;last:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(j);</div><div class="line">        inc(ans,max(<span class="number">0</span>,j-last));</div><div class="line">        last:=j;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">write</span>(ans);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P5-å›½ç‹æ¸¸æˆ"><a href="#P5-å›½ç‹æ¸¸æˆ" class="headerlink" title="P5 å›½ç‹æ¸¸æˆ"></a>P5 å›½ç‹æ¸¸æˆ</h1><p>æ°é€¢Hå›½å›½åº†ï¼Œå›½ç‹é‚€è¯·nä½å¤§è‡£æ¥ç©ä¸€ä¸ªæœ‰å¥–æ¸¸æˆã€‚é¦–å…ˆï¼Œä»–è®©æ¯ä¸ªå¤§è‡£åœ¨å·¦ã€å³æ‰‹ä¸Šé¢åˆ†åˆ«å†™ä¸‹ä¸€ä¸ªæ•´æ•°ï¼Œå›½ç‹è‡ªå·±ä¹Ÿåœ¨å·¦ã€å³æ‰‹ä¸Šå„å†™ä¸€ä¸ªæ•´æ•°ã€‚ç„¶åï¼Œè®©è¿™nä½å¤§è‡£æ’æˆä¸€æ’ï¼Œå›½ç‹ç«™åœ¨é˜Ÿä¼çš„æœ€å‰é¢ã€‚æ’å¥½é˜Ÿåï¼Œæ‰€æœ‰çš„å¤§è‡£éƒ½ä¼šè·å¾—å›½ç‹å¥–èµçš„è‹¥å¹²é‡‘å¸ï¼Œæ¯ä½å¤§è‡£è·å¾—çš„é‡‘å¸æ•°åˆ†åˆ«æ˜¯ï¼šæ’åœ¨è¯¥å¤§è‡£å‰é¢çš„æ‰€æœ‰äººçš„å·¦æ‰‹ä¸Šçš„æ•°çš„ä¹˜ç§¯é™¤ä»¥ä»–è‡ªå·±å³æ‰‹ä¸Šçš„æ•°ï¼Œç„¶åå‘ä¸‹å–æ•´å¾—åˆ°çš„ç»“æœã€‚<br>å›½ç‹ä¸å¸Œæœ›æŸä¸€ä¸ªå¤§è‡£è·å¾—ç‰¹åˆ«å¤šçš„å¥–èµï¼Œæ‰€ä»¥ä»–æƒ³è¯·ä½ å¸®ä»–é‡æ–°å®‰æ’ä¸€ä¸‹é˜Ÿä¼çš„é¡ºåºï¼Œä½¿å¾—è·å¾—å¥–èµæœ€å¤šçš„å¤§è‡£ï¼Œæ‰€è·å¥–èµå°½å¯èƒ½çš„å°‘ã€‚æ³¨æ„ï¼Œå›½ç‹çš„ä½ç½®å§‹ç»ˆåœ¨é˜Ÿä¼çš„æœ€å‰é¢ã€‚ </p>
<h2 id="æ ¼å¼-4"><a href="#æ ¼å¼-4" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-4"><a href="#è¾“å…¥æ ¼å¼-4" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°nï¼Œè¡¨ç¤ºå¤§è‡£çš„äººæ•°ã€‚<br>ç¬¬äºŒè¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°aå’Œbï¼Œä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºå›½ç‹å·¦æ‰‹å’Œå³æ‰‹ä¸Šçš„æ•´æ•°ã€‚æ¥ä¸‹æ¥nè¡Œï¼Œæ¯è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°aå’Œbï¼Œä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºæ¯ä¸ªå¤§è‡£å·¦æ‰‹å’Œå³æ‰‹ä¸Šçš„æ•´æ•°ã€‚ </p>
<h2 id="è¾“å‡ºæ ¼å¼-4"><a href="#è¾“å‡ºæ ¼å¼-4" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>è¾“å‡ºåªæœ‰ä¸€è¡Œï¼ŒåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºé‡æ–°æ’åˆ—åçš„é˜Ÿä¼ä¸­è·å¥–èµæœ€å¤šçš„å¤§è‡£æ‰€è·å¾—çš„é‡‘å¸æ•°ã€‚<br><!--more--></p>
<h2 id="æ ·ä¾‹-4"><a href="#æ ·ä¾‹-4" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-4"><a href="#æ ·ä¾‹è¾“å…¥-4" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>3<br>1 1<br>2 3<br>7 4<br>4 6 </p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-4"><a href="#æ ·ä¾‹è¾“å‡º-4" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>2</p>
</blockquote>
<h3 id="æç¤º-1"><a href="#æç¤º-1" class="headerlink" title="æç¤º"></a>æç¤º</h3><p>æ¯ä¸ªæµ‹è¯•ç‚¹1s<br>å¯¹äº20%çš„æ•°æ®ï¼Œæœ‰1â‰¤ nâ‰¤ 10ï¼Œ0 &lt; aÃ—b &lt; 8ï¼›<br>å¯¹äº40%çš„æ•°æ®ï¼Œæœ‰1â‰¤ nâ‰¤20ï¼Œ0 &lt; aÃ—b &lt; 8ï¼›<br>å¯¹äº60%çš„æ•°æ®ï¼Œæœ‰1â‰¤ nâ‰¤100ï¼›<br>å¯¹äº60%çš„æ•°æ®ï¼Œä¿è¯ç­”æ¡ˆä¸è¶…è¿‡10^9ï¼›<br>å¯¹äº100%çš„æ•°æ®ï¼Œæœ‰1 â‰¤ n â‰¤1,000ï¼Œ0 &lt; aã€b &lt; 10000ã€‚<br>Noip2012æé«˜ç»„å¤èµ›Day1T2</p>
<h2 id="é¢˜è§£-4"><a href="#é¢˜è§£-4" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>é¦–å…ˆè¿™é¢˜æ˜¯ä¸€ä¸ªå¾ˆéšè”½çš„<strong>è´ªå¿ƒ</strong>ï¼Œèƒ½ä¸èƒ½çœ‹å‡ºæ¥è¦çœ‹æ°´ï¼ˆRï¼‰å¹³ï¼ˆPï¼‰<br>å…¶å®æ•°æ®èŒƒå›´ä¸­ç»™äº†æš—ç¤ºï¼š<strong>aÃ—b</strong><br>è®°ç›¸é‚»çš„ä¸¤ä¸ªäººå·¦å³æ‰‹ä¸º(a,b)å’Œ(A,B)ï¼Œè®°è¿™ä¸¤ä¸ªäººä¹‹å‰çš„äººå·¦æ‰‹ä¹˜ç§¯S<br>(a,b)åœ¨å‰ï¼Œæœ€å¤šé‡‘å¸å€¼ä¸ºa1=max(S/b,SÃ—a/B)<br>(A,B)åœ¨å‰ï¼Œæœ€å¤šä¸ºa2=max(S/B,SÃ—A/b)<br>æ˜¾ç„¶ï¼šS/B&lt;SÃ—a/Bï¼ŒS/b&lt;SÃ—A/b<br>è¦ä½¿å¾—a1&lt;a2ï¼Œåˆ™SÃ—a/B&lt;SÃ—A/b<br>å˜å½¢åï¼šaÃ—b&lt;AÃ—B<br>æ‰€ä»¥<strong>å·¦å³æ‰‹ä¹˜ç§¯</strong>å¤§çš„äººï¼Œæ’åœ¨å‰é¢å¾—åˆ°çš„é‡‘å¸æ•°å¤šï¼Œä¸ºäº†ä½¿å¾—é‡‘å¸æ•°æœ€å¤§å€¼æœ€å°ï¼ŒæŒ‰å·¦å³æ‰‹ä¹˜ç§¯<strong>å‡åºæ’åˆ—</strong>ï¼Œç„¶åä¸Š<strong>é«˜ç²¾åº¦</strong>ã€‚<br>æ³¨æ„ï¼šprintæ—¶å¯¹a[i]ç”¨lnç®—ä½æ•°ï¼Œ<strong>è¦ç¡®ä¿a[i]â‰ 0</strong>ï¼Œå¦åˆ™RE</p>
<dir style="text-align:right"><a href="/2016/08/23/JSOI2016-æé«˜2ç­-è´ªå¿ƒ/p1779.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>p1779.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">type</span> </div><div class="line">    big=<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1010</span>] <span class="keyword">of</span> int64;</div><div class="line">    int=longint;</div><div class="line"><span class="keyword">const</span> </div><div class="line">    bs:int64=<span class="number">100000000</span>;</div><div class="line">    k=<span class="number">8</span>;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    a:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1010</span>,<span class="number">0</span>..<span class="number">1</span>] <span class="keyword">of</span> int;</div><div class="line">    n,i:int;</div><div class="line">    tmp,ans,prob:big;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">swap</span><span class="params">(<span class="keyword">var</span> a,b:int)</span>;</span></div><div class="line"><span class="keyword">var</span> tmp:int;</div><div class="line"><span class="keyword">begin</span> tmp:=a;a:=b;b:=tmp <span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">qsort</span><span class="params">(b,e:int)</span>;</span></div><div class="line"><span class="keyword">var</span> i,j:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    i:=b;j:=e;a[<span class="number">0</span>]:=a[random(e-b)+b];</div><div class="line">    <span class="keyword">repeat</span></div><div class="line">        <span class="keyword">while</span> a[i,<span class="number">0</span>]*a[i,<span class="number">1</span>]&lt;a[<span class="number">0</span>,<span class="number">0</span>]*a[<span class="number">0</span>,<span class="number">1</span>] <span class="keyword">do</span> inc(i);</div><div class="line">        <span class="keyword">while</span> a[j,<span class="number">0</span>]*a[j,<span class="number">1</span>]&gt;a[<span class="number">0</span>,<span class="number">0</span>]*a[<span class="number">0</span>,<span class="number">1</span>] <span class="keyword">do</span> dec(j);</div><div class="line">        <span class="keyword">if</span> i&lt;=j <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            swap(a[i,<span class="number">0</span>],a[j,<span class="number">0</span>]);swap(a[i,<span class="number">1</span>],a[j,<span class="number">1</span>]);</div><div class="line">            inc(i);dec(j);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">until</span> i&gt;j;</div><div class="line">    <span class="keyword">if</span> i&lt;e <span class="keyword">then</span> qsort(i,e);</div><div class="line">    <span class="keyword">if</span> b&lt;j <span class="keyword">then</span> qsort(b,j);</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">com</span><span class="params">(a,b:big)</span>:</span>int64;</div><div class="line"><span class="keyword">var</span> i:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    i:=max(a[<span class="number">0</span>],b[<span class="number">0</span>]);</div><div class="line">    <span class="keyword">while</span> (a[i]=b[i]) <span class="keyword">and</span> (i&gt;<span class="number">0</span>) <span class="keyword">do</span> dec(i);</div><div class="line">    com:=a[i]-b[i];</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">mul</span><span class="params">(a:big;b:int)</span>:</span>big;</div><div class="line"><span class="keyword">var</span> i:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    fillchar(mul,sizeof(mul),<span class="number">0</span>);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> a[<span class="number">0</span>] <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        inc(mul[i],a[i]*b);</div><div class="line">        inc(mul[i+<span class="number">1</span>],mul[i] <span class="keyword">div</span> bs);</div><div class="line">        mul[i]:=mul[i] <span class="keyword">mod</span> bs;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    mul[<span class="number">0</span>]:=a[<span class="number">0</span>];</div><div class="line">    <span class="keyword">while</span> mul[mul[<span class="number">0</span>]+<span class="number">1</span>]&gt;<span class="number">0</span> <span class="keyword">do</span> inc(mul[<span class="number">0</span>]);</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sdiv</span><span class="params">(a:big;b:int)</span>:</span>big;</div><div class="line"><span class="keyword">var</span> m:int64;i:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    fillchar(sdiv,sizeof(sdiv),<span class="number">0</span>);</div><div class="line">    m:=<span class="number">0</span>;</div><div class="line">    sdiv[<span class="number">0</span>]:=a[<span class="number">0</span>];</div><div class="line">    <span class="keyword">for</span> i:=a[<span class="number">0</span>] <span class="keyword">downto</span> <span class="number">1</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        sdiv[i]:=(m*bs+a[i]) <span class="keyword">div</span> b;</div><div class="line">        m:=(m*bs+a[i]) <span class="keyword">mod</span> b;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">while</span> (sdiv[sdiv[<span class="number">0</span>]]=<span class="number">0</span>) <span class="keyword">and</span> (sdiv[<span class="number">0</span>]&gt;<span class="number">0</span>) <span class="keyword">do</span> dec(sdiv[<span class="number">0</span>]);</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">print</span><span class="params">(a:big)</span>;</span></div><div class="line"><span class="keyword">var</span> i,j,x:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">if</span> a[<span class="number">0</span>]=<span class="number">0</span> <span class="keyword">then</span> <span class="keyword">begin</span> <span class="keyword">write</span>(<span class="number">0</span>);<span class="keyword">exit</span> <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">write</span>(a[a[<span class="number">0</span>]]);</div><div class="line">    <span class="keyword">for</span> i:=a[<span class="number">0</span>]-<span class="number">1</span> <span class="keyword">downto</span> <span class="number">1</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">if</span> a[i]=<span class="number">0</span> <span class="keyword">then</span> x:=<span class="number">1</span> <span class="keyword">else</span> x:=floor(ln(a[i])/ln(<span class="number">10</span>))+<span class="number">1</span>;</div><div class="line">        <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> k-x <span class="keyword">do</span> <span class="keyword">write</span>(<span class="number">0</span>);</div><div class="line">        <span class="keyword">write</span>(a[i]);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'p1779.in'</span>);reset(input);</div><div class="line">    <span class="keyword">read</span>(n);inc(n);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">read</span>(a[i,<span class="number">0</span>],a[i,<span class="number">1</span>]);</div><div class="line">    qsort(<span class="number">2</span>,n);</div><div class="line">    ans[<span class="number">0</span>]:=<span class="number">0</span>;prob[<span class="number">0</span>]:=<span class="number">1</span>;prob[<span class="number">1</span>]:=a[<span class="number">1</span>,<span class="number">0</span>];</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">2</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        tmp:=sdiv(prob,a[i,<span class="number">1</span>]);</div><div class="line">        <span class="keyword">if</span> com(tmp,ans)&gt;<span class="number">0</span> <span class="keyword">then</span> ans:=tmp;</div><div class="line">        prob:=mul(prob,a[i,<span class="number">0</span>]);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    print(ans);</div><div class="line">    close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è´ªå¿ƒè€ƒçš„æ˜¯RPï¼Œæƒ³å¯¹è´ªå¿ƒç­–ç•¥å°±Aäº†ï¼Œæƒ³ä¸åˆ°åªæœ‰ä¹±æäº†ã€‚&lt;/p&gt;
&lt;h1 id=&quot;P1-æ‹¼ç‚¹æ¸¸æˆ&quot;&gt;&lt;a href=&quot;#P1-æ‹¼ç‚¹æ¸¸æˆ&quot; class=&quot;headerlink&quot; title=&quot;P1 æ‹¼ç‚¹æ¸¸æˆ&quot;&gt;&lt;/a&gt;P1 æ‹¼ç‚¹æ¸¸æˆ&lt;/h1&gt;&lt;p&gt;Cå’ŒSä¸¤ä½åŒå­¦ä¸€èµ·ç©æ‹¼ç‚¹æ¸¸æˆã€‚æœ‰ä¸€å †ç™½è‰²å¡ç‰Œå’Œä¸€å †è“è‰²å¡ç‰Œï¼Œæ¯å¼ å¡ç‰Œä¸Šå†™äº†ä¸€ä¸ªæ•´æ•°ç‚¹æ•°ã€‚CéšæœºæŠ½å–nå¼ ç™½è‰²å¡ç‰Œï¼ŒSéšæœºæŠ½å–nå¼ è“è‰²å¡ç‰Œï¼Œä»–ä»¬è¿›è¡Œnå›åˆæ‹¼ç‚¹ï¼Œæ¯æ¬¡ä¸¤äººå„å‡ºä¸€å¼ å¡ç‰Œï¼Œç‚¹æ•°å¤§è€…è·å¾—ä¸‰é¢—å·§å…‹åŠ›ï¼Œå°è€…è·å¾—ä¸€é¢—å·§å…‹åŠ›ï¼Œå¦‚æœç‚¹æ•°ç›¸åŒï¼Œæ¯äººå„å¾—äºŒé¢—å·§å…‹åŠ›ï¼Œä½¿ç”¨è¿‡çš„å¡ç‰Œä¸å¾—é‡å¤ä½¿ç”¨ã€‚å·²çŸ¥Cå’ŒSå–åˆ°çš„å¡ç‰Œç‚¹æ•°ï¼Œè¯·ç¼–ç¨‹è®¡ç®—Sæœ€å¤šå’Œæœ€å°‘èƒ½å¾—åˆ°å¤šå°‘é¢—å·§å…‹åŠ›ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ ¼å¼&quot;&gt;&lt;a href=&quot;#æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;æ ¼å¼&quot;&gt;&lt;/a&gt;æ ¼å¼&lt;/h2&gt;&lt;h3 id=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å…¥æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å…¥æ ¼å¼&lt;/h3&gt;&lt;p&gt;è¾“å…¥åŒ…å«å¤šç»„æµ‹è¯•æ•°æ®ã€‚&lt;br&gt;æ¯ç»„æµ‹è¯•æ•°æ®çš„ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•´æ•°n(1&amp;lt;=n&amp;lt;=1000)ï¼Œæ¥ä¸‹æ¥ä¸€è¡Œæ˜¯nä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºCæŠ½åˆ°çš„ç™½è‰²å¡ç‰Œçš„ç‚¹æ•°ï¼Œä¸‹ä¸€è¡Œä¹Ÿæ˜¯nä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºSæŠ½åˆ°çš„è“è‰²å¡ç‰Œçš„ç‚¹æ•°ã€‚&lt;br&gt;è¾“å…¥çš„æœ€åä»¥ä¸€ä¸ª0è¡¨ç¤ºç»“æŸã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å‡ºæ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å‡ºæ ¼å¼&lt;/h2&gt;&lt;p&gt;å¯¹æ¯ç»„æ•°æ®ï¼Œè¾“å‡ºä¸€è¡Œï¼Œå†…å®¹æ˜¯ä¸¤ä¸ªæ•´æ•°ç”¨ç©ºæ ¼æ ¼å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºSæœ€å¤šå’Œæœ€å°‘å¯è·å¾—çš„å·§å…‹åŠ›æ•°ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="Problem Set" scheme="https://cothrax.github.io/categories/Problem-Set/"/>
    
    
      <category term="OI" scheme="https://cothrax.github.io/tags/OI/"/>
    
      <category term="JSOI" scheme="https://cothrax.github.io/tags/JSOI/"/>
    
      <category term="è´ªå¿ƒ" scheme="https://cothrax.github.io/tags/%E8%B4%AA%E5%BF%83/"/>
    
      <category term="é«˜ç²¾åº¦" scheme="https://cothrax.github.io/tags/%E9%AB%98%E7%B2%BE%E5%BA%A6/"/>
    
      <category term="Maths" scheme="https://cothrax.github.io/tags/Maths/"/>
    
  </entry>
  
  <entry>
    <title>æŠ˜è…¾Ubuntu</title>
    <link href="https://cothrax.github.io/2016/08/22/%E6%8A%98%E8%85%BEUbuntu/"/>
    <id>https://cothrax.github.io/2016/08/22/æŠ˜è…¾Ubuntu/</id>
    <published>2016-08-22T13:00:50.000Z</published>
    <updated>2016-08-23T14:11:43.073Z</updated>
    
    <content type="html"><![CDATA[<p>noi_linuxæ‰€ç”¨çš„ubuntuç‰ˆæœ¬å·²ç»ä¸è¢«å®˜æ–¹æ”¯æŒäº†ï¼Œäºæ˜¯apt-getéƒ½æ— æ³•æ­£å¸¸å·¥ä½œï¼Œæ—§ç‰ˆçš„firefoxæ— æ³•è§£æå„å¤§OJçš„css3/h5ï¼Œäºæ˜¯è¯•è¯•Ubuntuã€‚<br>ä»¥æ­¤æ—¥å¿—è®°å½•ä¸€ä¸ªä¸‹åˆçš„å„ç§BUGå’Œè§£å†³æ–¹æ¡ˆã€‚</p>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>ä¹‹å‰ç”¨Uç›˜å¯åŠ¨ç›˜è£…Linuxå¤±è´¥äº†æ— æ•°æ¬¡ï¼Œç—‡çŠ¶æ˜¯è¿›äº†loadingç•Œé¢ï¼Œç„¶åé»‘å±ï¼Œå…‰æ ‡é—ªäº†å‡ ç§’åç³»ç»Ÿå°±ä¼‘çœ äº†ï¼Œé£æ‰‡è¿˜åœ¨è½¬ä½†ä¸è§åŠ¨é™ã€‚<br>æˆ‘çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼š</p>
<ol>
<li>æ¢ä½ç‰ˆæœ¬çš„Ubuntuï¼Œç”¨äº†32ä½çš„Ubuntu 14ã€‚</li>
<li>ç”¨Win32 Disk Imagerã€‚ä¹‹å‰ç”¨çš„UltraISOå’ŒUniversal USB Installeréƒ½å¤±è´¥äº†ã€‚</li>
<li>ç»è¿‡å‰é¢çš„æ­¥éª¤ï¼Œèƒ½è¿›é€‰æ‹©ç•Œé¢äº†ï¼Œç„¶åæŒ‰F6ï¼ŒæŠŠ<code>nomodeset</code>é€‰ä¸Šï¼Œå°±å¯ä»¥install Ubuntuäº†ã€‚<a id="more"></a>
</li>
</ol>
<h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><h3 id="GMONE"><a href="#GMONE" class="headerlink" title="GMONE"></a>GMONE</h3><p>noi_linuxçš„æ¡Œé¢æ˜¯gnomeï¼Œè€Œubuntu 14é»˜è®¤æ¡Œé¢çš„unityã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apt-get install gnome</div></pre></td></tr></table></figure></p>
<p>ç„¶åæ³¨é”€ï¼Œåœ¨ç™»é™†æ—¶é€‰ä¸€ä¸‹å°±å¯ä»¥äº†ã€‚</p>
<h3 id="åˆ‡æ¢root"><a href="#åˆ‡æ¢root" class="headerlink" title="åˆ‡æ¢root"></a>åˆ‡æ¢root</h3><p>æ¯æ¬¡éƒ½è¦sudoå¾ˆä¸çˆ½ï¼Œäºæ˜¯åˆ‡æ¢åˆ°rootï¼Œpasswdåè®¾ç½®æ–°çš„rootå¯†ç ï¼Œsuåè¾“å…¥å¯†ç å°±å¯ä»¥äº†</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo passwd</div><div class="line">su</div></pre></td></tr></table></figure>
<p><strong>ä¸‹æ–‡çš„å‘½ä»¤éƒ½æ˜¯ä»¥rootæ‰§è¡Œçš„</strong></p>
<p>è¿˜å¯ä»¥åˆ‡æ¢å›æ™®é€šç”¨æˆ·ï¼Œä¸¤ä¸ªéƒ½å¯ä»¥<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">exit</span></div><div class="line">su user_name</div></pre></td></tr></table></figure></p>
<h3 id="æ”¹hosts"><a href="#æ”¹hosts" class="headerlink" title="æ”¹hosts"></a>æ”¹hosts</h3><p>ç§‘å­¦ä¸Šç½‘å¯ä»¥ç”¨vpnï¼Œå½“ç„¶å¦‚æœéœ€æ±‚æ¯”è¾ƒä½çš„è¯ï¼Œæ€§ä»·æ¯”æœ€é«˜çš„æ˜¯hosts<br>linuxçš„hostsçš„ä½ç½®æ˜¯<code>/etc/hosts</code><br>è®°å¾—åˆ·æ–°dns<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/etc/init.d/networking restart</div></pre></td></tr></table></figure></p>
<h3 id="å®‰è£…Node-jsç­‰"><a href="#å®‰è£…Node-jsç­‰" class="headerlink" title="å®‰è£…Node.jsç­‰"></a>å®‰è£…Node.jsç­‰</h3><p>è¿™ç¯‡æ—¥å¿—å‘è‡ªUbuntuï¼Œè¦ç”¨Hexoå°±éœ€è¦Node.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">apt-get update  </div><div class="line">apt-get install -y python-software-properties software-properties-common  </div><div class="line">add-apt-repository ppa:chris-lea/node.js</div><div class="line">apt-get update  </div><div class="line">apt-get install nodejs</div></pre></td></tr></table></figure>
<h4 id="npmæ¢æº"><a href="#npmæ¢æº" class="headerlink" title="npmæ¢æº"></a>npmæ¢æº</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">npm config <span class="built_in">set</span> registry http://registry.cnpmjs.org</div><div class="line">npm info express</div></pre></td></tr></table></figure>
<h4 id="è£…GITå’ŒHEXO"><a href="#è£…GITå’ŒHEXO" class="headerlink" title="è£…GITå’ŒHEXO"></a>è£…GITå’ŒHEXO</h4><p><code>-g</code>é€‰é¡¹æŒ‡é»˜è®¤å®‰è£…åˆ°<code>/usr/lib/node_modules/npm</code>ä¸‹<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">apt-get install git-core</div><div class="line">npm install -g hexo</div><div class="line">npm install -g hexo-math</div></pre></td></tr></table></figure></p>
<h4 id="æ›´æ–°node-js"><a href="#æ›´æ–°node-js" class="headerlink" title="æ›´æ–°node.js"></a>æ›´æ–°node.js</h4><p>ç„¶åä¼¼ä¹æŠ¥äº†<code>TypeError: Object #&lt;Object&gt; has no method &#39;parse&#39;</code>é”™è¯¯ï¼Œgoogleäº†ä¸€ä¸‹å¥½åƒæ˜¯å› ä¸ºnodeç‰ˆæœ¬ä½äº†ï¼Œäºæ˜¯<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">npm cache clean <span class="_">-f</span></div><div class="line">npm install -g n</div><div class="line">n stable</div></pre></td></tr></table></figure></p>
<h3 id="æ·»åŠ path"><a href="#æ·»åŠ path" class="headerlink" title="æ·»åŠ path"></a>æ·»åŠ path</h3><p>å› ä¸ºæ²¡æœ‰å¿˜è®°åŠ <code>-g</code>ï¼ŒæŠ¥<code>Hexo command not found</code>ï¼Œäºæ˜¯æ‰‹åŠ¨å°†hexoçš„binåŠ åˆ°pathé‡Œï¼Œgeditæ‰“å¼€åæ·»åŠ <code>PATH=$PATH:$HOME/bin:/home/cothrax/Hexo/node_modules/hexo/bin</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">gedit ~/.bash_profile</div><div class="line"><span class="built_in">source</span> ~/.bash_profile</div></pre></td></tr></table></figure></p>
<h3 id="è®¾ç½®å‘½ä»¤åˆ«å"><a href="#è®¾ç½®å‘½ä»¤åˆ«å" class="headerlink" title="è®¾ç½®å‘½ä»¤åˆ«å"></a>è®¾ç½®å‘½ä»¤åˆ«å</h3><p>æœ‰äº›å‘½ä»¤å¾ˆé•¿æ¯æ¬¡éƒ½è¦æ•²ä¸æ–¹ä¾¿ï¼Œäºæ˜¯å†<code>~/</code>ä¸‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">touch .bash_aliases</div><div class="line">gedit .bash_aliases</div><div class="line"><span class="built_in">source</span> .bash_aliases</div></pre></td></tr></table></figure></p>
<p>ç¼–è¾‘æ—¶å†™å…¥aliasï¼Œæ¯”å¦‚ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">alias</span> chrome=<span class="string">'chromium-browser &amp;'</span></div><div class="line"><span class="built_in">alias</span> ff=<span class="string">'firefox &amp;'</span></div><div class="line"><span class="built_in">alias</span> en=<span class="string">'firefox https://app.yinxiang.com/Home.action &amp;'</span></div><div class="line"><span class="built_in">alias</span> opdir=<span class="string">'nautilus'</span></div></pre></td></tr></table></figure></p>
<h3 id="è®¾ç½®ç¯å¢ƒå˜é‡"><a href="#è®¾ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="è®¾ç½®ç¯å¢ƒå˜é‡"></a>è®¾ç½®ç¯å¢ƒå˜é‡</h3><p>æ¯æ¬¡éƒ½è¦æ•²å¾ˆé•¿çš„è·¯å¾„åï¼Œä¸å¦‚è®¾ä¸€ä¸‹ç¯å¢ƒå˜é‡ï¼ŒåŒæ ·åœ¨<code>~/.bash_aliases</code>å†™å…¥ï¼Œå¦‚ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">export</span> BLOG=<span class="string">'/home/wd/Hexo/'</span></div><div class="line"><span class="built_in">export</span> POST=<span class="string">'/home/wd/Hexo/source/_posts/'</span></div></pre></td></tr></table></figure></p>
<h3 id="å®‰è£…Brotheræ‰“å°æœºé©±åŠ¨"><a href="#å®‰è£…Brotheræ‰“å°æœºé©±åŠ¨" class="headerlink" title="å®‰è£…Brotheræ‰“å°æœºé©±åŠ¨"></a>å®‰è£…Brotheræ‰“å°æœºé©±åŠ¨</h3><p>Brotheræä¾›äº†LINUXç‰ˆæœ¬çš„é©±åŠ¨ï¼Œåˆ°å®˜ç½‘æ‰¾Driver Install Toolï¼Œæˆ–è€…googleè®¾å¤‡å·å°±èƒ½æ‰¾åˆ°ã€‚<br>æ¯”å¦‚æˆ‘çš„æ¸¯ç‰ˆL2700Dåœ¨ï¼š<a href="http://support.brother.com/g/b/downloadlist.aspx?c=hk&amp;lang=en&amp;prod=mfcl2700d_as&amp;os=128" target="_blank" rel="external">http://support.brother.com/g/b/downloadlist.aspx?c=hk&amp;lang=en&amp;prod=mfcl2700d_as&amp;os=128</a><br>ç„¶årootèº«ä»½è¿è¡Œè„šæœ¬å°±å¯ä»¥äº†ï¼Œå…ˆè¾“å…¥è®¾å¤‡å¥½æŸ¥è¯¢debåŒ…ï¼Œç„¶åNä¸ªyåŒæ„åè®®ï¼Œç„¶åé—®ä½ è¦ä¸è¦specify device URIï¼Œé€‰nå°±å¥½äº†ï¼ˆä¸æ˜¯é‚£æ˜¯ä»€ä¹ˆï¼‰ï¼Œç„¶åtest pageå°±æ‰“å°å‡ºæ¥äº†ã€‚</p>
<h2 id="å‡çº§"><a href="#å‡çº§" class="headerlink" title="å‡çº§"></a>å‡çº§</h2><p>è£…äº†14æƒ³å‡åˆ°16ï¼Œäºæ˜¯<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">sudo apt-get update</div><div class="line">sudo apt-get dist-upgrade</div><div class="line">sudo reboot</div><div class="line">sudo update-manager â€“d</div></pre></td></tr></table></figure></p>
<p>å½“ç„¶ä»¥ä¸Šæ“ä½œä¹Ÿå¯ä»¥åœ¨å›¾å½¢ç•Œé¢ä¸‹å®Œæˆï¼Œç³»ç»Ÿå·¥å…·é‡Œæœ‰è½¯ä»¶åŒ…æ›´æ–°ï¼ŒAdministrationé‡Œæœ‰è½¯ä»¶æ›´æ–°å™¨<br>ç„¶åé‡å¯åï¼Œå†è¿›ubuntuæ—¶é»‘å±äº†ï¼Œéƒ½åšå¥½é‡è£…çš„å‡†å¤‡äº†ï¼Œç„¶ååœ¨winä¸‹æŠŠeasybcdçš„ubuntuå¼•å¯¼åˆ æ‰é‡åŠ ä¸€ä¸‹å°±å¥½äº†ã€‚</p>
<h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><h3 id="USBå®¹é‡ä¸¢å¤±"><a href="#USBå®¹é‡ä¸¢å¤±" class="headerlink" title="USBå®¹é‡ä¸¢å¤±"></a>USBå®¹é‡ä¸¢å¤±</h3><p>åŸæ¥30Gçš„Uç›˜åšäº†å¯åŠ¨ç›˜åè¿˜å‰©1.03Gå›§ã€‚<br>æ‰¾Winä¸‹çš„ç£ç›˜ç®¡ç†å´ä¸èƒ½åˆ é™¤å·ï¼Œç„¶åç”¨<a href="http://www.diskgenius.cn/download.php" target="_blank" rel="external">Disk Genius</a>è§£å†³å•¦ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;noi_linuxæ‰€ç”¨çš„ubuntuç‰ˆæœ¬å·²ç»ä¸è¢«å®˜æ–¹æ”¯æŒäº†ï¼Œäºæ˜¯apt-getéƒ½æ— æ³•æ­£å¸¸å·¥ä½œï¼Œæ—§ç‰ˆçš„firefoxæ— æ³•è§£æå„å¤§OJçš„css3/h5ï¼Œäºæ˜¯è¯•è¯•Ubuntuã€‚&lt;br&gt;ä»¥æ­¤æ—¥å¿—è®°å½•ä¸€ä¸ªä¸‹åˆçš„å„ç§BUGå’Œè§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h2 id=&quot;å®‰è£…&quot;&gt;&lt;a href=&quot;#å®‰è£…&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…&quot;&gt;&lt;/a&gt;å®‰è£…&lt;/h2&gt;&lt;p&gt;ä¹‹å‰ç”¨Uç›˜å¯åŠ¨ç›˜è£…Linuxå¤±è´¥äº†æ— æ•°æ¬¡ï¼Œç—‡çŠ¶æ˜¯è¿›äº†loadingç•Œé¢ï¼Œç„¶åé»‘å±ï¼Œå…‰æ ‡é—ªäº†å‡ ç§’åç³»ç»Ÿå°±ä¼‘çœ äº†ï¼Œé£æ‰‡è¿˜åœ¨è½¬ä½†ä¸è§åŠ¨é™ã€‚&lt;br&gt;æˆ‘çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ¢ä½ç‰ˆæœ¬çš„Ubuntuï¼Œç”¨äº†32ä½çš„Ubuntu 14ã€‚&lt;/li&gt;
&lt;li&gt;ç”¨Win32 Disk Imagerã€‚ä¹‹å‰ç”¨çš„UltraISOå’ŒUniversal USB Installeréƒ½å¤±è´¥äº†ã€‚&lt;/li&gt;
&lt;li&gt;ç»è¿‡å‰é¢çš„æ­¥éª¤ï¼Œèƒ½è¿›é€‰æ‹©ç•Œé¢äº†ï¼Œç„¶åæŒ‰F6ï¼ŒæŠŠ&lt;code&gt;nomodeset&lt;/code&gt;é€‰ä¸Šï¼Œå°±å¯ä»¥install Ubuntuäº†ã€‚
    
    </summary>
    
      <category term="Tinkering Note" scheme="https://cothrax.github.io/categories/Tinkering-Note/"/>
    
    
      <category term="Bash" scheme="https://cothrax.github.io/tags/Bash/"/>
    
      <category term="Linux" scheme="https://cothrax.github.io/tags/Linux/"/>
    
      <category term="Hexo" scheme="https://cothrax.github.io/tags/Hexo/"/>
    
      <category term="Ubuntu" scheme="https://cothrax.github.io/tags/Ubuntu/"/>
    
  </entry>
  
  <entry>
    <title>[JSOI2016] æé«˜1ç­ Day6</title>
    <link href="https://cothrax.github.io/2016/08/22/JSOI2016-%E6%8F%90%E9%AB%981%E7%8F%AD-Day6/"/>
    <id>https://cothrax.github.io/2016/08/22/JSOI2016-æé«˜1ç­-Day6/</id>
    <published>2016-08-22T04:05:46.000Z</published>
    <updated>2016-08-22T04:29:57.956Z</updated>
    
    <content type="html"><![CDATA[<table>
<thead>
<tr>
<th style="text-align:center">é¢˜ç›®åç§°</th>
<th style="text-align:center">å°Wä¹°ç¤¼ç‰©</th>
<th style="text-align:center">å°Wç†ç¬”è®°</th>
<th style="text-align:center">å°Wå¼€å…³ç¯</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">å­˜ç›˜æ–‡ä»¶å</td>
<td style="text-align:center">bday</td>
<td style="text-align:center">note</td>
<td style="text-align:center">lites</td>
</tr>
<tr>
<td style="text-align:center">è¾“å…¥æ–‡ä»¶å</td>
<td style="text-align:center">bday.in</td>
<td style="text-align:center">note.in</td>
<td style="text-align:center">lites.in</td>
</tr>
<tr>
<td style="text-align:center">è¾“å‡ºæ–‡ä»¶å</td>
<td style="text-align:center">bday.out</td>
<td style="text-align:center">note.out</td>
<td style="text-align:center">lites.out</td>
</tr>
<tr>
<td style="text-align:center">æ—¶é™</td>
<td style="text-align:center">3s</td>
<td style="text-align:center">1s</td>
<td style="text-align:center">1s</td>
</tr>
<tr>
<td style="text-align:center">å†…å­˜é™åˆ¶</td>
<td style="text-align:center">64MB</td>
<td style="text-align:center">256MB</td>
<td style="text-align:center">256MB</td>
</tr>
</tbody>
</table>
<h1 id="P1-å°Wä¹°ç¤¼ç‰©"><a href="#P1-å°Wä¹°ç¤¼ç‰©" class="headerlink" title="P1 å°Wä¹°ç¤¼ç‰©"></a>P1 å°Wä¹°ç¤¼ç‰©</h1><p>å°W ä»Šå¤©å¾ˆé«˜å…´ï¼Œå› ä¸ºå•†åº—ç»™OIer ä»¬å‘è´­ç‰©åˆ¸äº†ã€‚å°W å¾—åˆ°äº†ä¸€äº›ä»·å€¼ä¸è²çš„SHOP<br>è´­ç‰©åˆ¸ï¼Œæ‰€ä»¥ä»–å†³å®šä¹°N ä»¶ç¤¼ç‰©é€ç»™å°Mã€‚<br>å½“å°W é€‰å¥½äº†N ä»¶ç¤¼ç‰©ï¼Œé«˜å…´åœ°å»ç»“è´¦æ—¶ï¼Œä»–çªç„¶å‘ç°SHOP å¯¹è´­ç‰©åˆ¸çš„ä½¿ç”¨æœ‰éå¸¸å¥¸<br>å•†ï¼ˆå¤©ä¸‹å“ªæœ‰å…è´¹çš„è´­ç‰©åˆ¸ï¼Ÿï¼‰çš„è§„å®šï¼šä¸€æ¬¡åªå…è®¸ä½¿ç”¨ä¸€å¼ ã€ä¸æ‰¾é›¶ã€ä¸ä¸ç°é‡‘æ··ç”¨ã€‚å°<br>W èº«ä¸Šæ ¹æœ¬æ²¡æœ‰ç°é‡‘ï¼Œå¹¶ä¸”ä»–ä¸æ„¿æ„å…¨éƒ¨æ”¾å¼ƒæŒ‘é€‰å¥½çš„ç¤¼ç‰©ã€‚è¿™å°±æ„å‘³ç€ï¼Œä»–åªèƒ½é€šè¿‡è¿™äº›<br>è´­ç‰©åˆ¸ç»“è´¦ï¼Œè€Œä¸”è¿™å¼ è´­ç‰©åˆ¸æ‰€è´­ä¹°çš„ç‰©å“çš„æ€»ä»·æ ¼ï¼Œå¿…é¡»ç²¾ç¡®çš„ç­‰äºè¿™å¼ è´­ç‰©åˆ¸çš„é¢é¢ã€‚<br>æ€ä¹ˆæ ·æ‰èƒ½é¡ºåˆ©çš„ä¹°å›è¿™N ä»¶ç¤¼ç‰©ä¸­çš„éƒ¨åˆ†æˆ–å…¨éƒ¨é€ç»™å°M å‘¢ï¼Ÿ<br>ä½ çš„ä»»åŠ¡å°±æ˜¯å¸®åŠ©å°W ç¡®å®šæ˜¯å¦å­˜åœ¨ä¸€ä¸ªè´­ä¹°æ–¹æ¡ˆã€‚å°W ä¼šå‘Šè¯‰ä½ æ¯å¼ è´­ç‰©åˆ¸çš„é¢é¢ä»¥<br>åŠæ‰€æœ‰å•†å“çš„ä»·æ ¼ï¼Œå¯¹æ¯å¼ è´­ç‰©åˆ¸ï¼Œä½ åªéœ€è¦ç¡®å®šèƒ½å¦æ‰¾åˆ°ä¸€ç§é€‰ç¤¼ç‰©æ–¹æ¡ˆï¼Œä½¿å¾—é€‰å‡ºæ¥çš„<br>ç¤¼ç‰©çš„ä»·æ ¼æ€»å’Œæ­£å¥½æ˜¯è¿™å¼ è´­ç‰©åˆ¸çš„é¢é¢å³å¯ã€‚</p>
<h2 id="æ ¼å¼"><a href="#æ ¼å¼" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼"><a href="#è¾“å…¥æ ¼å¼" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>è¾“å…¥æ–‡ä»¶bday.in ä¸­æœ‰å¤šç»„æ•°æ®ï¼Œæ¯ç»„æ•°æ®çš„ç¬¬ä¸€è¡Œä¸ºä¸¤ä¸ªæ•´æ•°N å’ŒMï¼Œåˆ†åˆ«è¡¨ç¤ºå°W<br>ä¸€å…±æŒ‘é€‰äº†N ä»¶ç¤¼ç‰©ä»¥åŠå°W çš„ä¸€å¼ è´­ç‰©åˆ¸çš„é¢é¢ä¸ºMã€‚æ¥ä¸‹æ¥ä¸€è¡Œæœ‰N ä¸ªç”¨ç©ºæ ¼éš”å¼€çš„æ­£<br>æ•´æ•°ï¼Œç¬¬I ä¸ªæ•°è¡¨ç¤ºç¬¬I ä¸ªç¤¼ç‰©çš„ä»·æ ¼ã€‚<br>è¾“å…¥æ•°æ®ä»¥0 0 ç»“æŸã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼"><a href="#è¾“å‡ºæ ¼å¼" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>è¾“å‡ºæ–‡ä»¶bday.out åŒ…å«è‹¥å¹²è¡Œï¼Œæ¯è¡Œä¸€ä¸ªå•è¯â€œYESâ€æˆ–è€…â€œNOâ€ï¼Œåˆ†åˆ«ä»£è¡¨å­˜åœ¨ä¸€ä¸ª<br>è´­ä¹°æ–¹æ¡ˆå’Œä¸å­˜åœ¨ä¸€ä¸ªè´­ä¹°æ–¹æ¡ˆã€‚</p>
<a id="more"></a>
<h2 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥"><a href="#æ ·ä¾‹è¾“å…¥" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>10 2000<br>1000 100 200 300 400 500 700 600 900 800<br>10 2290<br>1000 100 200 300 400 500 700 600 900 800<br>0 0</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º"><a href="#æ ·ä¾‹è¾“å‡º" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>YES<br>NO</p>
</blockquote>
<h2 id="æç¤º"><a href="#æç¤º" class="headerlink" title="æç¤º"></a>æç¤º</h2><p>å¯¹äº30%çš„è¾“å…¥æ–‡ä»¶ï¼Œæ‰€æœ‰çš„Nâ‰¤20ã€‚<br>å¯¹äº100%çš„è¾“å…¥æ–‡ä»¶ï¼Œæ‰€æœ‰çš„Nâ‰¤40ï¼Œå¹¶ä¸”M å’Œç‰©å“çš„æ€»ä»·å€¼ä¸è¶…è¿‡2^31-1ï¼Œæµ‹è¯•ç»„<br>æ•°ä¸è¶…è¿‡10 ç»„ï¼Œä¸å°‘äº5 ç»„ã€‚</p>
<h2 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>må¾ˆå¤§ï¼ŒèƒŒåŒ…æ˜¾ç„¶ä¸è¡Œï¼Œè€ƒè™‘åˆ°nå¾ˆå°ï¼Œ<strong>æŠ˜åŠæšä¸¾</strong>ã€‚<br>è®°k=n div 2<br>æšä¸¾1..kçš„æ‰€æœ‰ç»„åˆå­˜å…¥<strong>hashè¡¨</strong><br>æšä¸¾k+1..nçš„æ‰€æœ‰ç»„åˆï¼Œå¯¹äºæ¯ä¸€ä¸ªç»„åˆwæŸ¥è¯¢hashè¡¨ä¸­m-wçš„å€¼æ˜¯å¦å­˜åœ¨ã€‚<br>hashä¸è¦å¼€å¤ªå¤§ï¼Œå°å¿ƒMLEï¼Œå¯ä»¥ç”¨æ‹‰é“¾+æ•°ç»„æ¨¡æ‹ŸæŒ‡é’ˆæ¥å®ç°ã€‚<br>å½“ç„¶ä¹Ÿå¯ä»¥ä¸ç”¨hashï¼Œå‰ä¸€åŠå­˜å…¥æ•°ç»„ï¼Œæ’åºï¼Œåœ¨æšä¸¾åä¸€åŠæ—¶<strong>äºŒåˆ†æŸ¥æ‰¾</strong></p>
<p>è‡ªå·±çš„é”™è¯¯ç‚¹</p>
<ol>
<li>æ‰€æœ‰ç‰©å“éƒ½æšä¸¾å®Œåï¼ˆx=k+1/x=n+1ï¼‰æ‰èƒ½æ’å…¥/æŸ¥è¯¢hashã€‚</li>
<li>ä¹ æƒ¯ç”¨h[0]ä¿å­˜è¡¨çš„å¤§å°ï¼Œä½†hashå€¼=k mod szæ˜¯æœ‰å¯èƒ½ä¸º0çš„ï¼Œæ‰€ä»¥ä¸è¡Œã€‚</li>
</ol>
<dir style="text-align:right"><a href="/2016/08/22/JSOI2016-æé«˜1ç­-Day6/bday.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>bday.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> </div><div class="line">    maxn=<span class="number">1024</span>*<span class="number">1024</span>+<span class="number">10</span>;</div><div class="line">    sz=<span class="number">500009</span>;</div><div class="line"><span class="keyword">type</span> </div><div class="line">    int=longint;</div><div class="line">    node=<span class="keyword">record</span> i,next:int <span class="keyword">end</span>;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    h:<span class="keyword">array</span>[<span class="number">0</span>..sz] <span class="keyword">of</span> int;</div><div class="line">    t:<span class="keyword">array</span>[<span class="number">0</span>..maxn] <span class="keyword">of</span> node;</div><div class="line">    a:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">41</span>] <span class="keyword">of</span> int;</div><div class="line">    n,m,hsz,i,k:int;flag:boolean;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">hash</span><span class="params">(k:int)</span>:</span>int;</div><div class="line"><span class="keyword">begin</span> hash:=k <span class="keyword">mod</span> sz <span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">insert</span><span class="params">(k:int)</span>;</span></div><div class="line"><span class="keyword">var</span> j:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    inc(hsz);</div><div class="line">    j:=hash(k);</div><div class="line">    t[hsz].next:=h[j];t[hsz].i:=k;</div><div class="line">    h[j]:=hsz;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">query</span><span class="params">(k:int)</span>:</span>boolean;</div><div class="line"><span class="keyword">var</span> i:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">if</span> k&lt;<span class="number">0</span> <span class="keyword">then</span> <span class="keyword">exit</span>(false);</div><div class="line">    i:=h[hash(k)];</div><div class="line">    <span class="keyword">while</span> i&lt;&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">if</span> t[i].i=k <span class="keyword">then</span> <span class="keyword">exit</span>(true);</div><div class="line">        i:=t[i].next;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    query:=false;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">dfs</span><span class="params">(x,w,s:int)</span>;</span></div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">if</span> flag <span class="keyword">then</span> <span class="keyword">exit</span>;</div><div class="line">    <span class="keyword">if</span> (s=<span class="number">0</span>) <span class="keyword">and</span> (x=k+<span class="number">1</span>) <span class="keyword">then</span> <span class="keyword">begin</span> insert(w);<span class="keyword">exit</span> <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">if</span> (s=<span class="number">1</span>) <span class="keyword">and</span> (x=n+<span class="number">1</span>) <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">if</span> query(m-w) <span class="keyword">then</span> flag:=true;</div><div class="line">        <span class="keyword">exit</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    dfs(x+<span class="number">1</span>,w+a[x],s);</div><div class="line">    dfs(x+<span class="number">1</span>,w,s);</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'bday.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'bday.out'</span>);rewrite(output);</div><div class="line">    <span class="keyword">read</span>(n,m);</div><div class="line">    <span class="keyword">while</span> (n&lt;&gt;<span class="number">0</span>) <span class="keyword">and</span> (m&lt;&gt;<span class="number">0</span>) <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        k:=n <span class="keyword">div</span> <span class="number">2</span>;</div><div class="line">        <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">read</span>(a[i]);</div><div class="line">        fillchar(h,sizeof(h),<span class="number">0</span>);hsz:=<span class="number">0</span>;</div><div class="line">        flag:=false;</div><div class="line">        dfs(<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>);dfs(k+<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>);</div><div class="line">        <span class="keyword">if</span> flag <span class="keyword">then</span> writeln(<span class="string">'YES'</span>) <span class="keyword">else</span> writeln(<span class="string">'NO'</span>);</div><div class="line">        <span class="keyword">read</span>(n,m);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P2-å°W-ç†ç¬”è®°"><a href="#P2-å°W-ç†ç¬”è®°" class="headerlink" title="P2 å°W ç†ç¬”è®°"></a>P2 å°W ç†ç¬”è®°</h1><p>å°W ç”±äºè´­ç‰©æµªè´¹äº†å¤ªå¤šæ—¶é—´ï¼Œå¯¼è‡´ä»–å¤–è¯­è¯¾éƒ½æ²¡æœ‰å¥½å¥½å¬ã€‚ä¸ºä»€ä¹ˆæ˜¯å¤–è¯­è¯¾ï¼Ÿä¸æ˜¯è‹±<br>è¯­è¯¾ï¼Ÿå› ä¸ºå°W è‚¯å®šä¼šå¥½å¥½å¬è‹±è¯­è¯¾ã€‚ç”±äºæ²¡æœ‰å¥½å¥½å¬è¯¾ï¼Œ å°W çš„ç¬”è®°å…¨éƒ½è®°çš„æ‚ä¹±æ— ç« ï¼Œ<br>å‡ºç°äº†å¥½å¤šé”™è¯¯çš„åœ°æ–¹ã€‚ å°W çš„ç¬”è®°æ˜¯å¦‚æ­¤çš„ç³Ÿç³•ï¼Œä»¥è‡³äºä»–åªè®°äº†ä¸€å¥ä¾‹å¥ï¼Œè€Œä¸”è‡ªå·±<br>è¿˜ä¸çŸ¥é“æ˜¯ä»€ä¹ˆæ„æ€â€¦â€¦ç„¶ååœ¨è€å¸ˆè®²è¯­æ³•çš„æ—¶å€™ï¼Œ å°W åˆé›¶æ˜Ÿçš„è®°äº†å‡ ä¸ªå­—æ¯å¯¹ï¼Œè€å¸ˆ<br>è¯´ï¼šè¿™å‡ ä¸ªå­—æ¯å¯¹æ˜¯ç»å¯¹ä¸èƒ½ç›¸é‚»çš„ï¼Œè€Œä¸”ç›¸é‚»æ˜¯ä¸å…³å¿ƒå­—æ¯çš„é¡ºåºçš„ï¼Œæ¯”å¦‚è€å¸ˆè¯´ï¼Œâ€˜abâ€™<br>ä¸èƒ½ç›¸é‚»ï¼Œé‚£ä¹ˆç›¸åŒçš„ï¼Œâ€˜baâ€™ä¹Ÿä¸èƒ½ç›¸é‚»ã€‚<br>ç°åœ¨å°W åˆ°å®¶äº†ï¼Œæ‰“å¼€äº†ä¸Šè¯¾çš„ç¬”è®°ï¼Œç„¶åä»–å‘ç°ç¬”è®°æœ‰å¾ˆå¤šè‡ªç›¸çŸ›ç›¾çš„åœ°æ–¹ï¼šä¸ºä»€<br>ä¹ˆä¸‹é¢çš„ä¸èƒ½ç›¸é‚»çš„å­—æ¯å¯¹ä¼šå‡ºç°åœ¨ä¸Šé¢çš„ä¾‹å¥é‡Œé¢å‘¢ï¼Ÿçº ç»“å†ä¸‰ï¼Œ å°W è§‰å¾—ä¸‹é¢çš„ä¸œè¥¿<br>ç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œæ‰€ä»¥è®°é”™çš„æ¦‚ç‡æ¯”è¾ƒå°â€¦â€¦ä»–å†³å®šåœ¨ä¸Šé¢çš„ä¾‹å¥é‡Œé¢æ“¦æ‰å‡ ä¸ªå­—æ¯ï¼Œä½¿å¾—å¥<br>å­å˜å¾—åˆæ³•ã€‚<br>ä½†æ˜¯å°W è¿˜è¦æŠŠç¤¼ç‰©é€ç»™å°Mï¼Œæ¥ä¸åŠæ•´ç†ç¬”è®°äº†ï¼Œå°±æŠŠè¿™ä¸ªè‰°å·¨çš„ä»»åŠ¡ç•™ç»™äº†å¤§å®¶ï¼Œ<br>è¯·é—®å¤§å®¶ï¼Œ å°W æœ€å°‘è¦æ“¦æ‰å‡ ä¸ªå­—æ¯ï¼Œæ‰èƒ½ä½¿å¾—ä¸Šé¢çš„ä¾‹å¥åˆæ³•ï¼Ÿ</p>
<h2 id="æ ¼å¼-1"><a href="#æ ¼å¼-1" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-1"><a href="#è¾“å…¥æ ¼å¼-1" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬ä¸€è¡Œï¼šä¸€ä¸ªæ•´æ•° Nã€‚<br>ç¬¬äºŒè¡Œï¼šä¸€ä¸ªé•¿åº¦ä¸º N çš„å­—ç¬¦ä¸²ï¼ŒåªåŒ…å«å°å†™å­—æ¯ï¼Œä»£è¡¨å°W è®°ä¸‹çš„ä¾‹å¥ã€‚<br>ç¬¬ä¸‰è¡Œï¼šä¸€ä¸ªæ•´æ•° Mï¼Œä»£è¡¨ä¸èƒ½ç›¸é‚»çš„å­—æ¯å¯¹çš„ä¸ªæ•°ã€‚<br>æ¥ä¸‹æ¥ M è¡Œï¼šæ¯è¡Œä¸¤ä¸ªå°å†™å­—æ¯ï¼Œä»£è¡¨ä¸èƒ½ç›¸é‚»çš„å­—æ¯å¯¹ï¼Œå› ä¸ºå°W å¤ªä¸è®¤çœŸäº†ï¼Œæ‰€ä»¥å¯<br>èƒ½æœ‰é‡å¤ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼-1"><a href="#è¾“å‡ºæ ¼å¼-1" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>ä¸€è¡Œä¸€ä¸ªæ•´æ•°ï¼šæœ€å°‘è¦æ“¦é™¤çš„å­—æ¯æ•°ã€‚</p>
<h2 id="æ ·ä¾‹-1"><a href="#æ ·ä¾‹-1" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-1"><a href="#æ ·ä¾‹è¾“å…¥-1" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>4<br>jsoi<br>2<br>oi<br>mo</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-1"><a href="#æ ·ä¾‹è¾“å‡º-1" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>1</p>
</blockquote>
<h2 id="æç¤º-1"><a href="#æç¤º-1" class="headerlink" title="æç¤º"></a>æç¤º</h2><p>å¯¹äº10%çš„æ•°æ®ï¼ŒM=0<br>å¯¹äºå¦å¤–30%çš„æ•°æ®ï¼ŒNâ‰¤1000<br>å¯¹äº100%çš„æ•°æ®ï¼ŒNâ‰¤100000ï¼ŒMâ‰¤400</p>
<h2 id="é¢˜è§£-1"><a href="#é¢˜è§£-1" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>å¼€å§‹ä»¥ä¸ºæ˜¯ä»€ä¹ˆé«˜æ·±çš„å›¾è®ºé¢˜ï¼Œç»“æœæ˜¯DPå›§ã€‚<br>é¦–å…ˆå¾ˆå®¹æ˜“æƒ³åˆ°çº¿æ€§DPï¼šf[i]ä¸º1..iä¸ªå­—ç¬¦ï¼Œä»¥s[i]ç»“å°¾ï¼Œå½¢æˆåˆæ³•å­—ä¸²çš„æœ€å°‘æ“¦å»æ•°ã€‚<br>$f[i]=f[j]+i-j$ï¼ˆs[i]ä¸s[j]ä¸æ’æ–¥ï¼‰<br>ä½†$O(N^2)$æ˜¯ä¼šTLEçš„<br>ç„¶åè€ƒè™‘åˆ°å­—æ¯æ€»å…±åªæœ‰26ä¸ªï¼Œäºæ˜¯æœ‰å¦ä¸€ç§DPæ³•ï¼šè®°f[i,c]æ˜¯1..iä¸ªå­—ç¬¦ä¸­ï¼Œä»¥å­—æ¯cç»“å°¾ï¼Œå½¢æˆåˆæ³•ä¸²çš„æœ€å°æ“¦å»æ•°ã€‚<br>ç„¶åæ ¹æ®æ’æ–¥å…³ç³»f[i]å¯ä»¥é€šè¿‡f[i-1]è½¬ç§»å¾—åˆ°ã€‚<br>è¿˜è¦æ³¨æ„ä¸€ä¸‹åˆå§‹åŒ–ã€‚</p>
<dir style="text-align:right"><a href="/2016/08/22/JSOI2016-æé«˜1ç­-Day6/note.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>note.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">const</span> inf=<span class="number">100000000</span>;</div><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    n,m,i,ans:int;s:ansistring;c1,c2:char;</div><div class="line">    f:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">100010</span>,<span class="string">'a'</span>..<span class="string">'z'</span>] <span class="keyword">of</span> int;</div><div class="line">    g:<span class="keyword">array</span>[<span class="string">'a'</span>..<span class="string">'z'</span>,<span class="string">'a'</span>..<span class="string">'z'</span>] <span class="keyword">of</span> boolean;</div><div class="line">    </div><div class="line">    </div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'note.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'note.out'</span>);rewrite(output);</div><div class="line">    filldword(f,sizeof(f) <span class="keyword">div</span> <span class="number">4</span>,inf);</div><div class="line">    fillchar(g,sizeof(g),true);</div><div class="line">    readln(n);readln(s);readln(m);</div><div class="line">    <span class="keyword">if</span> m=<span class="number">0</span> <span class="keyword">then</span> <span class="keyword">begin</span> <span class="keyword">write</span>(<span class="number">0</span>);halt <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        readln(c1,c2);</div><div class="line">        g[c1,c2]:=false;g[c2,c1]:=false;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    </div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> f[i,s[i]]:=i-<span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">2</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">        <span class="keyword">for</span> c1:=<span class="string">'a'</span> <span class="keyword">to</span> <span class="string">'z'</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            <span class="keyword">if</span> s[i]=c1 <span class="keyword">then</span></div><div class="line">                <span class="keyword">for</span> c2:=<span class="string">'a'</span> <span class="keyword">to</span> <span class="string">'z'</span> <span class="keyword">do</span></div><div class="line">                    <span class="keyword">if</span> g[c1,c2] <span class="keyword">then</span></div><div class="line">                        f[i,c1]:=min(f[i,c1],f[i-<span class="number">1</span>,c2]);</div><div class="line">            f[i,c1]:=min(f[i,c1],f[i-<span class="number">1</span>,c1]+<span class="number">1</span>);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    ans:=n;</div><div class="line">    <span class="keyword">for</span> c1:=<span class="string">'a'</span> <span class="keyword">to</span> <span class="string">'z'</span> <span class="keyword">do</span></div><div class="line">        ans:=min(ans,f[n,c1]);</div><div class="line">    <span class="keyword">write</span>(ans);</div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P3-å°W-å¼€å…³ç¯"><a href="#P3-å°W-å¼€å…³ç¯" class="headerlink" title="P3 å°W å¼€å…³ç¯"></a>P3 å°W å¼€å…³ç¯</h1><p>æ™šä¸Šåˆ°å®¶å°W é€šè¿‡å¼€å…³ç¯æ¥ä¿æŒè‡ªå·±ç¥ç»çš„å…´å¥‹ä»¥ä¾¿æ¸…é†’åœ°ç†ç¬”è®°ã€‚<br>N(2â‰¤Nâ‰¤100,000)ç›ç¯è¢«è¿ç»­çš„ç¼–å·ä¸º1..Nã€‚åˆšå›åˆ°å®¶çš„æ—¶å€™,æ‰€æœ‰çš„ç¯éƒ½æ˜¯å…³é—­çš„ã€‚<br>å°W é€šè¿‡N ä¸ªæŒ‰é’®æ¥æ§åˆ¶ç¯çš„å¼€å…³ï¼Œ æŒ‰ç¬¬i ä¸ªæŒ‰é’®å¯ä»¥æ”¹å˜ç¬¬ i ç›ç¯çš„çŠ¶æ€ã€‚<br>å°W å‘å‡º M (1â‰¤Mâ‰¤100,000)æ¡æŒ‡ä»¤,æ¯ä¸ªæŒ‡ä»¤éƒ½æ˜¯ä¸¤ä¸ªæ•´æ•°ä¸­çš„ä¸€ä¸ª(0 æˆ–1)ã€‚<br>ç¬¬ 1 ç§æŒ‡ä»¤(ç”¨ 0 è¡¨ç¤º)åŒ…å«ä¸¤ä¸ªæ•°å­—Si å’ŒEi(1â‰¤Siâ‰¤Eiâ‰¤N)ï¼Œå®ƒä»¬è¡¨ç¤ºèµ·å§‹å¼€<br>å…³å’Œç»ˆæ­¢å¼€å…³ã€‚å°W éœ€è¦æŠŠä» Si åˆ° Ei ä¹‹é—´çš„æŒ‰é’®éƒ½æŒ‰ä¸€æ¬¡,å°±å¯ä»¥å®Œæˆè¿™ä¸ªæŒ‡ä»¤ã€‚<br>ç¬¬2 ç§æŒ‡ä»¤(ç”¨ 1 è¡¨ç¤º)åŒæ ·åŒ…å«ä¸¤ä¸ªæ•°å­—Si å’ŒEi(1â‰¤Siâ‰¤Eiâ‰¤N),ä¸è¿‡è¿™ç§æŒ‡ä»¤<br>æ˜¯è¯¢é—®ä»Si åˆ°Ei ä¹‹é—´çš„ç¯æœ‰å¤šå°‘æ˜¯äº®ç€çš„ã€‚<br>è¯·ä½ å¸®åŠ©å°W å¾—åˆ°æ­£ç¡®çš„ç­”æ¡ˆã€‚</p>
<h2 id="æ ¼å¼-2"><a href="#æ ¼å¼-2" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-2"><a href="#è¾“å…¥æ ¼å¼-2" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬ 1 è¡Œ: ç”¨ç©ºæ ¼éš”å¼€çš„ä¸¤ä¸ªæ•´æ•° N å’Œ Mã€‚<br>ç¬¬ 2..M+1 è¡Œ: æ¯è¡Œè¡¨ç¤ºä¸€ä¸ªæ“ä½œ, æœ‰ä¸‰ä¸ªç”¨ç©ºæ ¼åˆ†å¼€çš„æ•´æ•°: æŒ‡ä»¤å·, Si å’Œ Eiã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼-2"><a href="#è¾“å‡ºæ ¼å¼-2" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>å¯¹äºæ¯ä¸€æ¬¡è¯¢é—®, è¾“å‡ºä¸€è¡Œè¡¨ç¤ºè¯¢é—®çš„ç»“æœã€‚</p>
<h2 id="æ ·ä¾‹-2"><a href="#æ ·ä¾‹-2" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-2"><a href="#æ ·ä¾‹è¾“å…¥-2" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>4 5<br>0 1 2<br>0 2 4<br>1 2 3<br>0 2 4<br>1 1 4</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-2"><a href="#æ ·ä¾‹è¾“å‡º-2" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>1<br>2</p>
</blockquote>
<h2 id="æç¤º-2"><a href="#æç¤º-2" class="headerlink" title="æç¤º"></a>æç¤º</h2><p><strong>ã€æ ·ä¾‹è§£é‡Šã€‘</strong><br>ä¸€å…±æœ‰ 4 ç›ç¯ï¼Œ 5 ä¸ªæŒ‡ä»¤ã€‚ ä¸‹é¢æ˜¯æ‰§è¡Œçš„æƒ…å†µ:<br>1 2 3 4<br>Init: O O O O O = å…³ + = å¼€<br>0 1 2 -&gt; + + O O æ”¹å˜ç¯ 1 å’Œ 2 çš„çŠ¶æ€<br>0 2 4 -&gt; + O + +<br>1 2 3 -&gt; 1 è¾“å‡ºåœ¨ 2..3 çš„èŒƒå›´å†…æœ‰å¤šå°‘ç¯æ˜¯äº®çš„<br>0 2 4 -&gt; + + O O æ”¹å˜ç¯ 2 ,3 å’Œ 4 çš„çŠ¶æ€<br>1 1 4 -&gt; 2 è¾“å‡ºåœ¨ 1..4 çš„èŒƒå›´å†…æœ‰å¤šå°‘ç¯æ˜¯äº®çš„<br><strong>ã€æ•°æ®è§„æ¨¡ã€‘</strong><br>å¯¹äº 20%çš„æ•°æ®: 1â‰¤N,Mâ‰¤100<br>å¯¹äº 40%çš„æ•°æ®: 1â‰¤N,Mâ‰¤10000<br>å¯¹äºå¦å¤–30%çš„æ•°æ®: åªæœ‰æœ€åä¸€ç»„æ˜¯1 æŒ‡ä»¤ï¼Œå‰M-1 ç»„ä¸º0 æŒ‡ä»¤<br>å¯¹äº100%çš„æ•°æ®ï¼š 1â‰¤N,Mâ‰¤100000</p>
<h2 id="é¢˜è§£-2"><a href="#é¢˜è§£-2" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>è¿™æ˜¯é“å¾ˆæ°´çš„çº¿æ®µæ ‘æ“ä½œã€‚</p>
<dir style="text-align:right"><a href="/2016/08/22/JSOI2016-æé«˜1ç­-Day6/lites.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>lites.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    sgt,tag:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">400010</span>] <span class="keyword">of</span> int;</div><div class="line">    n,m,i,j,x,y:int;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">putdown</span><span class="params">(i,b,e:int)</span>;</span></div><div class="line"><span class="keyword">var</span> mid:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">if</span> b&lt;e <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">        mid:=(b+e) <span class="keyword">shr</span> <span class="number">1</span>;</div><div class="line">        tag[i*<span class="number">2</span>]:=<span class="number">1</span>-tag[i*<span class="number">2</span>];sgt[i*<span class="number">2</span>]:=mid-b+<span class="number">1</span>-sgt[i*<span class="number">2</span>];</div><div class="line">        tag[i*<span class="number">2</span>+<span class="number">1</span>]:=<span class="number">1</span>-tag[i*<span class="number">2</span>+<span class="number">1</span>];sgt[i*<span class="number">2</span>+<span class="number">1</span>]:=e-mid-sgt[i*<span class="number">2</span>+<span class="number">1</span>];</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    tag[i]:=<span class="number">0</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">query</span><span class="params">(i,b,e,l,r:int)</span>:</span>int;</div><div class="line"><span class="keyword">var</span> mid:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">if</span> (r&lt;b) <span class="keyword">or</span> (l&gt;e) <span class="keyword">then</span> <span class="keyword">exit</span>(<span class="number">0</span>);</div><div class="line">    <span class="keyword">if</span> (l&lt;=b) <span class="keyword">and</span> (e&lt;=r) <span class="keyword">then</span> <span class="keyword">exit</span>(sgt[i]);</div><div class="line">    mid:=(b+e) <span class="keyword">shr</span> <span class="number">1</span>;</div><div class="line">    <span class="keyword">if</span> tag[i]=<span class="number">1</span> <span class="keyword">then</span> putdown(i,b,e);</div><div class="line">    query:=query(i*<span class="number">2</span>,b,mid,l,r)+query(i*<span class="number">2</span>+<span class="number">1</span>,mid+<span class="number">1</span>,e,l,r);</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">insert</span><span class="params">(i,b,e,l,r:int)</span>;</span></div><div class="line"><span class="keyword">var</span> mid:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">if</span> (r&lt;b) <span class="keyword">or</span> (l&gt;e) <span class="keyword">then</span> <span class="keyword">exit</span>;</div><div class="line">    <span class="keyword">if</span> (l&lt;=b) <span class="keyword">and</span> (e&lt;=r) <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">        sgt[i]:=e-b+<span class="number">1</span>-sgt[i];</div><div class="line">        tag[i]:=<span class="number">1</span>-tag[i];</div><div class="line">        <span class="keyword">exit</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    mid:=(b+e) <span class="keyword">shr</span> <span class="number">1</span>;</div><div class="line">    <span class="keyword">if</span> tag[i]=<span class="number">1</span> <span class="keyword">then</span> putdown(i,b,e);</div><div class="line">    insert(i*<span class="number">2</span>,b,mid,l,r);insert(i*<span class="number">2</span>+<span class="number">1</span>,mid+<span class="number">1</span>,e,l,r);</div><div class="line">    sgt[i]:=sgt[i*<span class="number">2</span>]+sgt[i*<span class="number">2</span>+<span class="number">1</span>];</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'lites.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'lites.out'</span>);rewrite(output);</div><div class="line">    <span class="keyword">read</span>(n,m);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(j,x,y);</div><div class="line">        <span class="keyword">if</span> j=<span class="number">0</span> <span class="keyword">then</span> insert(<span class="number">1</span>,<span class="number">1</span>,n,x,y)</div><div class="line">        <span class="keyword">else</span> writeln(query(<span class="number">1</span>,<span class="number">1</span>,n,x,y));</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:center&quot;&gt;é¢˜ç›®åç§°&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;å°Wä¹°ç¤¼ç‰©&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;å°Wç†ç¬”è®°&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;å°Wå¼€å…³ç¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;å­˜ç›˜æ–‡ä»¶å&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;bday&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;note&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;lites&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;è¾“å…¥æ–‡ä»¶å&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;bday.in&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;note.in&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;lites.in&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;è¾“å‡ºæ–‡ä»¶å&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;bday.out&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;note.out&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;lites.out&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;æ—¶é™&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;3s&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;1s&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;1s&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;å†…å­˜é™åˆ¶&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;64MB&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;256MB&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;256MB&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h1 id=&quot;P1-å°Wä¹°ç¤¼ç‰©&quot;&gt;&lt;a href=&quot;#P1-å°Wä¹°ç¤¼ç‰©&quot; class=&quot;headerlink&quot; title=&quot;P1 å°Wä¹°ç¤¼ç‰©&quot;&gt;&lt;/a&gt;P1 å°Wä¹°ç¤¼ç‰©&lt;/h1&gt;&lt;p&gt;å°W ä»Šå¤©å¾ˆé«˜å…´ï¼Œå› ä¸ºå•†åº—ç»™OIer ä»¬å‘è´­ç‰©åˆ¸äº†ã€‚å°W å¾—åˆ°äº†ä¸€äº›ä»·å€¼ä¸è²çš„SHOP&lt;br&gt;è´­ç‰©åˆ¸ï¼Œæ‰€ä»¥ä»–å†³å®šä¹°N ä»¶ç¤¼ç‰©é€ç»™å°Mã€‚&lt;br&gt;å½“å°W é€‰å¥½äº†N ä»¶ç¤¼ç‰©ï¼Œé«˜å…´åœ°å»ç»“è´¦æ—¶ï¼Œä»–çªç„¶å‘ç°SHOP å¯¹è´­ç‰©åˆ¸çš„ä½¿ç”¨æœ‰éå¸¸å¥¸&lt;br&gt;å•†ï¼ˆå¤©ä¸‹å“ªæœ‰å…è´¹çš„è´­ç‰©åˆ¸ï¼Ÿï¼‰çš„è§„å®šï¼šä¸€æ¬¡åªå…è®¸ä½¿ç”¨ä¸€å¼ ã€ä¸æ‰¾é›¶ã€ä¸ä¸ç°é‡‘æ··ç”¨ã€‚å°&lt;br&gt;W èº«ä¸Šæ ¹æœ¬æ²¡æœ‰ç°é‡‘ï¼Œå¹¶ä¸”ä»–ä¸æ„¿æ„å…¨éƒ¨æ”¾å¼ƒæŒ‘é€‰å¥½çš„ç¤¼ç‰©ã€‚è¿™å°±æ„å‘³ç€ï¼Œä»–åªèƒ½é€šè¿‡è¿™äº›&lt;br&gt;è´­ç‰©åˆ¸ç»“è´¦ï¼Œè€Œä¸”è¿™å¼ è´­ç‰©åˆ¸æ‰€è´­ä¹°çš„ç‰©å“çš„æ€»ä»·æ ¼ï¼Œå¿…é¡»ç²¾ç¡®çš„ç­‰äºè¿™å¼ è´­ç‰©åˆ¸çš„é¢é¢ã€‚&lt;br&gt;æ€ä¹ˆæ ·æ‰èƒ½é¡ºåˆ©çš„ä¹°å›è¿™N ä»¶ç¤¼ç‰©ä¸­çš„éƒ¨åˆ†æˆ–å…¨éƒ¨é€ç»™å°M å‘¢ï¼Ÿ&lt;br&gt;ä½ çš„ä»»åŠ¡å°±æ˜¯å¸®åŠ©å°W ç¡®å®šæ˜¯å¦å­˜åœ¨ä¸€ä¸ªè´­ä¹°æ–¹æ¡ˆã€‚å°W ä¼šå‘Šè¯‰ä½ æ¯å¼ è´­ç‰©åˆ¸çš„é¢é¢ä»¥&lt;br&gt;åŠæ‰€æœ‰å•†å“çš„ä»·æ ¼ï¼Œå¯¹æ¯å¼ è´­ç‰©åˆ¸ï¼Œä½ åªéœ€è¦ç¡®å®šèƒ½å¦æ‰¾åˆ°ä¸€ç§é€‰ç¤¼ç‰©æ–¹æ¡ˆï¼Œä½¿å¾—é€‰å‡ºæ¥çš„&lt;br&gt;ç¤¼ç‰©çš„ä»·æ ¼æ€»å’Œæ­£å¥½æ˜¯è¿™å¼ è´­ç‰©åˆ¸çš„é¢é¢å³å¯ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ ¼å¼&quot;&gt;&lt;a href=&quot;#æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;æ ¼å¼&quot;&gt;&lt;/a&gt;æ ¼å¼&lt;/h2&gt;&lt;h3 id=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å…¥æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å…¥æ ¼å¼&lt;/h3&gt;&lt;p&gt;è¾“å…¥æ–‡ä»¶bday.in ä¸­æœ‰å¤šç»„æ•°æ®ï¼Œæ¯ç»„æ•°æ®çš„ç¬¬ä¸€è¡Œä¸ºä¸¤ä¸ªæ•´æ•°N å’ŒMï¼Œåˆ†åˆ«è¡¨ç¤ºå°W&lt;br&gt;ä¸€å…±æŒ‘é€‰äº†N ä»¶ç¤¼ç‰©ä»¥åŠå°W çš„ä¸€å¼ è´­ç‰©åˆ¸çš„é¢é¢ä¸ºMã€‚æ¥ä¸‹æ¥ä¸€è¡Œæœ‰N ä¸ªç”¨ç©ºæ ¼éš”å¼€çš„æ­£&lt;br&gt;æ•´æ•°ï¼Œç¬¬I ä¸ªæ•°è¡¨ç¤ºç¬¬I ä¸ªç¤¼ç‰©çš„ä»·æ ¼ã€‚&lt;br&gt;è¾“å…¥æ•°æ®ä»¥0 0 ç»“æŸã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å‡ºæ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å‡ºæ ¼å¼&lt;/h2&gt;&lt;p&gt;è¾“å‡ºæ–‡ä»¶bday.out åŒ…å«è‹¥å¹²è¡Œï¼Œæ¯è¡Œä¸€ä¸ªå•è¯â€œYESâ€æˆ–è€…â€œNOâ€ï¼Œåˆ†åˆ«ä»£è¡¨å­˜åœ¨ä¸€ä¸ª&lt;br&gt;è´­ä¹°æ–¹æ¡ˆå’Œä¸å­˜åœ¨ä¸€ä¸ªè´­ä¹°æ–¹æ¡ˆã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Problem Set" scheme="https://cothrax.github.io/categories/Problem-Set/"/>
    
    
      <category term="OI" scheme="https://cothrax.github.io/tags/OI/"/>
    
      <category term="JSOI" scheme="https://cothrax.github.io/tags/JSOI/"/>
    
      <category term="æ•°æ®ç»“æ„" scheme="https://cothrax.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="DP" scheme="https://cothrax.github.io/tags/DP/"/>
    
      <category term="å­—ç¬¦ä¸²" scheme="https://cothrax.github.io/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
    
      <category term="Hash" scheme="https://cothrax.github.io/tags/Hash/"/>
    
      <category term="æšä¸¾" scheme="https://cothrax.github.io/tags/%E6%9E%9A%E4%B8%BE/"/>
    
      <category term="æŠ˜åŠæšä¸¾" scheme="https://cothrax.github.io/tags/%E6%8A%98%E5%8D%8A%E6%9E%9A%E4%B8%BE/"/>
    
      <category term="çº¿æ®µæ ‘" scheme="https://cothrax.github.io/tags/%E7%BA%BF%E6%AE%B5%E6%A0%91/"/>
    
  </entry>
  
  <entry>
    <title>Bashå¯¹æ‹å’Œæ•°æ®ç”Ÿæˆ</title>
    <link href="https://cothrax.github.io/2016/08/21/Bash%E5%AF%B9%E6%8B%8D%E5%92%8C%E6%95%B0%E6%8D%AE%E7%94%9F%E6%88%90/"/>
    <id>https://cothrax.github.io/2016/08/21/Bashå¯¹æ‹å’Œæ•°æ®ç”Ÿæˆ/</id>
    <published>2016-08-21T14:32:04.000Z</published>
    <updated>2016-08-24T02:34:20.362Z</updated>
    
    <content type="html"><![CDATA[<p>NOIP2016åœ¨å³ï¼Œå­¦ä¹ ä¸€ä¸‹Linuxä¸‹å¯¹æ‹è„šæœ¬çš„ç¼–å†™ä»¥åŠæ•°æ®ç”Ÿæˆçš„æŠ€å·§ã€‚</p>
<h2 id="Bashå¯¹æ‹è„šæœ¬"><a href="#Bashå¯¹æ‹è„šæœ¬" class="headerlink" title="Bashå¯¹æ‹è„šæœ¬"></a>Bashå¯¹æ‹è„šæœ¬</h2><p>å…ˆæŠŠdashå…³æ‰é˜²æ­¢è„šæœ¬æŠ¥<code>Syntax error: Bad for loop variable</code>çš„é”™è¯¯<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo dpkg-reconfigure dash</div></pre></td></tr></table></figure></p>
<p>åœ¨å¼¹å‡ºçš„é€‰é¡¹ä¸­é€‰NOå³å¯ã€‚<br>ç„¶åå¯ä»¥å¼€å§‹å†™è„šæœ¬äº†ï¼Œnameæ˜¯ç¨‹åºçš„åå­—xxxï¼Œ<code>xxx_gen</code>æ˜¯æ•°æ®ç”Ÿæˆå™¨ï¼Œ<code>xxx_che</code>æ˜¯æš´åŠ›ç¨‹åºï¼Œå¯¹äºæ¯ä¸€é“é¢˜æ”¹ä¸€ä¸‹nameå˜é‡å€¼å³å¯ã€‚</p>
<dir style="text-align:right"><a href="/2016/08/21/Bashå¯¹æ‹å’Œæ•°æ®ç”Ÿæˆ/check.sh" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight bash"><figcaption><span>check.sh</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line">name=<span class="string">"test"</span>                         <span class="comment">#ç¨‹åºå</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> ((;1;))                         <span class="comment">#æ­»å¾ªç¯</span></div><div class="line"><span class="keyword">do</span></div><div class="line">    ./<span class="variable">$&#123;name&#125;</span>_gen                   <span class="comment">#æ•°æ®ç”Ÿæˆå™¨</span></div><div class="line">    ./<span class="variable">$&#123;name&#125;</span>_che                   <span class="comment">#æš´åŠ›ç¨‹åº</span></div><div class="line">    ./<span class="variable">$&#123;name&#125;</span>                       <span class="comment">#ç¨‹åº</span></div><div class="line">    diff <span class="variable">$&#123;name&#125;</span>.out <span class="variable">$&#123;name&#125;</span>.ans    <span class="comment">#æ¯”è¾ƒ</span></div><div class="line">    <span class="keyword">if</span> [ $? <span class="_">-ne</span> <span class="string">"0"</span> ]; <span class="keyword">then</span>         <span class="comment">#å¦‚æœdiffçš„è¾“å‡º$?å’Œ"0"ä¸ç­‰</span></div><div class="line">        <span class="built_in">echo</span> <span class="string">"fail"</span></div><div class="line">        <span class="built_in">exit</span>                        <span class="comment">#é€€å‡º</span></div><div class="line">    <span class="keyword">else</span></div><div class="line">        <span class="built_in">echo</span> <span class="string">"pass"</span></div><div class="line">    <span class="keyword">fi</span></div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure>
<a id="more"></a>
<p>ç„¶åèµ‹äºˆè„šæœ¬æ‰§è¡Œæƒé™<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chmod +x check.sh</div></pre></td></tr></table></figure></p>
<h3 id="å°æŠ€å·§"><a href="#å°æŠ€å·§" class="headerlink" title="å°æŠ€å·§"></a>å°æŠ€å·§</h3><p>bashä¸‹å¯ä»¥ç”¨timeè¾“å‡ºç¨‹åºè¿è¡Œæ—¶é—´ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ç”¨pascalçš„sysutilsåº“ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">time test.exe</div></pre></td></tr></table></figure></p>
<p>å¦‚æœä½ å†™-vå‚æ•°çš„è¯ï¼Œè¿˜å¯ä»¥è¾“å‡ºæ›´å¤šçš„ä¸œè¥¿ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/usr/bin/time -v test.exe</div></pre></td></tr></table></figure></p>
<p>è¾“å‡ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">Command being timed: &quot;./plutotree0&quot;</div><div class="line">    User time (seconds): 0.33</div><div class="line">    System time (seconds): 0.31</div><div class="line">    Percent of CPU this job got: 99%</div><div class="line">    Elapsed (wall clock) time (h:mm:ss or m:ss): 0:00.64</div><div class="line">    Average shared text size (kbytes): 0</div><div class="line">    Average unshared data size (kbytes): 0</div><div class="line">    Average stack size (kbytes): 0</div><div class="line">    Average total size (kbytes): 0</div><div class="line">    Maximum resident set size (kbytes): 94816</div><div class="line">    Average resident set size (kbytes): 0</div><div class="line">    Major (requiring I/O) page faults: 0</div><div class="line">    Minor (reclaiming a frame) page faults: 6069</div><div class="line">    Voluntary context switches: 1</div><div class="line">    Involuntary context switches: 4</div><div class="line">    Swaps: 0</div><div class="line">    File system inputs: 0</div><div class="line">    File system outputs: 1760</div><div class="line">    Socket messages sent: 0</div><div class="line">    Socket messages received: 0</div><div class="line">    Signals delivered: 0</div><div class="line">    Page size (bytes): 4096</div><div class="line">    Exit status: 0</div></pre></td></tr></table></figure></p>
<h3 id="æœ¬åœ°æ•°æ®check"><a href="#æœ¬åœ°æ•°æ®check" class="headerlink" title="æœ¬åœ°æ•°æ®check"></a>æœ¬åœ°æ•°æ®check</h3><p>å› ä¸ºå¤§å¤šæ•°æ®ç»™çš„checkè„šæœ¬éƒ½æ˜¯batï¼Œè¦æ”¹é€ æˆshï¼Œä»¥transport 50ç»„æ•°æ®ä¸ºä¾‹ã€‚</p>
<dir style="text-align:right"><a href="/2016/08/21/Bashå¯¹æ‹å’Œæ•°æ®ç”Ÿæˆ/check0.sh" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight bash"><figcaption><span>check0.sh</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> ((i=1;i&lt;51;i++))</div><div class="line"><span class="keyword">do</span></div><div class="line">    cp ./transport<span class="variable">$&#123;i&#125;</span>.in ./transport.in</div><div class="line">    ./transport</div><div class="line">    diff -w ./transport.out ./transport<span class="variable">$&#123;i&#125;</span>.out</div><div class="line">    <span class="keyword">if</span> [ $? <span class="_">-ne</span> <span class="string">"0"</span> ];<span class="keyword">then</span></div><div class="line">        <span class="built_in">echo</span> <span class="string">"fail: "</span><span class="variable">$&#123;i&#125;</span></div><div class="line">    <span class="keyword">else</span></div><div class="line">        <span class="built_in">echo</span> <span class="string">"pass: "</span><span class="variable">$&#123;i&#125;</span></div><div class="line">    <span class="keyword">fi</span></div><div class="line">    rm ./transport.in</div><div class="line">    rm ./transport.out</div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure>
<h2 id="æ›´é€šç”¨çš„å¯¹æ‹ç¨‹åº"><a href="#æ›´é€šç”¨çš„å¯¹æ‹ç¨‹åº" class="headerlink" title="æ›´é€šç”¨çš„å¯¹æ‹ç¨‹åº"></a>æ›´é€šç”¨çš„å¯¹æ‹ç¨‹åº</h2><p>ç›´æ¥ç”¨pascalå†™</p>
<dir style="text-align:right"><a href="/2016/08/21/Bashå¯¹æ‹å’Œæ•°æ®ç”Ÿæˆ/compare.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>compare.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> crt,dos;</div><div class="line"><span class="keyword">const</span> name=<span class="string">'test'</span>; <span class="comment">//ç¨‹åºå</span></div><div class="line"><span class="keyword">var</span> a,b:ansistring; </div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">readin</span><span class="params">(f:<span class="keyword">string</span>;<span class="keyword">var</span> a:ansistring)</span>;</span> </div><div class="line"><span class="keyword">begin</span>  </div><div class="line">    assign(input,f);reset(input);  </div><div class="line">    <span class="keyword">read</span>(a);</div><div class="line">    close(input);  </div><div class="line"><span class="keyword">end</span>;  </div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">repeat</span></div><div class="line">        exec(name+<span class="string">'_gen'</span>,<span class="string">''</span>);  </div><div class="line">        exec(name+<span class="string">'_che'</span>,<span class="string">''</span>);  </div><div class="line">        exec(name,<span class="string">''</span>);  </div><div class="line">        readin(name+<span class="string">'.out'</span>,a);  </div><div class="line">        readin(name+<span class="string">'.ans'</span>,b);  </div><div class="line">        writeln(a=b);</div><div class="line">    <span class="keyword">until</span> a&lt;&gt;b;</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h2 id="æ•°æ®ç”Ÿæˆ"><a href="#æ•°æ®ç”Ÿæˆ" class="headerlink" title="æ•°æ®ç”Ÿæˆ"></a>æ•°æ®ç”Ÿæˆ</h2><blockquote>
<p>ç•™å‘å¾…å¡«</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;NOIP2016åœ¨å³ï¼Œå­¦ä¹ ä¸€ä¸‹Linuxä¸‹å¯¹æ‹è„šæœ¬çš„ç¼–å†™ä»¥åŠæ•°æ®ç”Ÿæˆçš„æŠ€å·§ã€‚&lt;/p&gt;
&lt;h2 id=&quot;Bashå¯¹æ‹è„šæœ¬&quot;&gt;&lt;a href=&quot;#Bashå¯¹æ‹è„šæœ¬&quot; class=&quot;headerlink&quot; title=&quot;Bashå¯¹æ‹è„šæœ¬&quot;&gt;&lt;/a&gt;Bashå¯¹æ‹è„šæœ¬&lt;/h2&gt;&lt;p&gt;å…ˆæŠŠdashå…³æ‰é˜²æ­¢è„šæœ¬æŠ¥&lt;code&gt;Syntax error: Bad for loop variable&lt;/code&gt;çš„é”™è¯¯&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;sudo dpkg-reconfigure dash&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å¼¹å‡ºçš„é€‰é¡¹ä¸­é€‰NOå³å¯ã€‚&lt;br&gt;ç„¶åå¯ä»¥å¼€å§‹å†™è„šæœ¬äº†ï¼Œnameæ˜¯ç¨‹åºçš„åå­—xxxï¼Œ&lt;code&gt;xxx_gen&lt;/code&gt;æ˜¯æ•°æ®ç”Ÿæˆå™¨ï¼Œ&lt;code&gt;xxx_che&lt;/code&gt;æ˜¯æš´åŠ›ç¨‹åºï¼Œå¯¹äºæ¯ä¸€é“é¢˜æ”¹ä¸€ä¸‹nameå˜é‡å€¼å³å¯ã€‚&lt;/p&gt;
&lt;dir style=&quot;text-align:right&quot;&gt;&lt;a href=&quot;/2016/08/21/Bashå¯¹æ‹å’Œæ•°æ®ç”Ÿæˆ/check.sh&quot; title=&quot;å¤åˆ¶ä»£ç &quot;&gt;å¤åˆ¶ä»£ç &lt;/a&gt;&lt;/dir&gt;

&lt;figure class=&quot;highlight bash&quot;&gt;&lt;figcaption&gt;&lt;span&gt;check.sh&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;name=&lt;span class=&quot;string&quot;&gt;&quot;test&quot;&lt;/span&gt;                         &lt;span class=&quot;comment&quot;&gt;#ç¨‹åºå&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; ((;1;))                         &lt;span class=&quot;comment&quot;&gt;#æ­»å¾ªç¯&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ./&lt;span class=&quot;variable&quot;&gt;$&amp;#123;name&amp;#125;&lt;/span&gt;_gen                   &lt;span class=&quot;comment&quot;&gt;#æ•°æ®ç”Ÿæˆå™¨&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ./&lt;span class=&quot;variable&quot;&gt;$&amp;#123;name&amp;#125;&lt;/span&gt;_che                   &lt;span class=&quot;comment&quot;&gt;#æš´åŠ›ç¨‹åº&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ./&lt;span class=&quot;variable&quot;&gt;$&amp;#123;name&amp;#125;&lt;/span&gt;                       &lt;span class=&quot;comment&quot;&gt;#ç¨‹åº&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    diff &lt;span class=&quot;variable&quot;&gt;$&amp;#123;name&amp;#125;&lt;/span&gt;.out &lt;span class=&quot;variable&quot;&gt;$&amp;#123;name&amp;#125;&lt;/span&gt;.ans    &lt;span class=&quot;comment&quot;&gt;#æ¯”è¾ƒ&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ $? &lt;span class=&quot;_&quot;&gt;-ne&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;0&quot;&lt;/span&gt; ]; &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;         &lt;span class=&quot;comment&quot;&gt;#å¦‚æœdiffçš„è¾“å‡º$?å’Œ&quot;0&quot;ä¸ç­‰&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;fail&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt;                        &lt;span class=&quot;comment&quot;&gt;#é€€å‡º&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;pass&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Tinkering Note" scheme="https://cothrax.github.io/categories/Tinkering-Note/"/>
    
    
      <category term="OI" scheme="https://cothrax.github.io/tags/OI/"/>
    
      <category term="Bash" scheme="https://cothrax.github.io/tags/Bash/"/>
    
      <category term="Linux" scheme="https://cothrax.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>[JSOI2016] æé«˜1ç­ Day5</title>
    <link href="https://cothrax.github.io/2016/08/21/JSOI2016-%E6%8F%90%E9%AB%981%E7%8F%AD-Day5/"/>
    <id>https://cothrax.github.io/2016/08/21/JSOI2016-æé«˜1ç­-Day5/</id>
    <published>2016-08-21T02:01:49.000Z</published>
    <updated>2016-08-21T02:52:46.421Z</updated>
    
    <content type="html"><![CDATA[<p>ç¬¬1é¢˜ä¸€å¦‚æ—¢å¾€åœ°æ°´ï¼Œç¬¬3é¢˜çš„æ•°æ®BTï¼Œä½†ç”¨dfsæ ˆå¹¶æ²¡æœ‰çˆ†ã€‚</p>
<h1 id="P1-Video"><a href="#P1-Video" class="headerlink" title="P1 Video"></a>P1 Video</h1><p>pluto å–œæ¬¢çœ‹ç‰‡ï¼Œç°åœ¨ä»–çš„ç¡¬ç›˜é‡Œæœ‰n éƒ¨ç‰‡ï¼Œä½†æ˜¯ç”±äºä»–è¿˜è¦æŠŠå¦¹ï¼Œæ‰€ä»¥çœ‹ç‰‡æ—¶é—´æœ‰é™ï¼Œä»–åªèƒ½æŒ‘å‡ºå…¶ä¸­çš„k éƒ¨ç‰‡æ¥çœ‹ï¼Œä»–æƒ³çŸ¥é“æœ‰å¤šå°‘ç§ä¸åŒçš„é€‰ç‰‡æ–¹æ¡ˆã€‚æ–¹æ¡ˆæ•°å¯èƒ½å¾ˆå¤§ï¼Œç­”æ¡ˆmod 1000000007 è¾“å‡ºã€‚</p>
<h2 id="æ ¼å¼"><a href="#æ ¼å¼" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼"><a href="#è¾“å…¥æ ¼å¼" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ä¸€è¡Œä¸¤ä¸ªæ•´æ•°ï¼Œnå’Œm</p>
<h2 id="è¾“å‡ºæ ¼å¼"><a href="#è¾“å‡ºæ ¼å¼" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>ä¸€è¡Œä¸€ä¸ªæ•´æ•°ï¼Œå³æ‰€æ±‚ç­”æ¡ˆ<br><a id="more"></a></p>
<h2 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥"><a href="#æ ·ä¾‹è¾“å…¥" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>6 2</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º"><a href="#æ ·ä¾‹è¾“å‡º" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>15</p>
</blockquote>
<h2 id="æç¤º"><a href="#æç¤º" class="headerlink" title="æç¤º"></a>æç¤º</h2><ul>
<li>å¯¹äº30% çš„æ•°æ®ï¼Œn &lt; 10</li>
<li>å¯¹äº60% çš„æ•°æ®ï¼Œn &lt; 3000</li>
<li>å¯¹äº100% çš„æ•°æ®ï¼Œn &lt; 2x10e5</li>
</ul>
<h2 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>éš¾å¾—ç¢°åˆ°è¿™ä¹ˆæ°´çš„é¢˜ï¼Œæš´åŠ›ç®—ä¸€ä¸‹é˜¶ä¹˜ï¼Œæ‹¿æ‰©å±•æ¬§å‡ é‡Œå¾—æ±‚ä¸€ä¸‹é€†å…ƒå°±å¥½äº†ã€‚</p>
<dir style="text-align:right"><a href="/2016/08/21/JSOI2016-æé«˜1ç­-Day5/video.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>video.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> z=<span class="number">1000000007</span>;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    n,m,a,rev,tmp,ans:int64;</div><div class="line">    i:longint;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">extgcd</span><span class="params">(a,b:int64;<span class="keyword">var</span> x,y:int64)</span>;</span></div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">if</span> b=<span class="number">0</span> <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">        x:=<span class="number">1</span>;y:=<span class="number">0</span>;<span class="keyword">exit</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    extgcd(b,a <span class="keyword">mod</span> b,y,x);</div><div class="line">    dec(y,(a <span class="keyword">div</span> b)*x);</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'video.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'video.out'</span>);rewrite(output);</div><div class="line"></div><div class="line">    <span class="keyword">read</span>(n,m);</div><div class="line">    a:=<span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span> a:=a*i <span class="keyword">mod</span> z;</div><div class="line">    extgcd(a,z,rev,tmp);</div><div class="line">    rev:=(rev+z) <span class="keyword">mod</span> z;</div><div class="line">    ans:=<span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span> i:=n-m+<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> ans:=ans*i <span class="keyword">mod</span> z;</div><div class="line">    <span class="keyword">write</span>(ans*rev <span class="keyword">mod</span> z);</div><div class="line">    </div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P2-Chance"><a href="#P2-Chance" class="headerlink" title="P2 Chance"></a>P2 Chance</h1><p>pluto å»æ‰¾å¦¹å­xxx çº¦ä¼šï¼Œç„¶è€Œxxx è¦æ±‚å’Œpluto ç©ä¸€ä¸ªæ¸¸æˆï¼Œpluto èµ¢äº†æ‰èƒ½è·å¾—å’Œxxxçº¦ä¼šçš„æœºä¼šã€‚æ¸¸æˆå†…å®¹ä¸ºï¼šç°åœ¨æœ‰N ä¸ªè¢‹å­(ä½ å¯ä»¥è®¤ä¸ºå®ƒæ˜¯å“†å•¦A æ¢¦çš„å£è¢‹ï¼Œæ¯ä¸ªè¢‹å­é‡Œæ”¾ç€ä¸€äº›çƒ)ï¼Œæ‰€ä»¥å®¹é‡ååˆ†å¤§ï¼Œç¬¬i ä¸ªè¢‹å­é‡Œæ”¾ç€ç¼–å·ä¸ºLi åˆ°Ri çš„çƒ(é™¤ç¼–å·å¤–å®Œå…¨ç›¸åŒ)ï¼Œpluto éœ€è¦ä»æ¯ä¸ªè¢‹å­é‡Œæ‘¸å‡ºä¸€ä¸ªçƒï¼Œç¬¬i ä¸ªè¢‹å­é‡Œä»»ä½•ä¸€ä¸ªçƒè¢«æ‘¸åˆ°çš„æ¦‚ç‡æ˜¯1/(Ri - Li + 1)ï¼Œå¦‚æœpluto æ‘¸å‡ºçš„çƒä¸­æœ‰K% æˆ–ä»¥ä¸Šçš„çƒçš„ç¼–å·çš„ç¬¬ä¸€ä½æ˜¯1(æ¯”å¦‚11,121,199 çš„ç¬¬ä¸€ä½æ˜¯1, è€Œ21,233 ç¬¬ä¸€ä½å°±ä¸æ˜¯1)ï¼Œé‚£ä¹ˆpluto å°±å°†èµ¢å¾—ä¸xxx çº¦ä¼šçš„æœºä¼šã€‚ç°åœ¨pluto æƒ³çŸ¥é“ä»–èƒ½äººç”Ÿä¸­ç¬¬ä¸€æ¬¡ä¸å¦¹å­çº¦ä¼šçš„æ¦‚ç‡æœ‰å¤šå¤§ã€‚</p>
<h2 id="æ ¼å¼-1"><a href="#æ ¼å¼-1" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-1"><a href="#è¾“å…¥æ ¼å¼-1" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°N,K<br>æ¥ä¸‹æ¥N è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°ï¼ŒLi å’ŒRi</p>
<h2 id="è¾“å‡ºæ ¼å¼-1"><a href="#è¾“å‡ºæ ¼å¼-1" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>ä¸€è¡Œä¸€ä¸ªå®æ•°ï¼ˆä¿ç•™7ä½å°æ•°ï¼‰è¡¨ç¤ºç­”æ¡ˆ<br>ç»å¯¹è¯¯å·®ä¸è¶…è¿‡10e-6 å³è§†ä¸ºæ­£ç¡®<br><!--more--></p>
<h2 id="æ ·ä¾‹-1"><a href="#æ ·ä¾‹-1" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-1"><a href="#æ ·ä¾‹è¾“å…¥-1" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>2 50<br>1 2<br>9 11</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-1"><a href="#æ ·ä¾‹è¾“å‡º-1" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>0.833333333333333</p>
</blockquote>
<h2 id="æç¤º-1"><a href="#æç¤º-1" class="headerlink" title="æç¤º"></a>æç¤º</h2><ul>
<li>å¯¹äº100% çš„æ•°æ®ï¼Œ0 &lt; k &lt; 100ï¼Œ0 &lt; Li &lt; Ri</li>
<li>å¯¹äº30% çš„æ•°æ®ï¼Œn &lt; 10ï¼ŒLi &lt; Ri &lt; 100</li>
<li>å¯¹äº60% çš„æ•°æ®ï¼Œn &lt; 500ï¼ŒLi &lt; Ri &lt; 2000</li>
<li>å¯¹äº100% çš„æ•°æ®ï¼Œn &lt; 2000ï¼ŒLi &lt; Ri &lt; 10e18</li>
</ul>
<h2 id="é¢˜è§£-1"><a href="#é¢˜è§£-1" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>å…ˆä¹±æå°±èƒ½å¤Ÿæ±‚å‡ºç¬¬iä¸ªè¢‹å­ä¸­æ‘¸å‡ºç¬¬ä¸€ä½æ˜¯1çš„çƒçš„æ¦‚ç‡p[i]ï¼ˆç„¶è€Œå› ä¸ºä¹±æWA Næ¬¡ï¼‰<br>ç„¶åDPï¼Œf[i,j]åœ¨å‰iä¸ªè¢‹å­ä¸­æ‘¸å‡ºjä¸ªç¬¦åˆè¦æ±‚çš„çƒçš„æ¦‚ç‡<br><span>$f[i,j]=f[i-1,j-1]*p[i]+f[i-1,j]*(1-p[i])$</span><!-- Has MathJax --><br>æ³¨æ„ï¼š</p>
<ol>
<li>ä¹±æéœ€è°¨æ…</li>
<li>f[0,i]ä¹Ÿè¦ç®—</li>
<li>ç­”æ¡ˆæ˜¯<span>$\sum\{ f[n,j]\ |\ j\geq \left\lceil n*k\% \right\rceil\}$</span><!-- Has MathJax --></li>
</ol>
<dir style="text-align:right"><a href="/2016/08/21/JSOI2016-æé«˜1ç­-Day5/chance.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>chance.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    n,k,i,j:longint;l,r:int64;</div><div class="line">    p:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">2010</span>] <span class="keyword">of</span> double;</div><div class="line">    f:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">2010</span>,-<span class="number">1</span>..<span class="number">2010</span>] <span class="keyword">of</span> double;</div><div class="line">    ans:double;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">cal</span><span class="params">()</span>:</span>double;</div><div class="line"><span class="keyword">var</span> x,y,tot:int64;i:longint;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">read</span>(l,r);</div><div class="line">    x:=<span class="number">1</span>;tot:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> <span class="number">18</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">if</span> x&gt;r <span class="keyword">then</span> break;</div><div class="line">        y:=<span class="number">2</span>*x-<span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span> y&gt;=l <span class="keyword">then</span></div><div class="line">            inc(tot,min(y,r)-max(l,x)+<span class="number">1</span>);</div><div class="line">        x:=x*<span class="number">10</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    cal:=tot/(r-l+<span class="number">1</span>);</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'chance.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'chance.out'</span>);rewrite(output);</div><div class="line">    <span class="keyword">read</span>(n,k);</div><div class="line">    ans:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> p[i]:=cal();</div><div class="line">    f[<span class="number">0</span>,<span class="number">0</span>]:=<span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">        <span class="keyword">for</span> j:=<span class="number">0</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">            f[i,j]:=f[i-<span class="number">1</span>,j-<span class="number">1</span>]*p[i]+f[i-<span class="number">1</span>,j]*(<span class="number">1</span>-p[i]); </div><div class="line">    ans:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=ceil(n*k/<span class="number">100</span>) <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">        ans:=ans+f[n,i];</div><div class="line">    <span class="keyword">write</span>(ans:<span class="number">0</span>:<span class="number">7</span>);</div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P3-Plutotree"><a href="#P3-Plutotree" class="headerlink" title="P3 Plutotree"></a>P3 Plutotree</h1><p>æœ‰ä¸€æ£µn ä¸ªèŠ‚ç‚¹çš„æ ‘ï¼ŒèŠ‚ç‚¹ç¼–å·ä¸º1 åˆ°nï¼Œi å·èŠ‚ç‚¹çš„æƒå€¼ä¸ºWiã€‚è¿™æ£µæ ‘æœ‰äº›å¥‡æ€ªï¼Œå®ƒçš„æ¯ä¸€ä¸ªå¶å­èŠ‚ç‚¹éƒ½æ˜¯æ ¹èŠ‚ç‚¹çš„çˆ¶äº²(è¡¨ç¤ºæ¯ä¸ªå¶å­èŠ‚ç‚¹ä¸æ ¹èŠ‚ç‚¹ä¹‹é—´æœ‰ä¸€æ¡è¾¹æƒä¸º0 çš„è¾¹)ã€‚æˆ‘ä»¬ç§°è¿™æ ·çš„æ ‘ä¸ºpluto æ ‘ï¼Œæ ¹èŠ‚ç‚¹ç¼–å·ä¸º1ã€‚æˆ‘ä»¬éœ€è¦æœ€å°åŒ–ä»u åˆ°v çš„è·¯å¾„(æ¯æ¡è¾¹åªèƒ½ç»è¿‡ä¸€æ¬¡) ä¸Šçš„èŠ‚ç‚¹æƒå€¼ä¹‹å’Œï¼Œå¹¶ä¸”åœ¨æœ€å°åŒ–èŠ‚ç‚¹æƒå€¼ä¹‹å’Œçš„åŒæ—¶æ±‚è¿™ä¸ªè·¯å¾„ä¸Šå¯èƒ½çš„æœ€å¤§æƒå€¼ã€‚</p>
<h2 id="æ ¼å¼-2"><a href="#æ ¼å¼-2" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-2"><a href="#è¾“å…¥æ ¼å¼-2" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°n å’Œqï¼Œn è¡¨ç¤ºèŠ‚ç‚¹ä¸ªæ•°ï¼Œq è¡¨ç¤ºè¯¢é—®ä¸ªæ•°ã€‚<br>ç¬¬äºŒè¡Œn-1 ä¸ªæ•´æ•°Aiï¼Œè¡¨ç¤ºi + 1 å·èŠ‚ç‚¹çš„çˆ¶äº²ä¸ºAi<br>ç¬¬ä¸‰è¡Œn ä¸ªæ•´æ•°Wi è¡¨ç¤ºi å·èŠ‚ç‚¹çš„æƒå€¼ä¸ºWi<br>æ¥ä¸‹æ¥q è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°uï¼Œvï¼Œè¡¨ç¤ºä¸€ç»„è¯¢é—®</p>
<h2 id="è¾“å‡ºæ ¼å¼-2"><a href="#è¾“å‡ºæ ¼å¼-2" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>å¯¹äºæ¯ç»„è¯¢é—®è¾“å‡ºä¸¤ä¸ªæ•´æ•°x; y<br>x è¡¨ç¤ºu åˆ°v çš„æƒå€¼å’Œæœ€å°çš„è·¯å¾„çš„æƒå€¼å’Œï¼Œy è¡¨ç¤ºè¿™æ¡è·¯å¾„ä¸Šç‚¹æƒæœ€å¤§å€¼ã€‚å¦‚æœæœ‰å¤šä¸ªç›¸åŒæƒå€¼å’Œçš„è·¯å¾„ï¼Œè¾“å‡ºé‚£ä¸ªç‚¹æƒæœ€å¤§å€¼æœ€å¤§çš„ã€‚<br><!--more--></p>
<h2 id="æ ·ä¾‹-2"><a href="#æ ·ä¾‹-2" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-2"><a href="#æ ·ä¾‹è¾“å…¥-2" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>5 1<br>1 2 3 4<br>413 127 263 869 960<br>1 5</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-2"><a href="#æ ·ä¾‹è¾“å‡º-2" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>1373 960</p>
</blockquote>
<h2 id="æç¤º-2"><a href="#æç¤º-2" class="headerlink" title="æç¤º"></a>æç¤º</h2><p>â€¢ å¯¹äº30% çš„æ•°æ®ï¼Œn â‰¤ 300ï¼Œq â‰¤ 1000<br>â€¢ å¯¹äº50% çš„æ•°æ®ï¼Œn â‰¤ 2000ï¼Œq â‰¤ 10000<br>â€¢ å¯¹äº100% çš„æ•°æ®ï¼Œn â‰¤ 100000ï¼Œq â‰¤ 100000</p>
<h2 id="é¢˜è§£-2"><a href="#é¢˜è§£-2" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p><strong>å€å¢LCA+æ ‘å½¢DP</strong><br>å¯¹äºæŸ¥è¯¢(u,v)ï¼Œåˆ†ç±»è®¨è®º</p>
<ol>
<li>ç›´æ¥èµ°æ ‘ä¸Šçš„ç®€å•è·¯å¾„ï¼Œè¿™ç§æƒ…å†µå€å¢ä¸€ä¸‹å°±å¯ä»¥äº†</li>
<li>ä¸€ä¸ªç‚¹é€šè¿‡å¶å­èµ°å›æ ¹ï¼Œå†ä»æ ¹èµ°åˆ°å¦ä¸€ä¸ªç‚¹</li>
<li>ä¸¤ä¸ªç‚¹éƒ½é€šè¿‡å¶å­ï¼Œåœ¨æ ¹ç›¸é‡</li>
</ol>
<p>åä¸¤ç§æƒ…å†µï¼Œè¦å¤„ç†å‡ºç¦»æ¯ä¸ªç‚¹æœ€è¿‘çš„å¶å­èŠ‚ç‚¹ï¼Œå¯¹äºç‚¹iï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼š</p>
<ol>
<li>èµ°åˆ°içš„å­æ ‘ä¸Šå¶å­ï¼Œè¿™ä¸ªdfsé¡ºæ‰‹å°±ç®—å‡ºæ¥äº†</li>
<li>å…ˆå‘ä¸Šï¼ˆçˆ¶èŠ‚ç‚¹ï¼‰èµ°ï¼Œç„¶åå‘ä¸‹åˆ°è¾¾ä¸€ä¸ªå¶å­ï¼Œè¿™ä¸ªåœ¨æƒ…å†µ1ç®—å‡ºæ¥åå†dpä¸€ä¸‹ã€‚</li>
</ol>
<p>æ³¨æ„ç‚¹ï¼š</p>
<ol>
<li>ç®—æœ€è¿‘çš„å¶å­ä¸è¦å¿˜äº†æƒ…å†µ2ï¼ˆæ•°æ®æ¯”è¾ƒBTï¼Œå¿˜äº†å°±çˆ†0äº†ï¼‰</li>
<li>å€å¢æ•°ç»„è¦å¼€å¤§ï¼Œæˆ‘å¼€åˆ°15ç„¶åçˆ†äº†ã€‚</li>
<li>è¿˜æœ‰å°±æ˜¯å…³äºæ¯æ¡è¾¹åªèƒ½ç»è¿‡ä¸€æ¬¡çš„é—®é¢˜ï¼Œä½†ç”±äºæ˜¯<strong>æœ€å°åŒ–æƒå€¼å’Œ</strong>ï¼Œé‡å¤ç»è¿‡çš„æƒ…å†µä¸å¯èƒ½æ˜¯æœ€ä¼˜è§£ï¼Œæ‰€ä»¥æ²¡æœ‰å¿…è¦å¤šåšè€ƒè™‘ã€‚</li>
<li>åˆ†ç±»2æœ‰ä¸¤ç§èµ°æ³•éƒ½è¦è€ƒè™‘</li>
<li>ç”±äºæ˜¯ç‚¹æƒï¼Œå’Œè¾¹æƒç±»ä¼¼ï¼Œä½†æ³¨æ„è¾¹ç•Œé—®é¢˜</li>
</ol>
<dir style="text-align:right"><a href="/2016/08/21/JSOI2016-æé«˜1ç­-Day5/plutotree0.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>plutotree0.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">const</span> inf=<span class="number">1000000000</span>;</div><div class="line"><span class="keyword">type</span></div><div class="line">    int=longint;</div><div class="line">    edge=<span class="keyword">record</span> t,next:int <span class="keyword">end</span>;</div><div class="line"><span class="keyword">var</span></div><div class="line">    g:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">100010</span>] <span class="keyword">of</span> edge;</div><div class="line">    head,dep,w,dist:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">100010</span>] <span class="keyword">of</span> int;</div><div class="line">    d:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">100010</span>,<span class="number">0</span>..<span class="number">1</span>] <span class="keyword">of</span> int;</div><div class="line">    par,mxw:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">100010</span>,<span class="number">0</span>..<span class="number">25</span>] <span class="keyword">of</span> int;</div><div class="line">    n,logn,q,i,j:int;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">add</span><span class="params">(f,t:int)</span>;</span></div><div class="line"><span class="keyword">var</span> m:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    inc(head[<span class="number">0</span>]);m:=head[<span class="number">0</span>];</div><div class="line">    g[m].t:=t;</div><div class="line">    g[m].next:=head[f];head[f]:=m;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"><span class="comment">//ä¸ºäº†çœäº‹ï¼Œæ›´æ–°ç­”æ¡ˆç”¨</span></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">update</span><span class="params">(<span class="keyword">var</span> x,y:int;nx,ny:int)</span>;</span></div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">if</span> (nx&lt;x) <span class="keyword">or</span> ((nx=x) <span class="keyword">and</span> (ny&gt;y)) <span class="keyword">then</span></div><div class="line">        <span class="keyword">begin</span> x:=nx;y:=ny <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">dfs</span><span class="params">(v,p:int)</span>;</span></div><div class="line"><span class="keyword">var</span> i,u:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    dep[v]:=dep[p]+<span class="number">1</span>; <span class="comment">//æ·±åº¦</span></div><div class="line">    dist[v]:=dist[p]+w[v]; <span class="comment">//åˆ°æ ¹çš„è·¯å¾„ä¸Šçš„ç‚¹æƒå’Œ</span></div><div class="line">    par[v,<span class="number">0</span>]:=p; <span class="comment">//çˆ¶èŠ‚ç‚¹</span></div><div class="line">    mxw[v,<span class="number">0</span>]:=max(w[p],w[v]); <span class="comment">//å€å¢è·¯å¾„ä¸Šçš„æœ€å¤§ç‚¹æƒ</span></div><div class="line">    i:=head[v];</div><div class="line">    <span class="comment">//dæ˜¯dpæ•°ç»„ï¼Œd[v,0]æ˜¯ç¦»æœ€è¿‘å¶å­çš„è·¯å¾„ä¸Šçš„ç‚¹æƒå’Œï¼Œd[v,1]æ˜¯è¿™ä¸ªè·¯å¾„ä¸Šçš„æœ€å¤§ç‚¹æƒ</span></div><div class="line">    <span class="keyword">if</span> i=<span class="number">0</span> <span class="keyword">then</span> d[v,<span class="number">0</span>]:=w[v] <span class="keyword">else</span> d[v,<span class="number">0</span>]:=inf;</div><div class="line">    d[v,<span class="number">1</span>]:=w[v];</div><div class="line">    <span class="keyword">while</span> i&lt;&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        u:=g[i].t;</div><div class="line">        dfs(u,v);</div><div class="line">        update(d[v,<span class="number">0</span>],d[v,<span class="number">1</span>],d[u,<span class="number">0</span>]+w[v],max(d[u,<span class="number">1</span>],w[v]));</div><div class="line">        i:=g[i].next;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">dp</span><span class="params">(v,p:int)</span>;</span></div><div class="line"><span class="keyword">var</span> i:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    update(d[v,<span class="number">0</span>],d[v,<span class="number">1</span>],d[p,<span class="number">0</span>]+w[v],max(d[p,<span class="number">1</span>],w[v]));</div><div class="line">    i:=head[v];</div><div class="line">    <span class="keyword">while</span> i&lt;&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        dp(g[i].t,v);</div><div class="line">        i:=g[i].next;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">swap</span><span class="params">(<span class="keyword">var</span> a,b:int)</span>;</span></div><div class="line"><span class="keyword">var</span> tmp:int;</div><div class="line"><span class="keyword">begin</span> tmp:=a;a:=b;b:=tmp <span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">lca</span><span class="params">(u,v:int;<span class="keyword">var</span> c,mx:int)</span>;</span></div><div class="line"><span class="keyword">var</span> i:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">if</span> dep[u]&lt;dep[v] <span class="keyword">then</span> swap(u,v);</div><div class="line">    mx:=max(w[u],w[v]);</div><div class="line">    <span class="keyword">for</span> i:=logn <span class="keyword">downto</span> <span class="number">0</span> <span class="keyword">do</span></div><div class="line">        <span class="keyword">if</span> dep[par[u,i]]&gt;=dep[v] <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            mx:=max(mx,mxw[u,i]);</div><div class="line">            u:=par[u,i];</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">if</span> u=v <span class="keyword">then</span> <span class="keyword">begin</span> c:=u;<span class="keyword">exit</span> <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">for</span> i:=logn <span class="keyword">downto</span> <span class="number">0</span> <span class="keyword">do</span></div><div class="line">        <span class="keyword">if</span> par[u,i]&lt;&gt;par[v,i] <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            mx:=max(mx,max(mxw[u,i],mxw[v,i]));</div><div class="line">            u:=par[u,i];v:=par[v,i];</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    mx:=max(mx,max(mxw[u,<span class="number">0</span>],mxw[v,<span class="number">0</span>]));</div><div class="line">    c:=par[u,<span class="number">0</span>];</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">solve</span><span class="params">()</span>;</span></div><div class="line"><span class="keyword">var</span> t1,t2,c,mx,mx1,md,md1:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">read</span>(t1,t2);</div><div class="line">    <span class="keyword">if</span> t1=t2 <span class="keyword">then</span> <span class="keyword">begin</span> writeln(w[t1],<span class="string">' '</span>,w[t1]);<span class="keyword">exit</span> <span class="keyword">end</span>;</div><div class="line">    <span class="comment">//Case 1</span></div><div class="line">    lca(t1,t2,c,mx);</div><div class="line">    md:=dist[t1]+dist[t2]-<span class="number">2</span>*dist[c]+w[c];</div><div class="line">    <span class="comment">//Case 2.1</span></div><div class="line">    mx1:=max(mxw[t1,logn],d[t2,<span class="number">1</span>]);</div><div class="line">    md1:=dist[t1]+d[t2,<span class="number">0</span>];</div><div class="line">    update(md,mx,md1,mx1);</div><div class="line">    <span class="comment">//Case 2.2</span></div><div class="line">    mx1:=max(mxw[t2,logn],d[t1,<span class="number">1</span>]);</div><div class="line">    md1:=dist[t2]+d[t1,<span class="number">0</span>];</div><div class="line">    update(md,mx,md1,mx1);</div><div class="line">    <span class="comment">//Case 3</span></div><div class="line">    mx1:=max(w[<span class="number">1</span>],max(d[t1,<span class="number">1</span>],d[t2,<span class="number">1</span>]));</div><div class="line">    md1:=d[t1,<span class="number">0</span>]+d[t2,<span class="number">0</span>]+w[<span class="number">1</span>];</div><div class="line">    update(md,mx,md1,mx1);</div><div class="line"></div><div class="line">    writeln(md,<span class="string">' '</span>,mx);</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'plutotree.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'plutotree.out'</span>);rewrite(output);</div><div class="line">    <span class="keyword">read</span>(n,q);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">2</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(j);add(j,i);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">read</span>(w[i]);</div><div class="line">    dfs(<span class="number">1</span>,<span class="number">0</span>);</div><div class="line">    dp(<span class="number">1</span>,<span class="number">1</span>);</div><div class="line">    <span class="comment">//å€å¢æ•°ç»„</span></div><div class="line">    logn:=floor(ln(n)/ln(<span class="number">2</span>));</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> logn <span class="keyword">do</span></div><div class="line">        <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            par[j,i]:=par[par[j,i-<span class="number">1</span>],i-<span class="number">1</span>];</div><div class="line">            mxw[j,i]:=max(mxw[j,i-<span class="number">1</span>],mxw[par[j,i-<span class="number">1</span>],i-<span class="number">1</span>]);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> q <span class="keyword">do</span> solve();</div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç¬¬1é¢˜ä¸€å¦‚æ—¢å¾€åœ°æ°´ï¼Œç¬¬3é¢˜çš„æ•°æ®BTï¼Œä½†ç”¨dfsæ ˆå¹¶æ²¡æœ‰çˆ†ã€‚&lt;/p&gt;
&lt;h1 id=&quot;P1-Video&quot;&gt;&lt;a href=&quot;#P1-Video&quot; class=&quot;headerlink&quot; title=&quot;P1 Video&quot;&gt;&lt;/a&gt;P1 Video&lt;/h1&gt;&lt;p&gt;pluto å–œæ¬¢çœ‹ç‰‡ï¼Œç°åœ¨ä»–çš„ç¡¬ç›˜é‡Œæœ‰n éƒ¨ç‰‡ï¼Œä½†æ˜¯ç”±äºä»–è¿˜è¦æŠŠå¦¹ï¼Œæ‰€ä»¥çœ‹ç‰‡æ—¶é—´æœ‰é™ï¼Œä»–åªèƒ½æŒ‘å‡ºå…¶ä¸­çš„k éƒ¨ç‰‡æ¥çœ‹ï¼Œä»–æƒ³çŸ¥é“æœ‰å¤šå°‘ç§ä¸åŒçš„é€‰ç‰‡æ–¹æ¡ˆã€‚æ–¹æ¡ˆæ•°å¯èƒ½å¾ˆå¤§ï¼Œç­”æ¡ˆmod 1000000007 è¾“å‡ºã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ ¼å¼&quot;&gt;&lt;a href=&quot;#æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;æ ¼å¼&quot;&gt;&lt;/a&gt;æ ¼å¼&lt;/h2&gt;&lt;h3 id=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å…¥æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å…¥æ ¼å¼&lt;/h3&gt;&lt;p&gt;ä¸€è¡Œä¸¤ä¸ªæ•´æ•°ï¼Œnå’Œm&lt;/p&gt;
&lt;h2 id=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å‡ºæ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å‡ºæ ¼å¼&lt;/h2&gt;&lt;p&gt;ä¸€è¡Œä¸€ä¸ªæ•´æ•°ï¼Œå³æ‰€æ±‚ç­”æ¡ˆ&lt;br&gt;
    
    </summary>
    
      <category term="Problem Set" scheme="https://cothrax.github.io/categories/Problem-Set/"/>
    
    
      <category term="OI" scheme="https://cothrax.github.io/tags/OI/"/>
    
      <category term="JSOI" scheme="https://cothrax.github.io/tags/JSOI/"/>
    
      <category term="DP" scheme="https://cothrax.github.io/tags/DP/"/>
    
      <category term="æ•°è®º" scheme="https://cothrax.github.io/tags/%E6%95%B0%E8%AE%BA/"/>
    
      <category term="ä¹˜æ³•é€†å…ƒ" scheme="https://cothrax.github.io/tags/%E4%B9%98%E6%B3%95%E9%80%86%E5%85%83/"/>
    
      <category term="æ’åˆ—ç»„åˆ" scheme="https://cothrax.github.io/tags/%E6%8E%92%E5%88%97%E7%BB%84%E5%90%88/"/>
    
      <category term="æ¦‚ç‡æœŸæœ›" scheme="https://cothrax.github.io/tags/%E6%A6%82%E7%8E%87%E6%9C%9F%E6%9C%9B/"/>
    
      <category term="æ ‘å½¢DP" scheme="https://cothrax.github.io/tags/%E6%A0%91%E5%BD%A2DP/"/>
    
      <category term="å€å¢" scheme="https://cothrax.github.io/tags/%E5%80%8D%E5%A2%9E/"/>
    
      <category term="LCA" scheme="https://cothrax.github.io/tags/LCA/"/>
    
  </entry>
  
  <entry>
    <title>[JSOI2016] æé«˜2ç­ å•è°ƒé˜Ÿåˆ—åŠåŠ¨è§„ä¼˜åŒ–</title>
    <link href="https://cothrax.github.io/2016/08/20/JSOI2016-%E6%8F%90%E9%AB%982%E7%8F%AD-%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97%E5%8F%8A%E5%8A%A8%E8%A7%84%E4%BC%98%E5%8C%96/"/>
    <id>https://cothrax.github.io/2016/08/20/JSOI2016-æé«˜2ç­-å•è°ƒé˜Ÿåˆ—åŠåŠ¨è§„ä¼˜åŒ–/</id>
    <published>2016-08-20T10:34:23.000Z</published>
    <updated>2016-08-20T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="P1-è½°ç‚¸æœº"><a href="#P1-è½°ç‚¸æœº" class="headerlink" title="P1 è½°ç‚¸æœº"></a>P1 è½°ç‚¸æœº</h1><p>å¤§å±±ä¸¤ä¾§çš„Xå›½ä¸Yå›½çˆ†å‘äº†ä¸€åœºæˆ˜äº‰ï¼Œç”±äºå±±åŠ¿é™©å³»ï¼Œåªæœ‰ä¸€æ¡å±±è·¯å¯ä»¥é€šè¡Œï¼Œæ‰€ä»¥åŒæ–¹çš„å†›è¥éƒ½è®¾ç½®åœ¨è¿™ä¸€æ¡è·¯ä¸Šï¼ˆç›´çº¿ï¼‰ã€‚Xå›½ç§‘å­¦å®¶æ­£åœ¨ç ”åˆ¶ä¸€ç§é«˜å¨åŠ›è½°ç‚¸æœºï¼Œå…¶ç‚®å¼¹å¯ä»¥å¤§è§„æ¨¡ç²¾å‡†æ‘§æ¯ç›®æ ‡ã€‚ç”±äºåœ¨å‰çº¿è¿è¿å¤±åˆ©ï¼ŒXå›½é«˜å±‚å†³å®šæå‰å°†å…¶æŠ•å…¥ä½¿ç”¨ã€‚ä½†ç”±äºç ”å‘å°šæœªå®Œæˆï¼Œä»…æœ‰ä¸€æšå¯¼å¼¹å¯ä¾›ä½¿ç”¨ã€‚è¿™æšå¯¼å¼¹è‡³å¤šå¯ä»¥æ‘§æ¯Mä¸ªç›®æ ‡ï¼ˆåŒ…æ‹¬æ•Œæ–¹å†›è¥å’Œå·±æ–¹å†›è¥ï¼‰ï¼Œä½†è¿™äº›ç›®æ ‡å¿…é¡»æ˜¯è¿ç»­çš„ã€‚<br>åœ¨ä¸€ä¸ªæœˆé»‘é£é«˜çš„å¤œæ™šï¼ŒXå›½é«˜å±‚å†³å®šç”¨è¿™æ¶è½°ç‚¸æœºå‘èµ·çªè¢­ã€‚ä»–ä»¬é¢„å…ˆä¾¦æŸ¥åˆ°äº†å±±è·¯ä¸ŠåŒæ–¹å†›è¥å…±æœ‰Nä¸ªå†›è¥ï¼Œå¹¶æ¢æ¸…äº†æ¯ä¸ªå†›è¥çš„æƒ…å†µï¼Œä»–ä»¬è¯·ä½ å¸®ä»–ä»¬è®¾è®¡å‡ºè¿™æ¬¡çªè¢­æˆ˜æœæœ€å¤§çš„æ–¹æ¡ˆã€‚<br>Xå›½æˆ˜å›½çš„è®¡ç®—å…¬å¼ä¸ºï¼šæˆ˜æœ=æ•Œæ–¹æŸå¤±çš„æˆ˜æ–—åŠ›-å·±æ–¹æŸå¤±çš„æˆ˜æ–—åŠ›ã€‚</p>
<h2 id="æ ¼å¼"><a href="#æ ¼å¼" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼"><a href="#è¾“å…¥æ ¼å¼" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•° N,M;<br>ç¬¬2~N+1è¡Œï¼Œæ¯è¡Œä¸€ä¸ªæ•´æ•°Aiï¼Œè¡¨ç¤ºç¬¬iä¸ªå†›è¥çš„å±æ€§å€¼ã€‚<br>abs(Ai)è¡¨ç¤ºç¬¬iä¸ªå†›è¥çš„æˆ˜æ–—åŠ›ã€‚<br>Ai>0ï¼Œè¡¨æ˜è¯¥å†›è¥æ˜¯Yå›½çš„å†›è¥ï¼›<br>Ai&lt;0ï¼Œè¡¨æ˜è¯¥å†›è¥æ˜¯Xå›½çš„å†›è¥ï¼›<br>Ai=0ï¼Œè¡¨æ˜è¯¥å†›è¥æ˜¯ç©ºçš„ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼"><a href="#è¾“å‡ºæ ¼å¼" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>ä»…ä¸€è¡Œï¼Œè¾“å‡ºä½¿çªè¢­æˆ˜æœæœ€å¤§çš„æ–¹æ¡ˆï¼ˆæŒ‰ç…§è¾“å…¥é¡ºåºè¾“å‡ºæ‰€æœ‰è½°ç‚¸ç›®æ ‡çš„å±æ€§å€¼ï¼‰ï¼Œæ¯ä¸¤ä¸ªå±æ€§å€¼ä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ã€‚</p>
<a id="more"></a>
<h2 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥"><a href="#æ ·ä¾‹è¾“å…¥" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>4 2<br>-1<br>3<br>â€“10<br>20</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º"><a href="#æ ·ä¾‹è¾“å‡º" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>20</p>
</blockquote>
<h2 id="æç¤º"><a href="#æç¤º" class="headerlink" title="æç¤º"></a>æç¤º</h2><p>30%çš„æ•°æ®ï¼šN&lt;=3000,M&lt;=100<br>100%çš„æ•°æ®N,M&lt;=1000000 -maxlongint&lt;=Ai&lt;=maxlongint</p>
<h2 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>æœ€å¤§å­æ®µå’Œçš„å‡çº§ç‰ˆï¼Œè¦æ±‚é•¿åº¦ä¸è¶…è¿‡mã€‚<br>å…ˆæ±‚å‰ç¼€å’Œsum[i]<br>ç„¶åï¼Œè®°f[i]æ˜¯ä»¥iç»“å°¾çš„æœ€å¤§å­æ®µå’Œï¼Œ<span>$f[i]=sum[i]-min\{sum[j]\ |\ i-j&lt;=m\}$</span><!-- Has MathJax --><br>ç„¶åå¯ä»¥ç”¨ä¸€ä¸ªä¸¥æ ¼é€’å¢çš„å•è°ƒé˜Ÿåˆ—ç»´æŠ¤sum[j]</p>
<dir style="text-align:right"><a href="/2016/08/20/JSOI2016-æé«˜2ç­-å•è°ƒé˜Ÿåˆ—åŠåŠ¨è§„ä¼˜åŒ–/sum.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>sum.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    n,m,i,j,k,d,h,t,ans:int;</div><div class="line">    c,w,a:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">110</span>] <span class="keyword">of</span> int; <span class="comment">//è´¹ç”¨,ä»·å€¼,æ•°é‡</span></div><div class="line">    f:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">10010</span>] <span class="keyword">of</span> int;</div><div class="line">    q:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">10010</span>,<span class="number">0</span>..<span class="number">1</span>] <span class="keyword">of</span> int;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">read</span>(n,m);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">read</span>(c[i],w[i],a[i]);</div><div class="line">    d:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        d:=min(m,d+c[i]*a[i]);</div><div class="line">        <span class="keyword">for</span> j:=<span class="number">0</span> <span class="keyword">to</span> c[i]-<span class="number">1</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            h:=<span class="number">1</span>;t:=<span class="number">0</span>;k:=<span class="number">0</span>;</div><div class="line">            <span class="keyword">while</span> j+c[i]*k&lt;=d <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">                <span class="keyword">while</span> (h&lt;=t) <span class="keyword">and</span> (q[t,<span class="number">0</span>]&lt;=f[j+c[i]*k]-w[i]*k) <span class="keyword">do</span> dec(t);</div><div class="line">                inc(t);q[t,<span class="number">1</span>]:=k;q[t,<span class="number">0</span>]:=f[j+c[i]*k]-w[i]*k;</div><div class="line">                <span class="keyword">while</span> (h&lt;=t) <span class="keyword">and</span> (k-q[h,<span class="number">1</span>]&gt;a[i]) <span class="keyword">do</span> inc(h);</div><div class="line">                f[j+c[i]*k]:=max(f[j+c[i]*k],q[h,<span class="number">0</span>]+k*w[i]);</div><div class="line">                inc(k);</div><div class="line">            <span class="keyword">end</span>;</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    ans:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span> ans:=max(ans,f[i]);</div><div class="line">    <span class="keyword">write</span>(ans);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P2-æ­¦å™¨è°ƒåº¦"><a href="#P2-æ­¦å™¨è°ƒåº¦" class="headerlink" title="P2 æ­¦å™¨è°ƒåº¦"></a>P2 æ­¦å™¨è°ƒåº¦</h1><p>ä¸ºäº†å–å¾—èƒœåˆ©ï¼ŒXå›½é«˜å±‚å†³å®šè°ƒåŠ¨æ­¦å™¨åº“ä¸­çš„è£…å¤‡æ”¯æ´å‰çº¿ï¼Œä»¥å¢å¼ºå‰çº¿çš„æˆ˜æ–—åŠ›ã€‚Xå›½æ­¦å™¨åº“ä¸­å…±æœ‰Nç§æ­¦å™¨ï¼Œæ¯ç§æ­¦å™¨éƒ½æœ‰å›ºå®šçš„è´¨é‡ï¼Œä¸”æ•°é‡æœ‰é™ï¼Œèƒ½ç»™å‰çº¿å¢åŠ çš„æˆ˜æ–—åŠ›ä¹Ÿæ˜¯å·²çŸ¥çš„ã€‚æ‹Ÿå®šå°†ç”¨é£æœºè¿é€ï¼Œä¸ºäº†ä½¿é£æœºå…·æœ‰èƒ½æ‘†è„±Yå›½é˜²ç©ºå¯¼å¼¹çš„é€Ÿåº¦ï¼Œå…¶æœ€å¤§è£…è½½è´¨é‡ä¸å¾—è¶…è¿‡Mã€‚ç°åœ¨ä»–ä»¬éœ€è¦ä½ æ±‚å‡ºè¿™ä¸€æ¬¡è£…å¤‡è¿è¾“æœ€å¤šèƒ½ç»™å‰çº¿å¢åŠ å¤šå°‘æˆ˜æ–—åŠ›ã€‚</p>
<h2 id="æ ¼å¼-1"><a href="#æ ¼å¼-1" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-1"><a href="#è¾“å…¥æ ¼å¼-1" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•° Nï¼ŒMï¼›<br>ç¬¬2~N+1è¡Œï¼Œæ¯è¡Œä¸‰ä¸ªæ•´æ•°Piã€Wiã€Ciï¼Œ<br>Piè¡¨ç¤ºæ¯ä»¶ç¬¬iç§æ­¦å™¨çš„è´¨é‡ï¼›<br>Wiè¡¨ç¤ºæ¯ä»¶ç¬¬iç§æ­¦å™¨èƒ½ç»™å‰çº¿å¢åŠ çš„æˆ˜æ–—åŠ›ï¼›<br>Ciè¡¨ç¤ºç¬¬iç§æ­¦å™¨çš„æ•°é‡ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼-1"><a href="#è¾“å‡ºæ ¼å¼-1" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>ä»…ä¸€è¡Œï¼Œè¾“å‡ºè¿™ä¸€æ¬¡è£…å¤‡è¿è¾“èƒ½ç»™å‰çº¿å¢åŠ çš„æœ€å¤§æˆ˜æ–—åŠ›ã€‚</p>
<h2 id="æ ·ä¾‹-1"><a href="#æ ·ä¾‹-1" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-1"><a href="#æ ·ä¾‹è¾“å…¥-1" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>5 20<br>3 8 5<br>12 16 2<br>1 4 1<br>5 9 2<br>4 11 1</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-1"><a href="#æ ·ä¾‹è¾“å‡º-1" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>55</p>
</blockquote>
<h2 id="æç¤º-1"><a href="#æç¤º-1" class="headerlink" title="æç¤º"></a>æç¤º</h2><p>30%çš„æ•°æ®ä¸­ï¼Œn&lt;=10<br>50%çš„æ•°æ®ä¸­ï¼Œn&lt;=50,m&lt;=5000<br>100%çš„æ•°æ®ä¸­ï¼Œn&lt;=100,m&lt;=10000,ci&lt;=100<br>ä¿è¯è¾“å‡ºç»“æœåœ¨maxlongintèŒƒå›´å†…ã€‚</p>
<h2 id="é¢˜è§£-1"><a href="#é¢˜è§£-1" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–å¤šé‡èƒŒåŒ…ï¼Œä»£ç ä¼˜ç¾åˆ°ä¸å¯æ€è®®ã€‚<br>è¯¦è§£è§æ­¤ï¼š<a href="http://www.cppblog.com/flyinghearts/archive/2010/09/01/125555.html" target="_blank" rel="external">http://www.cppblog.com/flyinghearts/archive/2010/09/01/125555.html</a></p>
<dir style="text-align:right"><a href="/2016/08/20/JSOI2016-æé«˜2ç­-å•è°ƒé˜Ÿåˆ—åŠåŠ¨è§„ä¼˜åŒ–/war.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>war.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    n,m,i,j,k,d,h,t,ans:int;</div><div class="line">    c,w,a:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">110</span>] <span class="keyword">of</span> int; <span class="comment">//è´¹ç”¨,ä»·å€¼,æ•°é‡</span></div><div class="line">    f:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">10010</span>] <span class="keyword">of</span> int;</div><div class="line">    q:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">10010</span>,<span class="number">0</span>..<span class="number">1</span>] <span class="keyword">of</span> int;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'war.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'war.out'</span>);rewrite(output);</div><div class="line">    <span class="keyword">read</span>(n,m);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">read</span>(c[i],w[i],a[i]);</div><div class="line">    d:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        d:=min(m,d+c[i]*a[i]);</div><div class="line">        <span class="keyword">for</span> j:=<span class="number">0</span> <span class="keyword">to</span> c[i]-<span class="number">1</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            h:=<span class="number">1</span>;t:=<span class="number">0</span>;k:=<span class="number">0</span>;</div><div class="line">            <span class="keyword">while</span> j+c[i]*k&lt;=d <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">                <span class="keyword">while</span> (h&lt;=t) <span class="keyword">and</span> (q[t,<span class="number">0</span>]&lt;=f[j+c[i]*k]-w[i]*k) <span class="keyword">do</span> dec(t);</div><div class="line">                inc(t);q[t,<span class="number">1</span>]:=k;q[t,<span class="number">0</span>]:=f[j+c[i]*k]-w[i]*k;</div><div class="line">                <span class="keyword">while</span> (h&lt;=t) <span class="keyword">and</span> (k-q[h,<span class="number">1</span>]&gt;a[i]) <span class="keyword">do</span> inc(h);</div><div class="line">                f[j+c[i]*k]:=max(f[j+c[i]*k],q[h,<span class="number">0</span>]+k*w[i]);</div><div class="line">                inc(k);</div><div class="line">            <span class="keyword">end</span>;</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    ans:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span> ans:=max(ans,f[i]);</div><div class="line">    <span class="keyword">write</span>(ans);</div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P3-ç‘°ä¸½åå°”å…¹"><a href="#P3-ç‘°ä¸½åå°”å…¹" class="headerlink" title="P3 ç‘°ä¸½åå°”å…¹"></a>P3 ç‘°ä¸½åå°”å…¹</h1><blockquote>
<p>å‰é¢çš„åºŸè¯è¢«æˆ‘åˆ äº†</p>
</blockquote>
<p>æ™šä¸Šåœ¨é‡‘è‰²çš„åœ°æ¿ä¸Šå¿«ä¹åœ°è·³ç€åå°”å…¹æ˜¯ä¸æ˜¯å¾ˆæƒ¬æ„å‘¢ï¼Ÿä¹Ÿè®¸ï¼Œæˆ‘ä»¬å¿˜è®°äº†ä¸€ä¸ªäººï¼Œé‚£å°±æ˜¯è‰¾ç±³ä¸½ï¼Œå¥¹å¯æ²¡é—²ç€ï¼šå¥¹å¿…é¡»åœ¨é€‚å½“çš„æ—¶å€™æ–½é­”æ³•å¸®åŠ©1900ï¼Œä¸è®©é’¢ç´ç¢°ä¸Šèˆå…é‡Œçš„å®¶å…·ã€‚è€Œè‰¾ç±³ä¸½è¿˜å°ï¼Œå¥¹æ— æ³•æ–½å±•é­”æ³•æ”¹å˜é’¢ç´çš„è¿åŠ¨æ–¹å‘æˆ–é€Ÿåº¦ï¼Œè€Œåªèƒ½è®©é’¢ç´åœä¸€ä¸‹ã€‚<br>ä¸å¦¨è®¤ä¸ºèˆå…æ˜¯ä¸€ä¸ªNè¡ŒMåˆ—çš„çŸ©é˜µï¼ŒçŸ©é˜µä¸­çš„æŸäº›æ–¹æ ¼ä¸Šå †æ”¾äº†ä¸€äº›å®¶å…·ï¼Œå…¶ä»–çš„åˆ™æ˜¯ç©ºåœ°ã€‚é’¢ç´å¯ä»¥åœ¨ç©ºåœ°ä¸Šæ»‘åŠ¨ï¼Œä½†ä¸èƒ½æ’ä¸Šå®¶å…·æˆ–æ»‘å‡ºèˆå…ï¼Œå¦åˆ™ä¼šæŸåé’¢ç´å’Œå®¶å…·ï¼Œå¼•æ¥éš¾ç¼ çš„èˆ¹é•¿ã€‚<br>æ¯ä¸ªæ—¶åˆ»ï¼Œé’¢ç´éƒ½ä¼šéšç€èˆ¹ä½“å€¾æ–œçš„æ–¹å‘å‘ç›¸é‚»çš„æ–¹æ ¼æ»‘åŠ¨ä¸€æ ¼ï¼Œå…¶ä¸­ç›¸é‚»çš„æ–¹æ ¼å¯ä»¥æ˜¯å‘ä¸œã€å‘è¥¿ã€å‘å—æˆ–å‘åŒ—çš„ã€‚è€Œè‰¾ç±³ä¸½å¯ä»¥é€‰æ‹©æ–½é­”æ³•æˆ–ä¸æ–½é­”æ³•ï¼Œå¦‚æœä¸æ–½é­”æ³•ï¼Œåˆ™é’¢ç´ä¼šæ»‘åŠ¨ï¼Œè€Œå¦‚æœæ–½é­”æ³•ï¼Œåˆ™é’¢ç´ä¼šåŸåœ°ä¸åŠ¨ã€‚ è‰¾ç±³ä¸½æ˜¯ä¸ªå¤©ä½¿ï¼Œå¥¹çŸ¥é“æ¯æ®µæ—¶é—´çš„èˆ¹ä½“çš„å€¾æ–œæƒ…å†µã€‚å¥¹æƒ³ä½¿é’¢ç´å°½é‡é•¿æ—¶é—´åœ¨èˆå…é‡Œæ»‘è¡Œï¼Œè¿™æ ·1900ä¼šéå¸¸é«˜å…´ï¼ŒåŒæ—¶ä¹Ÿæœ‰åˆ©äºæ²»ç–—æ‰˜å°¼çš„æ™•èˆ¹ã€‚ä½†è‰¾ç±³ä¸½è¿˜å¤ªå°ï¼Œä¸ä¼šç®—ï¼Œæ‰€ä»¥å¸Œæœ›ä½ èƒ½å¸®åŠ©å¥¹ã€‚</p>
<h2 id="æ ¼å¼-2"><a href="#æ ¼å¼-2" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-2"><a href="#è¾“å…¥æ ¼å¼-2" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>è¾“å…¥æ–‡ä»¶çš„ç¬¬ä¸€è¡ŒåŒ…å«5ä¸ªæ•°N, M, x, yå’ŒKã€‚Nå’ŒMæè¿°èˆå…çš„å¤§å°ï¼Œxå’Œyä¸ºåœ¨ç¬¬1æ—¶åˆ»åˆé’¢ç´çš„ä½ç½®ï¼ˆxè¡Œyåˆ—ï¼‰ï¼›æˆ‘ä»¬å¯¹èˆ¹ä½“å€¾æ–œæƒ…å†µæ˜¯æŒ‰æ—¶é—´çš„åŒºé—´æ¥æè¿°çš„ï¼Œæ¯”å¦‚â€œåœ¨[1, 3]æ—¶é—´é‡Œå‘ä¸œå€¾æ–œï¼Œ[4, 5]æ—¶é—´é‡Œå‘åŒ—å€¾æ–œâ€ï¼Œå› æ­¤è¿™é‡Œçš„Kè¡¨ç¤ºåŒºé—´çš„æ•°ç›®ã€‚<br>ä»¥ä¸‹Nè¡Œï¼Œæ¯è¡ŒMä¸ªå­—ç¬¦ï¼Œæè¿°èˆå…é‡Œçš„å®¶å…·ã€‚ç¬¬iè¡Œç¬¬jåˆ—çš„å­—ç¬¦è‹¥ä¸ºâ€˜ . â€˜ï¼Œåˆ™è¡¨ç¤ºè¯¥ä½ç½®æ˜¯ç©ºåœ°ï¼›è‹¥ä¸ºâ€˜ x â€˜ï¼Œåˆ™è¡¨ç¤ºæœ‰å®¶å…·ã€‚<br>ä»¥ä¸‹Kè¡Œï¼Œé¡ºåºæè¿°Kä¸ªæ—¶é—´åŒºé—´ï¼Œæ ¼å¼ä¸ºï¼šsi ti di(1 â‰¤ i â‰¤ K)ã€‚è¡¨ç¤ºåœ¨æ—¶é—´åŒºé—´[si, ti]å†…ï¼Œèˆ¹ä½“éƒ½æ˜¯å‘diæ–¹å‘å€¾æ–œçš„ã€‚diä¸º1, 2, 3, 4ä¸­çš„ä¸€ä¸ªï¼Œä¾æ¬¡è¡¨ç¤ºåŒ—ã€å—ã€è¥¿ã€ä¸œï¼ˆåˆ†åˆ«å¯¹åº”çŸ©é˜µä¸­çš„ä¸Šã€ä¸‹ã€å·¦ã€å³ï¼‰ã€‚è¾“å…¥ä¿è¯åŒºé—´æ˜¯è¿ç»­çš„ï¼Œå³<br>s1 = 1<br>ti = si-1 + 1 (1 &lt; i â‰¤ K)<br>tK = T</p>
<h2 id="è¾“å‡ºæ ¼å¼-2"><a href="#è¾“å‡ºæ ¼å¼-2" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>è¾“å‡ºæ–‡ä»¶ä»…æœ‰1è¡Œï¼ŒåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºé’¢ç´æ»‘è¡Œçš„æœ€é•¿è·ç¦»(å³æ ¼å­æ•°)ã€‚</p>
<h2 id="æ ·ä¾‹-2"><a href="#æ ·ä¾‹-2" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-2"><a href="#æ ·ä¾‹è¾“å…¥-2" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>4 5 4 1 3<br>..xx.<br>â€¦..<br>â€¦x.<br>â€¦..<br>1 3 4<br>4 5 1<br>6 7 3</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-2"><a href="#æ ·ä¾‹è¾“å‡º-2" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>6</p>
</blockquote>
<h2 id="æç¤º-2"><a href="#æç¤º-2" class="headerlink" title="æç¤º"></a>æç¤º</h2><img src="/2016/08/20/JSOI2016-æé«˜2ç­-å•è°ƒé˜Ÿåˆ—åŠåŠ¨è§„ä¼˜åŒ–/adv.png" alt="adv.png" title="">
<p>é’¢ç´åœ¨â€œÃ—ä½ç½®ä¸Šæ—¶å¤©ä½¿ä½¿ç”¨ä¸€æ¬¡é­”æ³•ï¼Œå› æ­¤æ»‘åŠ¨æ€»é•¿åº¦ä¸º6ã€‚<br>ã€æ•°æ®èŒƒå›´ã€‘<br>50%çš„æ•°æ®ä¸­ï¼Œ1â‰¤N, Mâ‰¤200ï¼ŒTâ‰¤200ï¼›<br>100%çš„æ•°æ®ä¸­ï¼Œ1â‰¤N, Mâ‰¤200ï¼ŒKâ‰¤200ï¼ŒTâ‰¤40000ã€‚</p>
<h2 id="é¢˜è§£-2"><a href="#é¢˜è§£-2" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>NOI2005çš„é¢˜ç›®ï¼Œå¸®åŠ©ç†è§£å•è°ƒé˜Ÿåˆ—çš„å¥½é¢˜ã€‚<br>é»„å­¦é•¿çš„é¢˜è§£å·²ç»å¾ˆæ¸…æ¥šäº†ï¼š<a href="http://hzwer.com/7397.html" target="_blank" rel="external">http://hzwer.com/7397.html</a><br>å…¶å®å¯ä»¥å‘ç°ï¼Œè¿™ä¸€é¢˜å’Œå¤šé‡èƒŒåŒ…æœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™ï¼ŒæŠŠkä¸ªåŒºé—´çœ‹æˆkç§ç‰©å“ï¼ŒæŠŠæ»‘1æ­¥çœ‹æˆæ·»åŠ 1ä¸ªç‰©å“ï¼Œæ¯ä¸ªç‰©å“çš„ä»·å€¼ä¸º1ï¼ŒåŒºé—´é•¿åº¦å°±æ˜¯ç‰©å“çš„æ€»æ•°ï¼Œè€Œå¯ä»¥æ–½é­”æ³•åœæ­¢å°±æ„å‘³ç€å¯ä»¥å–ä»»æ„æ•°é‡çš„ç‰©å“ï¼Œå¤šé‡èƒŒåŒ…æ˜¯é€šè¿‡å¯¹c[i]å–æ¨¡åˆ†ç»„ï¼Œè€Œè¿™ä¸€é¢˜æ˜¯é€šè¿‡è¡Œåˆ—åˆ†ç»„ï¼Œæ‰€ä»¥ å¯ä»¥çœ‹å‡ºï¼Œè¿™å°±æ˜¯ä¸€ä¸ªäºŒç»´çš„å¤šé‡èƒŒåŒ…ã€‚<br>å’ŒP2çš„ä»£ç ä¸€æ ·ï¼Œå¯ä»¥æŠŠkä¸ªåŒºé—´ï¼ˆç‰©å“ç§ç±»ï¼‰è¿™ä¸€ç»´å‹æ‰ã€‚</p>
<dir style="text-align:right"><a href="/2016/08/20/JSOI2016-æé«˜2ç­-å•è°ƒé˜Ÿåˆ—åŠåŠ¨è§„ä¼˜åŒ–/adv1900.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>adv1900</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">const</span> </div><div class="line">    inf=<span class="number">1000000000</span>;</div><div class="line">    dir:<span class="keyword">array</span>[<span class="number">1</span>..<span class="number">4</span>,<span class="number">0</span>..<span class="number">1</span>] <span class="keyword">of</span> int=((-<span class="number">1</span>,<span class="number">0</span>),(<span class="number">1</span>,<span class="number">0</span>),(<span class="number">0</span>,-<span class="number">1</span>),(<span class="number">0</span>,<span class="number">1</span>));</div><div class="line"><span class="keyword">var</span> </div><div class="line">    map:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">210</span>,<span class="number">0</span>..<span class="number">210</span>] <span class="keyword">of</span> char;</div><div class="line">    f:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">210</span>,<span class="number">0</span>..<span class="number">210</span>] <span class="keyword">of</span> int;</div><div class="line">    q:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">100010</span>,<span class="number">0</span>..<span class="number">1</span>] <span class="keyword">of</span> int;</div><div class="line">    n,m,k,i,j,sx,sy,l,r,d,ans:int;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">dp</span><span class="params">(x,y,d,l:int)</span>;</span></div><div class="line"><span class="keyword">var</span> h,t,cnt:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    h:=<span class="number">1</span>;t:=<span class="number">0</span>;cnt:=<span class="number">1</span>;</div><div class="line">    <span class="keyword">while</span> (x&gt;<span class="number">0</span>) <span class="keyword">and</span> (y&gt;<span class="number">0</span>) <span class="keyword">and</span> (x&lt;=n) <span class="keyword">and</span> (y&lt;=m) <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">if</span> map[x,y]=<span class="string">'x'</span> <span class="keyword">then</span> <span class="keyword">begin</span> h:=<span class="number">1</span>;t:=<span class="number">0</span> <span class="keyword">end</span>;</div><div class="line">        <span class="keyword">while</span> (h&lt;=t) <span class="keyword">and</span> (q[t,<span class="number">0</span>]&lt;f[x,y]-cnt) <span class="keyword">do</span> dec(t);</div><div class="line">        inc(t);q[t,<span class="number">0</span>]:=f[x,y]-cnt;q[t,<span class="number">1</span>]:=cnt;</div><div class="line">        <span class="keyword">while</span> (h&lt;=t) <span class="keyword">and</span> (cnt-q[h,<span class="number">1</span>]&gt;l) <span class="keyword">do</span> inc(h);</div><div class="line">        f[x,y]:=q[h,<span class="number">0</span>]+cnt;</div><div class="line">        ans:=max(ans,f[x,y]);</div><div class="line">        inc(x,dir[d,<span class="number">0</span>]);inc(y,dir[d,<span class="number">1</span>]);inc(cnt);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'adv1900.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'adv1900.out'</span>);rewrite(output);</div><div class="line">    readln(n,m,sx,sy,k);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span> <span class="keyword">read</span>(map[i,j]);</div><div class="line">        readln;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    filldword(f,sizeof(f) <span class="keyword">div</span> <span class="number">4</span>,-inf);</div><div class="line">    f[sx,sy]:=<span class="number">0</span>;ans:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> k <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(l,r,d);</div><div class="line">        <span class="keyword">if</span> d=<span class="number">1</span> <span class="keyword">then</span> <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span> dp(n,j,d,r-l+<span class="number">1</span>);</div><div class="line">        <span class="keyword">if</span> d=<span class="number">2</span> <span class="keyword">then</span> <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span> dp(<span class="number">1</span>,j,d,r-l+<span class="number">1</span>);</div><div class="line">        <span class="keyword">if</span> d=<span class="number">3</span> <span class="keyword">then</span> <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> dp(j,m,d,r-l+<span class="number">1</span>);</div><div class="line">        <span class="keyword">if</span> d=<span class="number">4</span> <span class="keyword">then</span> <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> dp(j,<span class="number">1</span>,d,r-l+<span class="number">1</span>);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">write</span>(ans);</div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P4-Dividing"><a href="#P4-Dividing" class="headerlink" title="P4 Dividing"></a>P4 Dividing</h1><p>Marsha and Bill own a collection of marbles. They want to split the collection among themselves so that both receive an equal share of the marbles. This would be easy if all the marbles had the same value, because then they could just split the collection in half. But unfortunately, some of the marbles are larger, or more beautiful than others. So, Marsha and Bill start by assigning a value, a natural number between one and six, to each marble. Now they want to divide the marbles so that each of them gets the same total value. Unfortunately, they realize that it might be impossible to divide the marbles in this way (even if the total value of all marbles is even). For example, if there are one marble of value 1, one of value 3 and two of value 4, then they cannot be split into sets of equal value. So, they ask you to write a program that checks whether there is a fair partition of the marbles.</p>
<h2 id="æ ¼å¼-3"><a href="#æ ¼å¼-3" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-3"><a href="#è¾“å…¥æ ¼å¼-3" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>Each line in the input file describes one collection of marbles to be divided. The lines contain six non-negative integers n1 , . . . , n6 , where ni is the number of marbles of value i. So, the example from above would be described by the input-line â€œ1 0 1 2 0 0â€. The maximum total number of marbles will be 20000.<br>The last line of the input file will be â€œ0 0 0 0 0 0â€; do not process this line.</p>
<h3 id="è¾“å‡ºæ ¼å¼-3"><a href="#è¾“å‡ºæ ¼å¼-3" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h3><p>For each collection, output â€œCollection #k:â€, where k is the number of the test case, and then either â€œCan be divided.â€ or â€œCanâ€™t be divided.â€.<br>Output a blank line after each test case.</p>
<h2 id="æ ·ä¾‹-3"><a href="#æ ·ä¾‹-3" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-3"><a href="#æ ·ä¾‹è¾“å…¥-3" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>1 0 1 2 0 0<br>1 0 0 0 1 1<br>0 0 0 0 0 0 </p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-3"><a href="#æ ·ä¾‹è¾“å‡º-3" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>Collection #1:<br>Canâ€™t be divided.</p>
<p>Collection #2:<br>Can be divided.</p>
</blockquote>
<h2 id="é¢˜è§£-3"><a href="#é¢˜è§£-3" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>è¿™æ˜¯<a href="http://noi.openjudge.cn/ch0405/16/" target="_blank" rel="external">OJä¸Šçš„ä¸€é“é¢˜</a><br>é¢˜ç›®å¤§æ„æ˜¯ï¼šæ±‚ç»™å®šæ•°é‡çš„æ•°å­—1~6èƒ½å¦åˆ†æˆå’Œç›¸ç­‰çš„ä¸¤ç»„ã€‚<br>ä½“ç§¯ä¸º1..6çš„ç‰©å“åšå¤šé‡èƒŒåŒ…ï¼Œé—®è¾¾åˆ°ä½“ç§¯sum div 2æ˜¯å¦å¯è¡Œã€‚<br>åŒæ ·ç”¨å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–å³å¯ï¼Œåªä¸è¿‡è¿™é‡Œä¸è®¡ä»·å€¼ï¼Œdpæ•°ç»„å¯ä»¥å­˜booleanã€‚<br>å¯¹äºç»™å®šä½“ç§¯v=i+k*cï¼Œå¦‚æœf[i-1,v]=trueåˆ™å…¥é˜Ÿï¼Œæ¥ä¸‹æ¥æ— æ•ˆå…ƒç´ å‡ºé˜Ÿï¼Œä¹‹åå¦‚æœé˜Ÿåˆ—ä¸ä¸ºç©ºåˆ™f[i,v]:=true<br>å¦‚æœf[6,sum div 2]=trueå°±å¯ä»¥è¢«åˆ’åˆ†ã€‚</p>
<dir style="text-align:right"><a href="/2016/08/20/JSOI2016-æé«˜2ç­-å•è°ƒé˜Ÿåˆ—åŠåŠ¨è§„ä¼˜åŒ–/dividing.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>dividing.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    f:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">500010</span>] <span class="keyword">of</span> boolean;</div><div class="line">    q:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1000010</span>] <span class="keyword">of</span> int;</div><div class="line">    a:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">6</span>] <span class="keyword">of</span> int;</div><div class="line">    i,sum,cnt,d:int;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">print</span><span class="params">(i:int;b:boolean)</span>;</span></div><div class="line"><span class="keyword">begin</span></div><div class="line">    writeln(<span class="string">'Collection #'</span>,cnt,<span class="string">':'</span>);</div><div class="line">    <span class="keyword">if</span> b <span class="keyword">then</span> writeln(<span class="string">'Can be divided.'</span>) </div><div class="line">    <span class="keyword">else</span> writeln(<span class="string">'Can'</span>,chr(<span class="number">39</span>),<span class="string">'t be divided.'</span>);</div><div class="line">    writeln;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">dp</span><span class="params">(c,a:int)</span>;</span></div><div class="line"><span class="keyword">var</span> h,t,k,i:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">if</span> a=<span class="number">0</span> <span class="keyword">then</span> <span class="keyword">exit</span>;</div><div class="line">    d:=min(sum,d+c*a);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">0</span> <span class="keyword">to</span> c-<span class="number">1</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        h:=<span class="number">1</span>;t:=<span class="number">0</span>;k:=<span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span> i+k*c&lt;=d <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            <span class="keyword">if</span> f[i+k*c] <span class="keyword">then</span> <span class="keyword">begin</span> inc(t);q[t]:=k <span class="keyword">end</span>;</div><div class="line">            <span class="keyword">while</span> (h&lt;=t) <span class="keyword">and</span> (k-q[h]&gt;a) <span class="keyword">do</span> inc(h);</div><div class="line">            <span class="keyword">if</span> (h&lt;=t) <span class="keyword">then</span> f[i+k*c]:=true;</div><div class="line">            inc(k);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    cnt:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span> true <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        sum:=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> <span class="number">6</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            <span class="keyword">read</span>(a[i]);</div><div class="line">            inc(sum,a[i]*i);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">        <span class="keyword">if</span> sum=<span class="number">0</span> <span class="keyword">then</span> break;</div><div class="line">        inc(cnt);</div><div class="line">        <span class="keyword">if</span> odd(sum) <span class="keyword">then</span> <span class="keyword">begin</span> print(cnt,false);continue <span class="keyword">end</span>;</div><div class="line">        fillchar(f,sizeof(f),false);</div><div class="line">        f[<span class="number">0</span>]:=true;d:=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> <span class="number">6</span> <span class="keyword">do</span> dp(i,a[i]);</div><div class="line">        print(cnt,f[sum <span class="keyword">div</span> <span class="number">2</span>]);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;P1-è½°ç‚¸æœº&quot;&gt;&lt;a href=&quot;#P1-è½°ç‚¸æœº&quot; class=&quot;headerlink&quot; title=&quot;P1 è½°ç‚¸æœº&quot;&gt;&lt;/a&gt;P1 è½°ç‚¸æœº&lt;/h1&gt;&lt;p&gt;å¤§å±±ä¸¤ä¾§çš„Xå›½ä¸Yå›½çˆ†å‘äº†ä¸€åœºæˆ˜äº‰ï¼Œç”±äºå±±åŠ¿é™©å³»ï¼Œåªæœ‰ä¸€æ¡å±±è·¯å¯ä»¥é€šè¡Œï¼Œæ‰€ä»¥åŒæ–¹çš„å†›è¥éƒ½è®¾ç½®åœ¨è¿™ä¸€æ¡è·¯ä¸Šï¼ˆç›´çº¿ï¼‰ã€‚Xå›½ç§‘å­¦å®¶æ­£åœ¨ç ”åˆ¶ä¸€ç§é«˜å¨åŠ›è½°ç‚¸æœºï¼Œå…¶ç‚®å¼¹å¯ä»¥å¤§è§„æ¨¡ç²¾å‡†æ‘§æ¯ç›®æ ‡ã€‚ç”±äºåœ¨å‰çº¿è¿è¿å¤±åˆ©ï¼ŒXå›½é«˜å±‚å†³å®šæå‰å°†å…¶æŠ•å…¥ä½¿ç”¨ã€‚ä½†ç”±äºç ”å‘å°šæœªå®Œæˆï¼Œä»…æœ‰ä¸€æšå¯¼å¼¹å¯ä¾›ä½¿ç”¨ã€‚è¿™æšå¯¼å¼¹è‡³å¤šå¯ä»¥æ‘§æ¯Mä¸ªç›®æ ‡ï¼ˆåŒ…æ‹¬æ•Œæ–¹å†›è¥å’Œå·±æ–¹å†›è¥ï¼‰ï¼Œä½†è¿™äº›ç›®æ ‡å¿…é¡»æ˜¯è¿ç»­çš„ã€‚&lt;br&gt;åœ¨ä¸€ä¸ªæœˆé»‘é£é«˜çš„å¤œæ™šï¼ŒXå›½é«˜å±‚å†³å®šç”¨è¿™æ¶è½°ç‚¸æœºå‘èµ·çªè¢­ã€‚ä»–ä»¬é¢„å…ˆä¾¦æŸ¥åˆ°äº†å±±è·¯ä¸ŠåŒæ–¹å†›è¥å…±æœ‰Nä¸ªå†›è¥ï¼Œå¹¶æ¢æ¸…äº†æ¯ä¸ªå†›è¥çš„æƒ…å†µï¼Œä»–ä»¬è¯·ä½ å¸®ä»–ä»¬è®¾è®¡å‡ºè¿™æ¬¡çªè¢­æˆ˜æœæœ€å¤§çš„æ–¹æ¡ˆã€‚&lt;br&gt;Xå›½æˆ˜å›½çš„è®¡ç®—å…¬å¼ä¸ºï¼šæˆ˜æœ=æ•Œæ–¹æŸå¤±çš„æˆ˜æ–—åŠ›-å·±æ–¹æŸå¤±çš„æˆ˜æ–—åŠ›ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ ¼å¼&quot;&gt;&lt;a href=&quot;#æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;æ ¼å¼&quot;&gt;&lt;/a&gt;æ ¼å¼&lt;/h2&gt;&lt;h3 id=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å…¥æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å…¥æ ¼å¼&lt;/h3&gt;&lt;p&gt;ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•° N,M;&lt;br&gt;ç¬¬2~N+1è¡Œï¼Œæ¯è¡Œä¸€ä¸ªæ•´æ•°Aiï¼Œè¡¨ç¤ºç¬¬iä¸ªå†›è¥çš„å±æ€§å€¼ã€‚&lt;br&gt;abs(Ai)è¡¨ç¤ºç¬¬iä¸ªå†›è¥çš„æˆ˜æ–—åŠ›ã€‚&lt;br&gt;Ai&gt;0ï¼Œè¡¨æ˜è¯¥å†›è¥æ˜¯Yå›½çš„å†›è¥ï¼›&lt;br&gt;Ai&amp;lt;0ï¼Œè¡¨æ˜è¯¥å†›è¥æ˜¯Xå›½çš„å†›è¥ï¼›&lt;br&gt;Ai=0ï¼Œè¡¨æ˜è¯¥å†›è¥æ˜¯ç©ºçš„ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å‡ºæ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å‡ºæ ¼å¼&lt;/h2&gt;&lt;p&gt;ä»…ä¸€è¡Œï¼Œè¾“å‡ºä½¿çªè¢­æˆ˜æœæœ€å¤§çš„æ–¹æ¡ˆï¼ˆæŒ‰ç…§è¾“å…¥é¡ºåºè¾“å‡ºæ‰€æœ‰è½°ç‚¸ç›®æ ‡çš„å±æ€§å€¼ï¼‰ï¼Œæ¯ä¸¤ä¸ªå±æ€§å€¼ä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Problem Set" scheme="https://cothrax.github.io/categories/Problem-Set/"/>
    
    
      <category term="OI" scheme="https://cothrax.github.io/tags/OI/"/>
    
      <category term="JSOI" scheme="https://cothrax.github.io/tags/JSOI/"/>
    
      <category term="æ•°æ®ç»“æ„" scheme="https://cothrax.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="DP" scheme="https://cothrax.github.io/tags/DP/"/>
    
      <category term="å•è°ƒé˜Ÿåˆ—" scheme="https://cothrax.github.io/tags/%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>[JSOI2016] æé«˜2ç­ äºŒåˆ†ç­”æ¡ˆ</title>
    <link href="https://cothrax.github.io/2016/08/20/JSOI2016-%E6%8F%90%E9%AB%982%E7%8F%AD-%E4%BA%8C%E5%88%86%E7%AD%94%E6%A1%88/"/>
    <id>https://cothrax.github.io/2016/08/20/JSOI2016-æé«˜2ç­-äºŒåˆ†ç­”æ¡ˆ/</id>
    <published>2016-08-20T03:12:13.000Z</published>
    <updated>2016-08-20T03:59:49.801Z</updated>
    
    <content type="html"><![CDATA[<p>äºŒåˆ†çš„å‘ç‚¹åœ¨äºè§£çš„æ£€éªŒã€‚</p>
<table>
<thead>
<tr>
<th>é¢˜å·</th>
<th>æ£€éªŒæ–¹æ³•</th>
</tr>
</thead>
<tbody>
<tr>
<td>P1 P2</td>
<td>è´ªå¿ƒ</td>
</tr>
<tr>
<td>P3 P5</td>
<td>DP</td>
</tr>
<tr>
<td>P4</td>
<td>DFS</td>
</tr>
</tbody>
</table>
<h1 id="P1-æ™’è¡£æœ"><a href="#P1-æ™’è¡£æœ" class="headerlink" title="P1 æ™’è¡£æœ"></a>P1 æ™’è¡£æœ</h1><p>æ´—å®Œè¡£æœåï¼Œä½ è¦å¼„å¹²è¡£æœã€‚è¡£æœåœ¨è‡ªç„¶æ¡ä»¶ä¸‹ç”¨1ä¸ªå•ä½æ—¶é—´å¯ä»¥æ™’å¹²Aç‚¹æ¹¿åº¦ï¼Œç°åœ¨ä¹°äº†1å°çƒ˜è¡£æœºï¼Œä½¿ç”¨çƒ˜è¡£æœºå¯ä»¥è®©ä½ ç”¨1ä¸ªå•ä½çš„æ—¶é—´ä½¿1ä»¶è¡£æœé™¤å¼€è‡ªç„¶æ™’å¹²çš„Aç‚¹æ¹¿åº¦å¤–ï¼Œè¿˜å¯çƒ˜å¹²Bç‚¹æ¹¿åº¦ï¼Œä½†åœ¨1ä¸ªå•ä½çš„æ—¶é—´å†…åªèƒ½å¯¹1ä»¶è¡£æœä½¿ç”¨ã€‚<br>Nä»¶è¡£æœå› ä¸ºç§ç§åŸå› è€Œä¸ä¸€æ ·æ¹¿ï¼Œç°åœ¨å‘Šè¯‰ä½ æ¯ä»¶è¡£æœçš„æ¹¿åº¦ï¼Œè¦ä½ æ±‚å‡ºå¼„å¹²æ‰€æœ‰è¡£æœçš„æœ€å°‘æ—¶é—´ï¼ˆæ¹¿åº¦ä¸º0ä¸ºå¹²ï¼‰ã€‚</p>
<h2 id="æ ¼å¼"><a href="#æ ¼å¼" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼"><a href="#è¾“å…¥æ ¼å¼" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>è¾“å…¥æ–‡ä»¶ç¬¬ä¸€è¡ŒNï¼ŒAï¼ŒB;<br>æ¥ä¸‹æ¥1^è¡Œï¼Œæ¯è¡Œä¸€ä¸ªæ•°ï¼Œè¡¨ç¤ºè¡£æœçš„æ¹¿åº¦$a_i$ï¼ˆ<span>$1\leq a_i\leq500000ï¼Œ1\leq N\leq 500000$</span><!-- Has MathJax -->ï¼‰ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼"><a href="#è¾“å‡ºæ ¼å¼" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>è¾“å‡ºä¸€è¡Œä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å°‘æ—¶é—´ã€‚<br><a id="more"></a></p>
<h2 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥"><a href="#æ ·ä¾‹è¾“å…¥" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>3 2 1 1 2<br>3</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º"><a href="#æ ·ä¾‹è¾“å‡º" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>1</p>
</blockquote>
<h2 id="æç¤º"><a href="#æç¤º" class="headerlink" title="æç¤º"></a>æç¤º</h2><p>æ ·ä¾‹è§£æï¼š<br>ç¬¬1ä¸ªå•ä½æ—¶é—´å†…ï¼Œç”¨æœºå™¨å¤„ç†ç¬¬3ä»¶è¡£æœï¼Œæ­¤å¤–ï¼Œæ‰€æœ‰è¡£æœè‡ªç„¶æ™’å¹²2ã€‚</p>
<h2 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><dir style="text-align:right"><a href="/2016/08/20/JSOI2016-æé«˜2ç­-äºŒåˆ†ç­”æ¡ˆ/dry.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>dry.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    n,a,b,l,r,mid,ans,i:int;</div><div class="line">    f:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">500010</span>] <span class="keyword">of</span> int;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">check</span><span class="params">(x:int)</span>:</span>boolean;</div><div class="line"><span class="keyword">var</span> i,cnt:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    cnt:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">        <span class="keyword">if</span> x*a&lt;f[i] <span class="keyword">then</span> </div><div class="line">            inc(cnt,ceil((f[i]-x*a)/b));</div><div class="line">    check:=cnt&lt;=x;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'dry.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'dry.out'</span>);rewrite(output);</div><div class="line">    <span class="keyword">read</span>(n,a,b);</div><div class="line">    l:=<span class="number">0</span>;r:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(f[i]);</div><div class="line">        r:=max(f[i],r);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">while</span> l&lt;=r <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        mid:=(l+r) <span class="keyword">shr</span> <span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span> check(mid) <span class="keyword">then</span> <span class="keyword">begin</span> ans:=mid;r:=mid-<span class="number">1</span> <span class="keyword">end</span></div><div class="line">        <span class="keyword">else</span> l:=mid+<span class="number">1</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">write</span>(ans);</div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P2-æ”¶å…¥è®¡åˆ’"><a href="#P2-æ”¶å…¥è®¡åˆ’" class="headerlink" title="P2 æ”¶å…¥è®¡åˆ’"></a>P2 æ”¶å…¥è®¡åˆ’</h1><p>é«˜è€ƒç»“æŸåï¼ŒåŒå­¦ä»¬å¤§éƒ½æ‰¾åˆ°äº†ä¸€ä»½ä¸´æ—¶å·¥ä½œï¼Œæ¸´æœ›æŒ£å¾—ä¸€äº›é›¶ç”¨é’±ã€‚ä»ä»Šå¤©èµ·ï¼ŒMatrix67å°† è¿ç»­å·¥ä½œNå¤©(1â‰¤Nâ‰¤00000)ã€‚æ¯ä¸€å¤©æœ«ä»–å¯ä»¥é¢†å–å½“å¤©åŠå‰é¢è‹¥å¹²å¤©é‡Œæ²¡æœ‰é¢†å–çš„å·¥èµ„ï¼Œä½†ä»–æ€»å…± åªæœ‰M(l^M^N)æ¬¡é¢†å–å·¥èµ„çš„æœºä¼šã€‚Matrix67å·²ç»çŸ¥é“äº†åœ¨æ¥ä¸‹æ¥çš„è¿™Nå¤©é‡Œæ¯ä¸€å¤©ä»–å¯ä»¥èµšå¤šå°‘é’±ã€‚ä¸ºäº†é¿å…è‡ªå·±æ»¥ç”¨é›¶èŠ±é’±ï¼Œä»–å¸Œæœ›çŸ¥é“å¦‚ä½•å®‰æ’é¢†å–å·¥èµ„çš„æ—¶é—´æ‰èƒ½ä½¿å¾—é¢†åˆ°å·¥èµ„æœ€å¤šçš„é‚£ä¸€ æ¬¡å·¥èµ„æ•°é¢æœ€å°ã€‚<br>æ³¨æ„:Matrix67å¿…é¡»æ°å¥½é¢†å·¥èµ„Mæ¬¡ï¼Œä¸”éœ€è¦å°†æ‰€æœ‰çš„å·¥èµ„å…¨éƒ¨é¢†èµ°ï¼ˆå³æœ€åä¸€å¤©æœ«éœ€è¦é¢†ä¸€æ¬¡ å·¥èµ„ï¼‰ã€‚</p>
<h2 id="æ ¼å¼-1"><a href="#æ ¼å¼-1" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-1"><a href="#è¾“å…¥æ ¼å¼-1" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>è¾“å…¥æ–‡ä»¶ç¬¬ä¸€è¡ŒåŒ…æ‹¬2ä¸ªæ­£æ•´æ•°Nå’ŒMã€‚<br>ä»¥ä¸‹Nè¡Œï¼Œæ¯è¡Œä¸€ä¸ªä¸è¶…è¿‡10000æ­£æ•´æ•°ï¼Œä¾æ¬¡è¡¨ç¤ºæ¯ä¸€å¤©çš„è–ªæ°´ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼-1"><a href="#è¾“å‡ºæ ¼å¼-1" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>è¾“å‡ºæ–‡ä»¶ä»…ä¸€è¡Œä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºé¢†å–åˆ°çš„å·¥èµ„çš„æœ€å¤§å€¼æœ€å°æ˜¯å¤šå°‘ã€‚<br><!--more--></p>
<h2 id="æ ·ä¾‹-1"><a href="#æ ·ä¾‹-1" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-1"><a href="#æ ·ä¾‹è¾“å…¥-1" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>75<br>100<br>400<br>300<br>100<br>500<br>101<br>400</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-1"><a href="#æ ·ä¾‹è¾“å‡º-1" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>500</p>
</blockquote>
<h2 id="é¢˜è§£-1"><a href="#é¢˜è§£-1" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><dir style="text-align:right"><a href="/2016/08/20/JSOI2016-æé«˜2ç­-äºŒåˆ†ç­”æ¡ˆ/income.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>income.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    n,m,i,l,r,mid,ans:int;</div><div class="line">    a:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">100010</span>] <span class="keyword">of</span> int;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">check</span><span class="params">(x:int)</span>:</span>boolean;</div><div class="line"><span class="keyword">var</span> i,sum,cnt:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    sum:=<span class="number">0</span>;cnt:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">        <span class="keyword">if</span> a[i]&gt;x <span class="keyword">then</span> <span class="keyword">exit</span>(false) <span class="comment">//ä¸è¦å¿˜äº†è¿™ä¸ª</span></div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> sum+a[i]&gt;x <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            inc(cnt);sum:=a[i]</div><div class="line">        <span class="keyword">end</span> <span class="keyword">else</span></div><div class="line">            inc(sum,a[i]);</div><div class="line">    check:=(cnt+<span class="number">1</span>)&lt;=m;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'income.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'income.out'</span>);rewrite(output);</div><div class="line">    <span class="keyword">read</span>(n,m);</div><div class="line">    l:=<span class="number">0</span>;r:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(a[i]);</div><div class="line">        inc(r,a[i]);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">while</span> l&lt;=r <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        mid:=(l+r) <span class="keyword">shr</span> <span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span> check(mid) <span class="keyword">then</span> <span class="keyword">begin</span> ans:=mid;r:=mid-<span class="number">1</span> <span class="keyword">end</span></div><div class="line">        <span class="keyword">else</span> l:=mid+<span class="number">1</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">write</span>(ans);</div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P3-è½¯ä»¶å¼€å‘"><a href="#P3-è½¯ä»¶å¼€å‘" class="headerlink" title="P3 è½¯ä»¶å¼€å‘"></a>P3 è½¯ä»¶å¼€å‘</h1><p>ä¸€ä¸ªè½¯ä»¶å¼€å‘å…¬å¸åŒæ—¶è¦å¼€å‘ä¸¤ä¸ªè½¯ä»¶ï¼Œå¹¶ä¸”è¦åŒæ—¶äº¤ä»˜ç»™ç”¨æˆ·ï¼Œç°åœ¨å…¬å¸ä¸ºäº†å°½å¿«å®Œæˆè¿™ä¸€ ä»»åŠ¡ï¼Œå°†æ¯ä¸ªè½¯ä»¶åˆ’åˆ†æˆmä¸ªæ¨¡å—ï¼Œç”±å…¬å¸é‡Œçš„æŠ€æœ¯äººå‘˜åˆ†å·¥å®Œæˆï¼Œæ¯ä¸ªæŠ€æœ¯äººå‘˜å®ŒæˆåŒä¸€è½¯ä»¶çš„ ä¸åŒæ¨¡å—çš„æ‰€ç”¨çš„å¤©æ•°æ˜¯ç›¸åŒçš„ï¼Œå¹¶ä¸”æ˜¯å·²çŸ¥çš„ï¼Œä½†å®Œæˆä¸åŒè½¯ä»¶çš„ä¸€ä¸ªæ¨¡å—çš„æ—¶é—´æ˜¯ä¸åŒçš„ï¼Œæ¯ ä¸ªæŠ€æœ¯äººå‘˜åœ¨åŒä¸€æ—¶åˆ»åªèƒ½åšä¸€ä¸ªæ¨¡å—ï¼Œä¸€ä¸ªæ¨¡å—åªèƒ½ç”±ä¸€ä¸ªäººç‹¬ç«‹å®Œæˆè€Œä¸èƒ½ç”±å¤šäººååŒå®Œæˆã€‚ ä¸€ä¸ªæŠ€æœ¯äººå‘˜åœ¨æ•´ä¸ªå¼€å‘æœŸå†…å®Œæˆä¸€ä¸ªæ¨¡å—ä»¥åå¯ä»¥æ¥ç€åšä»»ä¸€è½¯ä»¶çš„ä»»ä¸€æ¨¡å—ã€‚å†™ä¸€ä¸ªç¨‹åºï¼Œæ±‚ å‡ºå…¬å¸æœ€æ—©èƒ½åœ¨ä»€ä¹ˆæ—¶å€™äº¤ä»˜è½¯ä»¶ã€‚</p>
<h2 id="æ ¼å¼-2"><a href="#æ ¼å¼-2" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-2"><a href="#è¾“å…¥æ ¼å¼-2" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>è¾“å…¥æ•°æ®å…±è‹¥å¹²è¡Œã€‚ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªç”±ç©ºæ ¼éš”å¼€çš„æ•´æ•°nå’Œmï¼Œå…¶ä¸­1â‰¤n,mâ‰¤100ã€‚æ¥ä¸‹ æ¥çš„nè¡Œæ¯è¡ŒåŒ…å«ä¸¤ä¸ªç”¨ç©ºæ ¼éš”å¼€çš„æ•´æ•°d1å’Œd2, d1è¡¨ç¤ºè¯¥æŠ€æœ¯äººå‘˜å®Œæˆç¬¬ä¸€ä¸ªè½¯ä»¶ä¸­çš„ä¸€ä¸ªæ¨¡å—æ‰€éœ€çš„å¤©æ•°ï¼Œd2è¡¨ç¤ºè¯¥æŠ€æœ¯äººå‘˜å®Œæˆç¬¬äºŒä¸ªè½¯ä»¶ä¸­çš„ä¸€ä¸ªæ¨¡å—æ‰€éœ€çš„å¤©æ•°ï¼Œå…¶ä¸­1â‰¤d1,d2â‰¤100 è¾“å‡ºæ ¼å¼ï¼š<br>è¾“å‡ºæ•°æ®ä»…æœ‰ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°dï¼Œè¡¨ç¤ºå…¬å¸æœ€æ—©èƒ½äºdå¤©åäº¤ä»˜è½¯ä»¶ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼-2"><a href="#è¾“å‡ºæ ¼å¼-2" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>è¾“å‡ºæ–‡ä»¶ä»…ä¸€è¡Œä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºé¢†å–åˆ°çš„å·¥èµ„çš„æœ€å¤§å€¼æœ€å°æ˜¯å¤šå°‘ã€‚<br><!--more--></p>
<h2 id="æ ·ä¾‹-2"><a href="#æ ·ä¾‹-2" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-2"><a href="#æ ·ä¾‹è¾“å…¥-2" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>3 20<br>1 1<br>2 4<br>1 6</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-2"><a href="#æ ·ä¾‹è¾“å‡º-2" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>18</p>
</blockquote>
<h2 id="æç¤º-1"><a href="#æç¤º-1" class="headerlink" title="æç¤º"></a>æç¤º</h2><p>æœ€å¿«çš„æ–¹æ¡ˆæ˜¯ç¬¬ä¸€ä¸ªæŠ€æœ¯äººå‘˜å®Œæˆç¬¬äºŒä¸ªè½¯ä»¶çš„18ä¸ªæ¨¡å—ï¼Œç”¨æ—¶18å¤©ï¼Œç¬¬ä¸‰ä¸ªæŠ€æœ¯äººå‘˜å®Œæˆ ç¬¬ä¸€ä¸ªè½¯ä»¶çš„18ä¸ªæ¨¡å—ï¼Œç”¨æ—¶18å¤©ï¼Œå…¶ä½™çš„æ¨¡å—ç”±ç¬¬äºŒä¸ªæŠ€æœ¯äººå‘˜å®Œæˆï¼Œç”¨æ—¶12å¤©ï¼Œåšå®Œæ‰€æœ‰æ¨¡ å—éœ€è¦18å¤©ã€‚å¦‚æœç¬¬ä¸€ä¸ªæŠ€æœ¯äººå‘˜å®Œæˆç¬¬äºŒä¸ªè½¯ä»¶çš„17ä¸ªæ¨¡å—ï¼Œç¬¬ä¸‰ä¸ªæŠ€æœ¯äººå‘˜å®Œæˆç¬¬ä¸€ä¸ªè½¯ä»¶ çš„17ä¸ªæ¨¡å—ï¼Œå…¶ä½™çš„æ¨¡å—ç”±ç¬¬äºŒä¸ªæŠ€æœ¯äººå‘˜å®Œæˆï¼Œéœ€è¦ç”¨æ—¶18å¤©ï¼Œåšå®Œæ‰€æœ‰æ¨¡å—ä»ç„¶éœ€è¦18å¤©ï¼Œ æ‰€ä»¥å°‘äº18å¤©ä¸å¯èƒ½åšå®Œæ‰€æœ‰æ¨¡å—ã€‚</p>
<h2 id="é¢˜è§£-2"><a href="#é¢˜è§£-2" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>ç»™å®šæ—¶é—´xï¼Œè®°f[i,j]ä¸ºå‰iä¸ªäººå®Œæˆäº†è½¯ä»¶1çš„jä¸ªæ¨¡å—åï¼Œèƒ½å®Œæˆè½¯ä»¶2çš„æ¨¡å—çš„æœ€å¤§æ•°é‡ï¼Œç„¶åDPã€‚</p>
<dir style="text-align:right"><a href="/2016/08/20/JSOI2016-æé«˜2ç­-äºŒåˆ†ç­”æ¡ˆ/software.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>software.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">const</span> inf=<span class="number">100000000</span>;</div><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    n,m,i,l,r,mid,ans:int;</div><div class="line">    f:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">101</span>] <span class="keyword">of</span> int;</div><div class="line">    d:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">101</span>,<span class="number">0</span>..<span class="number">1</span>] <span class="keyword">of</span> int;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">check</span><span class="params">(x:int)</span>:</span>boolean;</div><div class="line"><span class="keyword">var</span> i,j,k,maxs:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    filldword(f,sizeof(f) <span class="keyword">div</span> <span class="number">4</span>,-inf);</div><div class="line">    f[<span class="number">0</span>]:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        maxs:=x <span class="keyword">div</span> d[i,<span class="number">0</span>];</div><div class="line">        <span class="keyword">for</span> j:=m <span class="keyword">downto</span> <span class="number">0</span> <span class="keyword">do</span> </div><div class="line">            <span class="keyword">for</span> k:=<span class="number">0</span> <span class="keyword">to</span> min(maxs,j) <span class="keyword">do</span></div><div class="line">                f[j]:=max(f[j],f[j-k]+(x-k*d[i,<span class="number">0</span>]) <span class="keyword">div</span> d[i,<span class="number">1</span>]);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    check:=f[m]&gt;=m;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'software.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'software.out'</span>);rewrite(output);</div><div class="line">    <span class="keyword">read</span>(n,m);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">read</span>(d[i,<span class="number">0</span>],d[i,<span class="number">1</span>]);</div><div class="line">    l:=<span class="number">1</span>;r:=inf;</div><div class="line">    <span class="keyword">while</span> l&lt;=r <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        mid:=(l+r) <span class="keyword">shr</span> <span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span> check(mid) <span class="keyword">then</span> <span class="keyword">begin</span> ans:=mid;r:=mid-<span class="number">1</span> <span class="keyword">end</span></div><div class="line">        <span class="keyword">else</span> l:=mid+<span class="number">1</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">write</span>(ans);</div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P4-æ¶è®¾ç”µè¯çº¿"><a href="#P4-æ¶è®¾ç”µè¯çº¿" class="headerlink" title="P4 æ¶è®¾ç”µè¯çº¿"></a>P4 æ¶è®¾ç”µè¯çº¿</h1><p>FJæ‰“ç®—å°†ç”µè¯çº¿å¼•åˆ°è‡ªå·±çš„å†œåœºï¼Œä½†ç”µä¿¡å…¬å¸å¹¶ä¸æ‰“ç®—ä¸ºä»–æä¾›å…è´¹æœåŠ¡ã€‚äºæ˜¯ï¼ŒHå¿…é¡»ä¸ºæ­¤ å‘ç”µä¿¡å…¬å¸æ”¯ä»˜ä¸€å®šçš„è´¹ç”¨ã€‚<br>FJçš„å†œåœºå‘¨å›´åˆ†å¸ƒç€N(1â‰¤Nâ‰¤1000)æ ¹æŒ‰1..Né¡ºæ¬¡ç¼–å·çš„åºŸå¼ƒçš„ç”µè¯çº¿æ†ï¼Œä»»æ„ä¸¤æ ¹ç”µè¯çº¿æ†é—´ éƒ½æ²¡æœ‰ç”µè¯çº¿ç›¸è¿ã€‚ä¸€å…±P(1â‰¤Pâ‰¤1OOOO)å¯¹ç”µè¯çº¿æ†é—´å¯ä»¥æ‹‰ç”µè¯çº¿ï¼Œå…¶ä½™çš„é‚£äº›ç”±äºéš”å¾—å¤ªè¿œè€Œæ—  æ³•è¢«è¿æ¥ã€‚ç¬¬iå¯¹ç”µè¯çº¿æ†çš„ä¸¤ä¸ªç«¯ç‚¹åˆ†åˆ«ä¸ºAiã€Biï¼Œå®ƒä»¬é—´çš„è·ç¦»ä¸ºLi(1â‰¤Liâ‰¤1,000,000)ã€‚æ•°æ®ä¸­ ä¿è¯æ¯å¯¹(Aiï¼ŒBi)æœ€å¤šåªå‡ºç°1æ¬¡ã€‚ç¼–å·ä¸º1çš„ç”µè¯çº¿æ†å·²ç»æ¥å…¥äº†å…¨å›½çš„ç”µè¯ç½‘ç»œï¼Œæ•´ä¸ªå†œåœºçš„ ç”µè¯çº¿å…¨éƒ½è¿åˆ°äº†ç¼–å·ä¸ºNçš„ç”µè¯çº¿æ†ä¸Šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒFJçš„ä»»åŠ¡ä»…ä»…æ˜¯æ‰¾ä¸€æ¡å°†1å·å’ŒNå·ç”µè¯çº¿ æ†è¿èµ·æ¥çš„è·¯å¾„ï¼Œå…¶ä½™çš„ç”µè¯çº¿æ†å¹¶ä¸ä¸€å®šè¦è¿å…¥ç”µè¯ç½‘ç»œã€‚<br>ç»è¿‡è°ˆåˆ¤ï¼Œç”µä¿¡å…¬å¸æœ€ç»ˆåŒæ„å…è´¹ä¸ºFJè¿ç»“K((0â‰¤K\&lt;N)å¯¹ç”±HæŒ‡å®šçš„ç”µè¯çº¿æ†ã€‚å¯¹äºæ­¤å¤–çš„é‚£ äº›ç”µè¯çº¿ï¼Œnéœ€è¦ä¸ºå®ƒä»¬ä»˜çš„è´¹ç”¨ï¼Œç­‰äºå…¶ä¸­æœ€é•¿çš„ç”µè¯çº¿çš„é•¿åº¦ï¼ˆæ¯æ ¹ç”µè¯çº¿ä»…è¿ç»“ä¸€å¯¹ç”µè¯çº¿ æ†ï¼‰ã€‚å¦‚æœéœ€è¦è¿ç»“çš„ç”µè¯çº¿æ†ä¸è¶…è¿‡Kå¯¹ï¼Œé‚£ä¹ˆFJçš„æ€»æ”¯å‡ºä¸º0ã€‚<br>è¯·ä½ è®¡ç®—ä¸€ä¸‹ï¼ŒFJæœ€å°‘éœ€è¦åœ¨ç”µè¯çº¿ä¸ŠèŠ±å¤šå°‘é’±ã€‚</p>
<h2 id="æ ¼å¼-3"><a href="#æ ¼å¼-3" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-3"><a href="#è¾“å…¥æ ¼å¼-3" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>è¾“å…¥æ–‡ä»¶ç¬¬1è¡Œ:3ä¸ªç”¨ç©ºæ ¼éš”å¼€çš„æ•´æ•°ï¼šN, Pï¼Œä»¥åŠKã€‚<br>ç¬¬2..P+1è¡Œï¼šç¬¬i+1è¡Œä¸º3ä¸ªç”¨ç©ºæ ¼éš”å¼€çš„æ•´æ•°ï¼šAiï¼ŒBiï¼ŒLiã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼-3"><a href="#è¾“å‡ºæ ¼å¼-3" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>è¾“å‡ºæ–‡ä»¶ä¸€è¡Œä¸€ä¸ªæ•´æ•°ï¼Œä¸ºFJè¿™é¡¹å·¥ç¨‹ä¸Šçš„æœ€å°æ”¯å‡ºã€‚å¦‚æœä»»åŠ¡ä¸å¯èƒ½å®Œæˆï¼Œè¾“å‡º-1ã€‚<br><!--more--></p>
<h2 id="æ ·ä¾‹-3"><a href="#æ ·ä¾‹-3" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-3"><a href="#æ ·ä¾‹è¾“å…¥-3" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>5 7 1<br>1 2 5<br>3 1 4<br>2 4 8<br>3 2 3<br>5 2 9<br>3 4 7<br>4 5 6</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-3"><a href="#æ ·ä¾‹è¾“å‡º-3" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>4</p>
</blockquote>
<h2 id="æç¤º-2"><a href="#æç¤º-2" class="headerlink" title="æç¤º"></a>æç¤º</h2><p>ä¸€å…±æœ‰5æ ¹åºŸå¼ƒçš„ç”µè¯çº¿æ†ã€‚ç”µè¯çº¿æ†1ä¸èƒ½ç›´æ¥ä¸ç”µè¯çº¿æ†4ã€5ç›¸è¿ã€‚ç”µè¯çº¿æ†5ä¸èƒ½ç›´æ¥ ä¸ç”µè¯çº¿æ†1ã€3ç›¸è¿ã€‚å…¶ä½™æ‰€æœ‰ç”µè¯çº¿æ†é—´å‡å¯æ‹‰ç”µè¯çº¿ã€‚ç”µä¿¡å…¬å¸å¯ä»¥å…è´¹ä¸ºFJè¿ç»“ä¸€å¯¹ç”µè¯ çº¿æ†ã€‚<br>FJé€‰æ‹©å¦‚ä¸‹çš„è¿ç»“æ–¹æ¡ˆï¼š1-&gt;3; 3-&gt;2; 2-&gt;5,è¿™3å¯¹ç”µè¯çº¿æ†é—´éœ€è¦çš„ç”µè¯çº¿çš„é•¿åº¦åˆ†åˆ«ä¸º4ã€ 3ã€9ã€‚FJè®©ç”µä¿¡å…¬å¸æä¾›é‚£æ¡é•¿åº¦ä¸º9çš„ç”µè¯çº¿ï¼Œäºæ˜¯ï¼Œä»–æ‰€éœ€è¦è´­ä¹°çš„ç”µè¯çº¿çš„æœ€å¤§é•¿åº¦ä¸º4ã€‚</p>
<h2 id="é¢˜è§£-3"><a href="#é¢˜è§£-3" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>æœ€å°åŒ–æœ€å¤§å€¼ï¼ŒäºŒåˆ†ç­”æ¡ˆï¼Œä¸èƒ½å†è£¸äº†ã€‚<br>ç»™å®šè´¹ç”¨xï¼Œä»1å¼€å§‹dfsï¼Œè·ç¦»å°äºxçš„è¾¹ç›´æ¥èµ°è¿‡å»ï¼Œå¤§äºçš„è¯é€’å½’ç»Ÿè®¡æ•°é‡jï¼Œå½“j&gt;kæ—¶exitã€‚<br>æ³¨æ„åˆ¤é‡æ•°ç»„ä¸ºused[n,k]è€Œä¸æ˜¯used[n]<br>å¯ä»¥ç”¨flagè®°å½•ä¸€ä¸‹æœ‰æ²¡æœ‰èµ°åˆ°nï¼Œå¦‚æœæœ‰ç›´æ¥exitå°±å¥½ã€‚</p>
<dir style="text-align:right"><a href="/2016/08/20/JSOI2016-æé«˜2ç­-äºŒåˆ†ç­”æ¡ˆ/phoneline.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>phoneline.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">type</span></div><div class="line">    int=longint;</div><div class="line">    edge=<span class="keyword">record</span> t,next,w:int <span class="keyword">end</span>;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    g:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">20010</span>] <span class="keyword">of</span> edge;</div><div class="line">    head:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1010</span>] <span class="keyword">of</span> int;</div><div class="line">    used:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1010</span>,<span class="number">0</span>..<span class="number">1010</span>] <span class="keyword">of</span> boolean;</div><div class="line">    n,p,k,i,l,r,mid,ans,f0,t0,w0:int;</div><div class="line">    flag:boolean;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">add</span><span class="params">(f,t,w:int)</span>;</span></div><div class="line"><span class="keyword">var</span> m:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    inc(head[<span class="number">0</span>]);m:=head[<span class="number">0</span>];</div><div class="line">    g[m].t:=t;g[m].w:=w;</div><div class="line">    g[m].next:=head[f];head[f]:=m;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">dfs</span><span class="params">(v,j:int)</span>;</span></div><div class="line"><span class="keyword">var</span> i,u:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">if</span> j&gt;k <span class="keyword">then</span> <span class="keyword">exit</span>;</div><div class="line">    <span class="keyword">if</span> v=n <span class="keyword">then</span> <span class="keyword">begin</span> flag:=true;<span class="keyword">exit</span> <span class="keyword">end</span>;</div><div class="line">    used[v,j]:=true;</div><div class="line">    i:=head[v];</div><div class="line">    <span class="keyword">while</span> i&lt;&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        u:=g[i].t;</div><div class="line">        <span class="keyword">if</span> (g[i].w&lt;=mid) <span class="keyword">and</span> <span class="keyword">not</span> used[u,j] <span class="keyword">then</span> dfs(u,j);</div><div class="line">        <span class="keyword">if</span> (g[i].w&gt;mid) <span class="keyword">and</span> <span class="keyword">not</span> used[u,j+<span class="number">1</span>] <span class="keyword">then</span> dfs(u,j+<span class="number">1</span>);</div><div class="line">        <span class="keyword">if</span> flag <span class="keyword">then</span> <span class="keyword">exit</span>;</div><div class="line">        i:=g[i].next;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">check</span><span class="params">()</span>:</span>boolean;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    fillchar(used,sizeof(used),false);</div><div class="line">    flag:=false;</div><div class="line">    dfs(<span class="number">1</span>,<span class="number">0</span>);</div><div class="line">    check:=flag;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'phoneline.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'phoneline.out'</span>);rewrite(output);</div><div class="line">    <span class="keyword">read</span>(n,p,k);</div><div class="line">    l:=<span class="number">0</span>;r:=<span class="number">0</span>;</div><div class="line">    fillchar(head,sizeof(head),<span class="number">0</span>);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> p <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(f0,t0,w0);</div><div class="line">        add(f0,t0,w0);add(t0,f0,w0);</div><div class="line">        r:=max(r,w0);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    ans:=-<span class="number">1</span>;</div><div class="line">    <span class="keyword">while</span> l&lt;=r <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        mid:=(l+r) <span class="keyword">shr</span> <span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span> check() <span class="keyword">then</span> <span class="keyword">begin</span> ans:=mid;r:=mid-<span class="number">1</span> <span class="keyword">end</span></div><div class="line">        <span class="keyword">else</span> l:=mid+<span class="number">1</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">write</span>(ans);</div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P5-åœ£è¯èŠ‚çš„èŠ±ç¯"><a href="#P5-åœ£è¯èŠ‚çš„èŠ±ç¯" class="headerlink" title="P5 åœ£è¯èŠ‚çš„èŠ±ç¯"></a>P5 åœ£è¯èŠ‚çš„èŠ±ç¯</h1><p>åœ£è¯èŠ‚å°±è¦åˆ°äº†ã€‚ç°åœ¨æœ‰ä¸ªå›°éš¾çš„ä»»åŠ¡æ‘†åœ¨ä½ çœ¼å‰â€”â€”è£…é¥°æˆ¿é—´ã€‚ä½ æ‰‹å¤´ä¸Šæœ‰næœµå¤§å°ç›¸åŒçš„ èŠ±ï¼Œç¬¬iæœµèŠ±çš„é‡é‡ä¸ºWiã€‚ç°åœ¨æ‰“ç®—ç”¨ä¸€æ ¹ç»³å°†è¿™næœµèŠ±æŒ‰é¡ºåºç©¿èµ·æ¥ï¼ŒæŒ‚åœ¨å¤©èŠ±æ¿ä¸Šã€‚ç»³å­è¢«m ä¸ªç‚¹å›ºå®šï¼Œä¹Ÿå°±æ˜¯ç»³å­çš„ä¸€å¤´è¢«å›ºå®šåœ¨1å·ç‚¹ï¼Œå¦å¤–ä¸€å¤´å›ºå®šåœ¨må·ç‚¹ï¼Œä¸­é—´éƒ¨åˆ†éœ€è¦å›ºå®šåœ¨å‰©ä½™ çš„ç‚¹ã€‚å½“ç„¶ï¼Œè£…é¥°è¿˜æœ‰ä¸€äº›è§„åˆ™è¦æ³¨æ„ï¼š<br>1ã€æ¯ä¸€æ®µéœ€è¦åŒ…å«é0çš„å¶æ•°ä¸ªèŠ±æœµã€‚æ­£å› å¦‚æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ¯ä¸€æ®µåˆ’åˆ†ä¸ºä¸¤ä¸ªåŠæ®µã€‚<br>2ã€ä¸ºäº†å‡å°ä½ çš„å®¢äººæ’åˆ°èŠ±ç¯çš„å¯èƒ½ï¼ŒèŠ±ç¯ä¸èƒ½æŒ‚çš„å¤ªä½ï¼šä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªåŠæ®µä¸èƒ½è¶…è¿‡dæœµèŠ±ã€‚<br>3ã€æœ€åï¼Œä½ éœ€è¦è®©æ‰€æœ‰åŠæ®µçš„é‡é‡çš„æœ€å¤§å€¼æœ€å°ã€‚<br>ä¸‹å›¾æ˜¯ä¸€ä¸ªä¸é”™çš„å®‰æ’æ–¹æ¡ˆï¼Œåœˆä¸­çš„æ•°å­—ä»£è¡¨èŠ±æœµçš„é‡é‡ã€‚<br><img src="/2016/08/20/JSOI2016-æé«˜2ç­-äºŒåˆ†ç­”æ¡ˆ/t.jpg" alt="t.jpg" title=""></p>
<h2 id="æ ¼å¼-4"><a href="#æ ¼å¼-4" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-4"><a href="#è¾“å…¥æ ¼å¼-4" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>è¾“å…¥æ–‡ä»¶ç¬¬ä¸€è¡ŒåŒ…å«ä¸‰ä¸ªæ­£æ•´æ•°n, må’Œd( 1â‰¤1â‰¤15000,2â‰¤mâ‰¤10000,1â‰¤dâ‰¤2000,ä¸”n*dâ‰¤5000000)ã€‚<br>æ¥ä¸‹æ¥ä¸€è¡ŒåŒ…å«nä¸ªæ­£æ•´æ•°w1ï¼Œw2, â€¦ï¼Œwn (lâ‰¤wâ‰¤1OOOO)ï¼Œä»£è¡¨å¯¹åº”èŠ±çš„é‡é‡ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼-4"><a href="#è¾“å‡ºæ ¼å¼-4" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>è¾“å‡ºä¸€è¡Œä¸€ä¸ªæ•´æ•°ï¼Œä»£è¡¨æœ€å°çš„æ‰€æœ‰åŠæ®µé‡é‡çš„æœ€å¤§å€¼ã€‚å¦‚æœæ²¡æœ‰æ–¹æ¡ˆæ»¡è¶³æ¡ä»¶ï¼Œé‚£ä¹ˆä½ åªè¦ è¾“å‡ºâ€œBADâ€ï¼ˆä¸åŒ…æ‹¬å¼•å·ï¼‰ã€‚</p>
<h2 id="æ ·ä¾‹-4"><a href="#æ ·ä¾‹-4" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-4"><a href="#æ ·ä¾‹è¾“å…¥-4" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>4 3 10 10 10<br>20 20</p>
<p>6 4 10<br>1 1 100 100 1 1</p>
<p>6 3 10<br>1 1 100 100 1 1</p>
<p>1 2 2<br>333</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-4"><a href="#æ ·ä¾‹è¾“å‡º-4" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>20</p>
<p>100</p>
<p>200</p>
<p>BAD</p>
</blockquote>
<h2 id="é¢˜è§£-4"><a href="#é¢˜è§£-4" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>åˆè§æœ€å°åŒ–æœ€å¤§å€¼ã€‚<br>é¦–å…ˆï¼Œnä¸ºå¥‡æ•°æ˜¾ç„¶æ˜¯æ— è§£çš„ã€‚å› ä¸ºé¢˜ä¸­è¦æ±‚å›ºå®šç‚¹<strong>æ°å¥½</strong>mä¸ªï¼Œä¸”ç¯ä¸èƒ½ä¸º0ï¼Œé‚£ä¹ˆå¦‚æœ<span>$n&lt;2*(m-1)$</span><!-- Has MathJax -->ï¼Œä¹Ÿæ˜¯æ— è§£çš„ã€‚<br>ç„¶åäºŒåˆ†æœ€å¤§é‡é‡ã€‚<br>å¯ä»¥DPåšï¼Œf[i]è¡¨ç¤ºå‰i<strong>å¯¹</strong>èŠ±æœ€å°‘éœ€è¦åˆ†æˆå‡ æ®µï¼Œäºæ˜¯<span>$f[i]=max\{f[j]+1\}$</span><!-- Has MathJax -->ã€‚ç„¶å<span>$f[n]&lt;m$</span><!-- Has MathJax -->çš„è¯å°±è¿”å›true<br>ä½†è¿™æ ·å†™æ ·ä¾‹3æ˜¯è¿‡ä¸äº†çš„ï¼Œå› ä¸ºå°†æ•´æ®µåˆ’åˆ†æˆ1ä¸ªåŒºé—´ç¬¦åˆç­”æ¡ˆ102ï¼Œä½†1ä¸ªåŒºé—´æ˜¯ä¸èƒ½è¢«æˆªæˆm-1=2ä¸ªåŒºé—´çš„ã€‚<br>å®é™…ä¸Šï¼Œå¦‚æœkä¸ªåŒºé—´å¯è¡Œï¼Œé‚£ä¹ˆk+2ä¸ªåŒºé—´æ˜¯å¯è¡Œçš„ã€‚<br>æ‰€ä»¥åˆ†å¥‡å¶è®¨è®ºï¼Œf[n,0..1]ï¼Œ0ä¸ºå¶æ•°æ®µï¼Œ1ä¸ºå¥‡æ•°æ®µ<br><span>$f[i,0]=max\{f[j,1]+1\}$</span><!-- Has MathJax --><br><span>$f[i,1]=max\{f[j,0]+1\}$</span><!-- Has MathJax --></p>
<dir style="text-align:right"><a href="/2016/08/20/JSOI2016-æé«˜2ç­-äºŒåˆ†ç­”æ¡ˆ/flow.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>flow.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">const</span> inf=<span class="number">1000000000</span>;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    n,m,d,i,l,r,mid,ans:int;</div><div class="line">    w,s:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">15010</span>] <span class="keyword">of</span> int;</div><div class="line">    f:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">15010</span>,<span class="number">0</span>..<span class="number">1</span>] <span class="keyword">of</span> int;</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">check</span><span class="params">(x:int)</span>:</span>boolean;</div><div class="line"><span class="keyword">var</span> i,j:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    filldword(f,sizeof(f) <span class="keyword">div</span> <span class="number">4</span>,inf);</div><div class="line">    f[<span class="number">0</span>,<span class="number">0</span>]:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">div</span> <span class="number">2</span> <span class="keyword">do</span></div><div class="line">        <span class="keyword">for</span> j:=i-<span class="number">1</span> <span class="keyword">downto</span> max(i-d,<span class="number">0</span>) <span class="keyword">do</span></div><div class="line">            <span class="keyword">if</span> max(s[<span class="number">2</span>*j+i-j]-s[<span class="number">2</span>*j],s[<span class="number">2</span>*i]-s[<span class="number">2</span>*j+i-j])&lt;=x <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">                f[i,<span class="number">0</span>]:=min(f[i,<span class="number">0</span>],f[j,<span class="number">1</span>]+<span class="number">1</span>);</div><div class="line">                f[i,<span class="number">1</span>]:=min(f[i,<span class="number">1</span>],f[j,<span class="number">0</span>]+<span class="number">1</span>);</div><div class="line">            <span class="keyword">end</span>;</div><div class="line">    check:=f[n <span class="keyword">div</span> <span class="number">2</span>,(m-<span class="number">1</span>) <span class="keyword">and</span> <span class="number">1</span>]&lt;m;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'flow.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'flow.out'</span>);rewrite(output);</div><div class="line">    <span class="keyword">read</span>(n,m,d);</div><div class="line">    <span class="keyword">if</span> odd(n) <span class="keyword">or</span> (n&lt;<span class="number">2</span>*m-<span class="number">2</span>) <span class="keyword">then</span> <span class="keyword">begin</span> <span class="keyword">write</span>(<span class="string">'BAD'</span>);halt <span class="keyword">end</span>;</div><div class="line">    l:=<span class="number">0</span>;r:=<span class="number">0</span>;s[<span class="number">0</span>]:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(w[i]);</div><div class="line">        inc(r,w[i]);</div><div class="line">        s[i]:=s[i-<span class="number">1</span>]+w[i];</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    </div><div class="line">    ans:=-<span class="number">1</span>;</div><div class="line">    <span class="keyword">while</span> l&lt;=r <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        mid:=(l+r) <span class="keyword">shr</span> <span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span> check(mid) <span class="keyword">then</span> <span class="keyword">begin</span> ans:=mid;r:=mid-<span class="number">1</span> <span class="keyword">end</span></div><div class="line">        <span class="keyword">else</span> l:=mid+<span class="number">1</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">if</span> ans=-<span class="number">1</span> <span class="keyword">then</span> <span class="keyword">write</span>(<span class="string">'BAD'</span>) <span class="keyword">else</span> <span class="keyword">write</span>(ans);</div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;äºŒåˆ†çš„å‘ç‚¹åœ¨äºè§£çš„æ£€éªŒã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é¢˜å·&lt;/th&gt;
&lt;th&gt;æ£€éªŒæ–¹æ³•&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;P1 P2&lt;/td&gt;
&lt;td&gt;è´ªå¿ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;P3 P5&lt;/td&gt;
&lt;td&gt;DP&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;P4&lt;/td&gt;
&lt;td&gt;DFS&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h1 id=&quot;P1-æ™’è¡£æœ&quot;&gt;&lt;a href=&quot;#P1-æ™’è¡£æœ&quot; class=&quot;headerlink&quot; title=&quot;P1 æ™’è¡£æœ&quot;&gt;&lt;/a&gt;P1 æ™’è¡£æœ&lt;/h1&gt;&lt;p&gt;æ´—å®Œè¡£æœåï¼Œä½ è¦å¼„å¹²è¡£æœã€‚è¡£æœåœ¨è‡ªç„¶æ¡ä»¶ä¸‹ç”¨1ä¸ªå•ä½æ—¶é—´å¯ä»¥æ™’å¹²Aç‚¹æ¹¿åº¦ï¼Œç°åœ¨ä¹°äº†1å°çƒ˜è¡£æœºï¼Œä½¿ç”¨çƒ˜è¡£æœºå¯ä»¥è®©ä½ ç”¨1ä¸ªå•ä½çš„æ—¶é—´ä½¿1ä»¶è¡£æœé™¤å¼€è‡ªç„¶æ™’å¹²çš„Aç‚¹æ¹¿åº¦å¤–ï¼Œè¿˜å¯çƒ˜å¹²Bç‚¹æ¹¿åº¦ï¼Œä½†åœ¨1ä¸ªå•ä½çš„æ—¶é—´å†…åªèƒ½å¯¹1ä»¶è¡£æœä½¿ç”¨ã€‚&lt;br&gt;Nä»¶è¡£æœå› ä¸ºç§ç§åŸå› è€Œä¸ä¸€æ ·æ¹¿ï¼Œç°åœ¨å‘Šè¯‰ä½ æ¯ä»¶è¡£æœçš„æ¹¿åº¦ï¼Œè¦ä½ æ±‚å‡ºå¼„å¹²æ‰€æœ‰è¡£æœçš„æœ€å°‘æ—¶é—´ï¼ˆæ¹¿åº¦ä¸º0ä¸ºå¹²ï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ ¼å¼&quot;&gt;&lt;a href=&quot;#æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;æ ¼å¼&quot;&gt;&lt;/a&gt;æ ¼å¼&lt;/h2&gt;&lt;h3 id=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å…¥æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å…¥æ ¼å¼&lt;/h3&gt;&lt;p&gt;è¾“å…¥æ–‡ä»¶ç¬¬ä¸€è¡ŒNï¼ŒAï¼ŒB;&lt;br&gt;æ¥ä¸‹æ¥1^è¡Œï¼Œæ¯è¡Œä¸€ä¸ªæ•°ï¼Œè¡¨ç¤ºè¡£æœçš„æ¹¿åº¦$a_i$ï¼ˆ&lt;span&gt;$1\leq a_i\leq500000ï¼Œ1\leq N\leq 500000$&lt;/span&gt;&lt;!-- Has MathJax --&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å‡ºæ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å‡ºæ ¼å¼&lt;/h2&gt;&lt;p&gt;è¾“å‡ºä¸€è¡Œä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å°‘æ—¶é—´ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="Problem Set" scheme="https://cothrax.github.io/categories/Problem-Set/"/>
    
    
      <category term="OI" scheme="https://cothrax.github.io/tags/OI/"/>
    
      <category term="JSOI" scheme="https://cothrax.github.io/tags/JSOI/"/>
    
      <category term="å›¾è®º" scheme="https://cothrax.github.io/tags/%E5%9B%BE%E8%AE%BA/"/>
    
      <category term="DP" scheme="https://cothrax.github.io/tags/DP/"/>
    
      <category term="äºŒåˆ†ç­”æ¡ˆ" scheme="https://cothrax.github.io/tags/%E4%BA%8C%E5%88%86%E7%AD%94%E6%A1%88/"/>
    
      <category term="çº¿æ€§DP" scheme="https://cothrax.github.io/tags/%E7%BA%BF%E6%80%A7DP/"/>
    
      <category term="DFS" scheme="https://cothrax.github.io/tags/DFS/"/>
    
  </entry>
  
  <entry>
    <title>[JSOI2016] æé«˜2ç­ æ ‘å½¢DPï¼ˆäºŒï¼‰</title>
    <link href="https://cothrax.github.io/2016/08/19/JSOI2016-%E6%8F%90%E9%AB%982%E7%8F%AD-%E6%A0%91%E5%BD%A2DP%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
    <id>https://cothrax.github.io/2016/08/19/JSOI2016-æé«˜2ç­-æ ‘å½¢DPï¼ˆäºŒï¼‰/</id>
    <published>2016-08-19T03:58:32.000Z</published>
    <updated>2016-08-24T05:49:36.108Z</updated>
    
    <content type="html"><![CDATA[<h1 id="P5-The-more-The-better"><a href="#P5-The-more-The-better" class="headerlink" title="P5 The more, The better"></a>P5 The more, The better</h1><p>ACboyå¾ˆå–œæ¬¢ç©ä¸€ç§æˆ˜ç•¥æ¸¸æˆï¼Œåœ¨ä¸€ä¸ªåœ°å›¾ä¸Šï¼Œæœ‰Nåº§åŸå ¡ï¼Œæ¯åº§åŸå ¡éƒ½æœ‰ä¸€å®šçš„å®ç‰©ï¼Œåœ¨æ¯æ¬¡æ¸¸æˆä¸­ACboyå…è®¸æ”»å…‹Mä¸ªåŸå ¡å¹¶è·å¾—é‡Œé¢çš„å®ç‰©ã€‚ä½†ç”±äºåœ°ç†ä½ç½®åŸå› ï¼Œæœ‰äº›åŸå ¡ä¸èƒ½ç›´æ¥æ”»å…‹ï¼Œè¦æ”»å…‹è¿™äº›åŸå ¡å¿…é¡»å…ˆæ”»å…‹å…¶ä»–æŸä¸€ä¸ªç‰¹å®šçš„åŸå ¡ã€‚ä½ èƒ½å¸®ACboyç®—å‡ºè¦è·å¾—å°½é‡å¤šçš„å®ç‰©åº”è¯¥æ”»å…‹å“ªMä¸ªåŸå ¡å—ï¼Ÿ</p>
<h2 id="æ ¼å¼"><a href="#æ ¼å¼" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼"><a href="#è¾“å…¥æ ¼å¼" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>æ¯ä¸ªæµ‹è¯•å®ä¾‹é¦–å…ˆåŒ…æ‹¬2ä¸ªæ•´æ•°ï¼ŒN,M.(1 &lt;= M &lt;= N &lt;= 200);åœ¨æ¥ä¸‹æ¥çš„Nè¡Œé‡Œï¼Œæ¯è¡ŒåŒ…æ‹¬2ä¸ªæ•´æ•°ï¼Œa,b. åœ¨ç¬¬ i è¡Œï¼Œa ä»£è¡¨è¦æ”»å…‹ç¬¬ i ä¸ªåŸå ¡å¿…é¡»å…ˆæ”»å…‹ç¬¬ a ä¸ªåŸå ¡ï¼Œå¦‚æœ a = 0 åˆ™ä»£è¡¨å¯ä»¥ç›´æ¥æ”»å…‹ç¬¬ i ä¸ªåŸå ¡ã€‚b ä»£è¡¨ç¬¬ i ä¸ªåŸå ¡çš„å®ç‰©æ•°é‡, b &gt;= 0ã€‚å½“N = 0, M = 0è¾“å…¥ç»“æŸã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼"><a href="#è¾“å‡ºæ ¼å¼" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>å¯¹äºæ¯ä¸ªæµ‹è¯•å®ä¾‹ï¼Œè¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œä»£è¡¨ACboyæ”»å…‹Mä¸ªåŸå ¡æ‰€è·å¾—çš„æœ€å¤šå®ç‰©çš„æ•°é‡ã€‚<br><a id="more"></a></p>
<h2 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥"><a href="#æ ·ä¾‹è¾“å…¥" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>3 2<br>0 1<br>0 2<br>0 3<br>7 4<br>2 2<br>0 1<br>0 4<br>2 1<br>7 1<br>7 6<br>2 2<br>0 0</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º"><a href="#æ ·ä¾‹è¾“å‡º" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>5<br>13</p>
</blockquote>
<h2 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>è£¸çš„æ ‘å½¢èƒŒåŒ…ï¼Œå¤šå‰è½¬äºŒå‰ååšå°±å¯ä»¥äº†ã€‚<br>æ­ç”µOJä¸çŸ¥æ€ä¹ˆçˆ†æ‰äº†ï¼Œä»¥ä¸‹ä»£ç æ²¡æµ‹ï¼Œä»…ä¾›å‚è€ƒæ€è·¯ã€‚äº¤ä¸Šå»åº”è¯¥ä¼šceï¼Œå› ä¸ºuses math</p>
<dir style="text-align:right"><a href="/2016/08/19/JSOI2016-æé«˜2ç­-æ ‘å½¢DPï¼ˆäºŒï¼‰/test.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>test.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">type</span> </div><div class="line">    int=longint;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    br,ch,w:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">210</span>] <span class="keyword">of</span> int;</div><div class="line">    f:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">210</span>,<span class="number">0</span>..<span class="number">210</span>] <span class="keyword">of</span> int;</div><div class="line">    n,m,i,a:int;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">add</span><span class="params">(p,c:int)</span>;</span></div><div class="line"><span class="keyword">begin</span></div><div class="line">    br[c]:=ch[p];</div><div class="line">    ch[p]:=c;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">dp</span><span class="params">(v,j:int)</span>:</span>int;</div><div class="line"><span class="keyword">var</span> i:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">if</span> (v=<span class="number">0</span>) <span class="keyword">or</span> (v=<span class="number">0</span>) <span class="keyword">then</span> <span class="keyword">exit</span>(<span class="number">0</span>);</div><div class="line">    <span class="keyword">if</span> f[v,j]&lt;&gt;-<span class="number">1</span> <span class="keyword">then</span> <span class="keyword">exit</span>(f[v,j]);</div><div class="line">    f[v,j]:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">0</span> <span class="keyword">to</span> j-<span class="number">1</span> <span class="keyword">do</span></div><div class="line">        f[v,j]:=max(f[v,j],dp(ch[v],i)+w[v]+dp(br[v],j-i-<span class="number">1</span>));</div><div class="line">    f[v,j]:=max(f[v,j],dp(br[v],j));</div><div class="line">    dp:=f[v,j];</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">read</span>(n,m);</div><div class="line">    <span class="keyword">while</span> (n&lt;&gt;<span class="number">0</span>) <span class="keyword">and</span> (m&lt;&gt;<span class="number">0</span>) <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        fillchar(br,sizeof(br),<span class="number">0</span>);</div><div class="line">        fillchar(ch,sizeof(ch),<span class="number">0</span>);</div><div class="line">        <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            <span class="keyword">read</span>(a,w[i]);</div><div class="line">            add(a,i);        </div><div class="line">        <span class="keyword">end</span>;</div><div class="line">        filldword(f,sizeof(f) <span class="keyword">div</span> <span class="number">4</span>,-<span class="number">1</span>);</div><div class="line">        writeln(dp(ch[<span class="number">0</span>],m));</div><div class="line">        <span class="keyword">read</span>(n,m);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P6-ä½œä¸šå¤§ä¼š"><a href="#P6-ä½œä¸šå¤§ä¼š" class="headerlink" title="P6 ä½œä¸šå¤§ä¼š"></a>P6 ä½œä¸šå¤§ä¼š</h1><p>å¯çˆ±çš„å‡¯æ–‡åœ¨é«˜ä¸€æ—¶å°±ç»Ÿè®¡äº†æ‰€æœ‰äººçš„è”ç³»æ–¹å¼ï¼Œå®Œæˆäº†æ•™ä¸€çš„é€šè®¯å½•ã€‚æ¯å¹´çš„å¯’æš‘å‡å¼€ä½œä¸šå¤§ä¼šçš„æ—¶å€™è¿™å¼ é€šè®¯å½•å°±å……åˆ†å‘æŒ¥äº†ä½œç”¨ã€‚åŒå¿—ä»¬æ ¹æ®è¿™å¼ é€šè®¯å½•åˆ¶å®šäº†é€šè®¯ç½‘ç»œï¼Œå¯ä»¥æŠ½è±¡æˆä¸€æ£µæ ‘ã€‚<br>æ¯ä¸ªèŠ‚ç‚¹ï¼ˆé™¤å¶å­èŠ‚ç‚¹ï¼‰é¦–å…ˆæ¥å—ä»–çš„æ‰€æœ‰å­©å­èŠ‚ç‚¹å®Œæˆçš„å·å­ã€‚æ¥ç€ä»–é€‰æ‹©å¯ä»¥å®Œæˆä»»æ„ä¸€å¼ æœªå®Œæˆçš„å·å­ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä¸åšã€‚æœ€åæ‰€æœ‰å®Œæˆçš„å·å­è¢«æ±‡æ€»åˆ°æ ‘æ ¹èŠ‚ç‚¹ã€‚<br>å¾ˆæ˜¾ç„¶åšå·å­æ˜¯è¦æ¶ˆè€—æ—¶é—´çš„ï¼Œå·å­ä»å­©å­ä¼ åˆ°çˆ¶äº²ä¹Ÿæ˜¯è¦è€—æ—¶é—´çš„ã€‚ä½ çš„ä»»åŠ¡å°±æ˜¯å®‰æ’ä¸€ä¸ªè®¡åˆ’ä½¿å¾—æ¶ˆè€—æœ€å°‘æ—¶é—´å®Œæˆæ‰€æœ‰å·å­å¹¶æ±‡æ€»åˆ°æ ‘æ ¹ã€‚</p>
<h2 id="æ ¼å¼-1"><a href="#æ ¼å¼-1" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-1"><a href="#è¾“å…¥æ ¼å¼-1" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°nï¼Œmã€‚è¡¨ç¤ºäººæ•°å’Œå·å­æ€»æ•°ã€‚<br>æ¥ä¸‹æ¥n-1è¡Œæ¯è¡Œä¸‰ä¸ªæ•´æ•°xï¼Œyï¼Œcã€‚è¡¨ç¤ºxå’Œyè¿é€šï¼Œåœ¨xå’Œyä¹‹é—´ä¼ é€’æ—¶é—´ä¸ºcã€‚<br>æœ€ånè¡Œï¼Œæ¯è¡Œmä¸ªæ•´æ•°ã€‚ç¬¬iè¡Œç¬¬jåˆ—çš„æ•´æ•°æ˜¯ç¼–å·içš„èŠ‚ç‚¹å®Œæˆç¬¬jå¼ å·å­æ¶ˆè€—çš„æ—¶é—´ã€‚<br>n&lt;=55ï¼Œm&lt;=11ï¼Œä¿è¯n&gt;=mã€‚æ ¹èŠ‚ç‚¹çš„ç¼–å·ä¸º1ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼-1"><a href="#è¾“å‡ºæ ¼å¼-1" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>ä¸€ä¸ªæ•´æ•°tã€‚è¡¨ç¤ºæ¶ˆè€—çš„æœ€å°æ€»æ—¶é—´ã€‚ä¿è¯ç­”æ¡ˆåœ¨longintèŒƒå›´å†…ã€‚</p>
<h2 id="æ ·ä¾‹-1"><a href="#æ ·ä¾‹-1" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-1"><a href="#æ ·ä¾‹è¾“å…¥-1" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>6 3<br>1 2 1<br>1 3 1<br>2 4 1<br>2 5 1<br>3 6 1<br>3 4 3<br>3 2 5<br>6 1 2<br>1 8 9<br>8 8 1<br>4 7 6</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-1"><a href="#æ ·ä¾‹è¾“å‡º-1" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>7</p>
</blockquote>
<h2 id="é¢˜è§£-1"><a href="#é¢˜è§£-1" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p><strong>æ ‘å½¢DP+çŠ¶å‹</strong>ï¼Œåˆæ˜¯ä¸€ä¸ªä¸‹åˆ==<br>æˆ‘çš„æƒ³æ³•æ˜¯å¤šå‰è½¬äºŒå‰ååšã€‚<br>f[v,s]è¡¨ç¤ºvçš„å­æ ‘ï¼Œå®ŒæˆçŠ¶æ€sçš„å·å­æ‰€éœ€çš„æ—¶é—´ï¼Œå¯¹åº”çš„è®°å¿†åŒ–å‡½æ•°ä¸ºdp(v,s)<br>a[v,i]æŒ‡våšå·å­içš„æ—¶é—´ï¼Œw[v]æŒ‡vå‘çˆ¶èŠ‚ç‚¹ä¼ è¾“çš„æ—¶é—´</p>
<ol>
<li>æšä¸¾våšçš„å·å­iï¼Œåœ¨å‰©ä½™çš„å·å­$s1=s-1\ shl\ (i-1)$ä¸­ï¼Œæšä¸¾å­èŠ‚ç‚¹åšçš„å·å­çŠ¶æ€s2ï¼Œäºæ˜¯ç­”æ¡ˆ<span>$=w[v]+a[v,i]+dp(ch[v],s2)+dp(br[v],s1\ xor\ s2)$</span><!-- Has MathJax --></li>
<li>vä¸åšå·å­ï¼Œç›´æ¥æšä¸¾å­èŠ‚ç‚¹åšçš„å·å­çŠ¶æ€s1ï¼Œç­”æ¡ˆ<span>$=w[v]+dp(ch[v],s1)+dp(br[v],s1\ xor\ s)$</span><!-- Has MathJax -->ï¼Œæ³¨æ„$s1\not=0$</li>
<li>å·å­å…¨éƒ¨ç»™å…„å¼ŸèŠ‚ç‚¹åšï¼Œç­”æ¡ˆ$=dp(br[v],s)$</li>
</ol>
<p>ä½†è½¬äºŒå‰åçš„é—®é¢˜åœ¨äºå†—ä½™çš„æƒ…å†µéå¸¸çš„å¤šï¼Œç„¶åå°±TLEäº†ï¼Œäºæ˜¯è€ƒè™‘ä¼˜åŒ–ï¼š<br>cnt[x]è®°å½•xçš„äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°<br>siz[v]ä»¥vä¸ºæ ¹çš„å­æ ‘èŠ‚ç‚¹ä¸ªæ•°<br>å½“cnt[s]&gt;siz[v]æ—¶ï¼Œç›´æ¥è¿”å›infã€‚è¿™ä¸ªå‰ªææ˜¯éå¸¸å‰å®³çš„ã€‚</p>
<p>æ ‡ç¨‹æ˜¯ç›´æ¥çš„å¤šå‰ä¸Šåšçš„ï¼Œå¯å‘å¼åˆå¹¶ä»€ä¹ˆçš„ç„¶è€Œæˆ‘å¹¶ä¸ä¼šã€‚</p>
<dir style="text-align:right"><a href="/2016/08/19/JSOI2016-æé«˜2ç­-æ ‘å½¢DPï¼ˆäºŒï¼‰/network.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>network.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">const</span> inf=<span class="number">1000000000</span>;</div><div class="line"><span class="keyword">type</span> </div><div class="line">    int=longint;</div><div class="line">    edge=<span class="keyword">record</span> t,w,next:int <span class="keyword">end</span>;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    g:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">120</span>] <span class="keyword">of</span> edge; <span class="comment">//å­˜å¤šå‰</span></div><div class="line">    head,br,ch,w,siz:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">60</span>] <span class="keyword">of</span> int;</div><div class="line">    a:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">60</span>,<span class="number">0</span>..<span class="number">15</span>] <span class="keyword">of</span> int;</div><div class="line">    f:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">60</span>,<span class="number">0</span>..<span class="number">1</span> <span class="keyword">shl</span> <span class="number">11</span>-<span class="number">1</span>] <span class="keyword">of</span> int;</div><div class="line">    cnt:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1</span> <span class="keyword">shl</span> <span class="number">11</span>-<span class="number">1</span>] <span class="keyword">of</span> int;</div><div class="line">    n,m,k,i,j,f0,t0,w0:int;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">add</span><span class="params">(f,t,w:int)</span>;</span></div><div class="line"><span class="keyword">var</span> m:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    inc(head[<span class="number">0</span>]);m:=head[<span class="number">0</span>];</div><div class="line">    g[m].t:=t;g[m].w:=w;</div><div class="line">    g[m].next:=head[f];head[f]:=m;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"><span class="comment">//å¤šå‰è½¬äºŒå‰</span></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">dfs</span><span class="params">(v,p,w0:int)</span>;</span><span class="keyword">inline</span>;</div><div class="line"><span class="keyword">var</span> i,u:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    br[v]:=ch[p];ch[p]:=v;w[v]:=w0;</div><div class="line">    i:=head[v];</div><div class="line">    <span class="keyword">while</span> i&lt;&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        u:=g[i].t;</div><div class="line">        <span class="keyword">if</span> u&lt;&gt;p <span class="keyword">then</span> dfs(u,v,g[i].w);</div><div class="line">        i:=g[i].next;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"><span class="comment">//è®¡ç®—xçš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­1çš„ä¸ªæ•°</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">count</span><span class="params">(x:int)</span>:</span>int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    count:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span> x&lt;&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        inc(count);</div><div class="line">        dec(x,x <span class="keyword">and</span> (-x));</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"><span class="comment">//è®¡ç®—ä»¥vä¸ºæ ¹çš„å­æ ‘çš„èŠ‚ç‚¹æ•°</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">cal</span><span class="params">(v:int)</span>:</span>int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">if</span> v=<span class="number">0</span> <span class="keyword">then</span> <span class="keyword">exit</span>(<span class="number">0</span>);</div><div class="line">    siz[v]:=cal(ch[v])+cal(br[v])+<span class="number">1</span>;</div><div class="line">    cal:=siz[v];</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">dp</span><span class="params">(v,s:int)</span>:</span>int;</div><div class="line"><span class="keyword">var</span> x,i,j,s1,s2,tmp:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">if</span> cnt[s]&gt;siz[v] <span class="keyword">then</span> <span class="keyword">exit</span>(inf); <span class="comment">//å‰ªæ</span></div><div class="line">    <span class="keyword">if</span> f[v,s]&lt;&gt;-<span class="number">1</span> <span class="keyword">then</span> <span class="keyword">exit</span>(f[v,s]);</div><div class="line">    <span class="keyword">if</span> s=<span class="number">0</span> <span class="keyword">then</span> <span class="keyword">exit</span>(<span class="number">0</span>);</div><div class="line">    <span class="keyword">if</span> v=<span class="number">0</span> <span class="keyword">then</span> <span class="keyword">exit</span>(inf);</div><div class="line"></div><div class="line">    x:=s;</div><div class="line">    f[v,s]:=inf;</div><div class="line">    <span class="keyword">while</span> x&lt;&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span> <span class="comment">//æšä¸¾våšçš„å·å­</span></div><div class="line">        i:=x <span class="keyword">and</span> (-x);</div><div class="line">        j:=round(ln(i)/ln(<span class="number">2</span>))+<span class="number">1</span>;</div><div class="line">        s1:=s <span class="keyword">and</span> <span class="keyword">not</span> i;</div><div class="line">        f[v,s]:=min(f[v,s],w[v]+a[v,j]+min(dp(br[v],s1),dp(ch[v],s1)));</div><div class="line">        </div><div class="line">        s2:=s1;</div><div class="line">        <span class="keyword">while</span> s2&lt;&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span> <span class="comment">//æšä¸¾å­èŠ‚ç‚¹åšçš„å·å­</span></div><div class="line">            tmp:=w[v]+a[v,j]+dp(ch[v],s2)+dp(br[v],s1 xor s2);</div><div class="line">            f[v,s]:=min(f[v,s],tmp);</div><div class="line">            s2:=(s2-<span class="number">1</span>) <span class="keyword">and</span> s1;</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">        x:=x <span class="keyword">and</span> <span class="keyword">not</span> i;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    s1:=s; <span class="comment">//vä¸åšå·å­</span></div><div class="line">    <span class="keyword">while</span> s1&lt;&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span> <span class="comment">//æšä¸¾å­èŠ‚ç‚¹åšçš„å·å­</span></div><div class="line">        f[v,s]:=min(f[v,s],w[v]+dp(ch[v],s1)+dp(br[v],s xor s1));</div><div class="line">        s1:=(s1-<span class="number">1</span>) <span class="keyword">and</span> s;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    f[v,s]:=min(f[v,s],dp(br[v],s)); <span class="comment">//å…¨ç»™å…„å¼Ÿåš</span></div><div class="line">    dp:=f[v,s];</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'network.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'network.out'</span>);rewrite(output);</div><div class="line"></div><div class="line">    <span class="keyword">read</span>(n,m);</div><div class="line">    k:=<span class="number">1</span> <span class="keyword">shl</span> m-<span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> k <span class="keyword">do</span> cnt[i]:=count(i);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n-<span class="number">1</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(f0,t0,w0);</div><div class="line">        add(f0,t0,w0);add(t0,f0,w0);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    dfs(<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>);cal(<span class="number">1</span>);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">        <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span> <span class="keyword">read</span>(a[i,j]);</div><div class="line">    </div><div class="line">    filldword(f,sizeof(f) <span class="keyword">div</span> <span class="number">4</span>,-<span class="number">1</span>);</div><div class="line">    <span class="keyword">write</span>(dp(<span class="number">1</span>,k));</div><div class="line"></div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<p>å¦‚æœæƒ³ç”¨å¤šå‰ï¼Œå¯ä»¥æ¬£èµä¸€ä¸‹æ ‡ç¨‹ï¼š<a href="/2016/08/19/JSOI2016-æé«˜2ç­-æ ‘å½¢DPï¼ˆäºŒï¼‰/network2.pas" title="æˆ³è¿™é‡Œ">æˆ³è¿™é‡Œ</a></p>
<h1 id="P7-æ¶ˆé˜²ç«™"><a href="#P7-æ¶ˆé˜²ç«™" class="headerlink" title="P7 æ¶ˆé˜²ç«™"></a>P7 æ¶ˆé˜²ç«™</h1><p>Zå›½æœ‰Nä¸ªåŸå¸‚ï¼Œç¼–å·ä¸º1~Nã€‚åŸå¸‚ä¹‹é—´ç”¨é«˜é€Ÿå…¬è·¯è¿æ¥ï¼Œä»»æ„ä¸¤ä¸ªåŸå¸‚ä¹‹é—´æœ‰ä¸”ä»…æœ‰ä¸€æ¡è·¯å¾„ã€‚<br>æœ€è¿‘ï¼ŒZå›½ç«ç¾é¢‘å‘ï¼Œäºæ˜¯æ”¿åºœå†³å®šåœ¨ä¸€äº›åŸå¸‚å»ºç«‹ä¸€äº›æ¶ˆé˜²ç«™ï¼Œåœ¨åŸå¸‚Kå»ºç«‹æ¶ˆé˜²ç«™éœ€è¦èŠ±è´¹Wï¼ˆKï¼‰ï¼Œæ¯ä¸ªåŸå¸‚çš„Wå¯èƒ½ä¸åŒã€‚å¦‚æœä¸åœ¨åŸå¸‚Kå»ºç«‹æ¶ˆé˜²ç«™ï¼Œé‚£ä¹ˆéœ€è¦ä¿è¯ç¦»Kæœ€è¿‘çš„æ¶ˆé˜²ç«™ä¸Kçš„è·ç¦»ä¸è¶…è¿‡Dï¼ˆKï¼‰ã€‚æ¯ä¸ªåŸå¸‚çš„Då¯èƒ½ä¸åŒã€‚<br>ä¸ºäº†èŠ‚çœå¼€æ”¯ï¼Œæ”¿åºœå¸Œæœ›ä½ è®¡ç®—æ»¡è¶³è¦æ±‚çš„æœ€å°èŠ±è´¹ã€‚</p>
<h2 id="æ ¼å¼-2"><a href="#æ ¼å¼-2" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-2"><a href="#è¾“å…¥æ ¼å¼-2" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•°Tï¼Œè¡¨ç¤ºæµ‹è¯•æ•°æ®ç»„æ•°ã€‚<br>æ¥ä¸‹æ¥ä¸€å…±Téƒ¨åˆ†ï¼Œæ¯éƒ¨åˆ†æ ¼å¼å¦‚ä¸‹ï¼š<br>ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°N(1â‰¤nâ‰¤1000)ã€‚<br>ç¬¬äºŒè¡ŒåŒ…å«Nä¸ªæ•´æ•°ï¼Œç¬¬iä¸ªæ•´æ•°è¡¨ç¤ºWï¼ˆiï¼‰(0 &lt; W(i) &lt;= 10000)ã€‚<br>ç¬¬ä¸‰è¡ŒåŒ…å«Nä¸ªæ•´æ•°ï¼Œç¬¬iä¸ªæ•´æ•°è¡¨ç¤ºDï¼ˆiï¼‰ï¼ˆ0 &lt;= D(i) &lt;= 10000ï¼‰ã€‚<br>æ¥ä¸‹æ¥n-1è¡Œï¼Œæ¯è¡Œä¸‰ä¸ªæ•°uï¼Œvï¼ŒL(1 &lt;= u, v &lt;= Nï¼Œ0 &lt; L &lt;= 1000)ï¼Œè¡¨ç¤ºåŸå¸‚uå’ŒåŸå¸‚vä¹‹é—´æœ‰ä¸€æ¡é•¿åº¦ä¸ºlçš„é«˜é€Ÿå…¬è·¯ã€‚</p>
<h3 id="è¾“å‡ºæ ¼å¼-2"><a href="#è¾“å‡ºæ ¼å¼-2" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h3><p>æ¯ç»„æµ‹è¯•æ•°æ®è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å°è´¹ç”¨ã€‚</p>
<h2 id="æ ·ä¾‹-2"><a href="#æ ·ä¾‹-2" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="è¾“å…¥æ ·ä¾‹"><a href="#è¾“å…¥æ ·ä¾‹" class="headerlink" title="è¾“å…¥æ ·ä¾‹"></a>è¾“å…¥æ ·ä¾‹</h3><blockquote>
<p>1<br>5<br>1 1 1 1 1<br>2 1 1 1 2<br>1 2 1<br>2 3 1<br>3 4 1<br>4 5 1</p>
</blockquote>
<h3 id="è¾“å‡ºæ ·ä¾‹"><a href="#è¾“å‡ºæ ·ä¾‹" class="headerlink" title="è¾“å‡ºæ ·ä¾‹"></a>è¾“å‡ºæ ·ä¾‹</h3><blockquote>
<p>1</p>
</blockquote>
<h2 id="é¢˜è§£-2"><a href="#é¢˜è§£-2" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>å¥½åƒå¾ˆå‰å®³çš„æ ‘å½¢DPï¼Œå®Œæ•´åˆ†æå¯ä»¥çœ‹<a href="/2016/08/19/JSOI2016-æé«˜2ç­-æ ‘å½¢DPï¼ˆäºŒï¼‰/æ¶ˆé˜²ç«™è§£é¢˜æŠ¥å‘Š.doc" title="é™ˆå¯å³°çš„è§£é¢˜æŠ¥å‘Š">é™ˆå¯å³°çš„è§£é¢˜æŠ¥å‘Š</a>ã€‚<br>è¿™é‡Œç®€å•è¯´ä¸€ä¸‹æ€è·¯ï¼š<br>ans[i]è®°å½•ä»¥iä¸ºæ ¹çš„å­æ ‘å…¨éƒ¨è¢«è¦†ç›–çš„æœ€ä¼˜å€¼<br>f[i,j]è®°å½•ä»¥iä¸ºæ ¹çš„å­æ ‘ï¼Œåœ¨iä¾èµ–jçš„æƒ…å†µä¸‹çš„æœ€ä¼˜å€¼<br>æ ‘å½¢DPçš„æ–¹ç¨‹éƒ½ä¸å¥½è¡¨ç¤ºï¼Œç›´æ¥çœ‹ä»£ç å¥½äº†ã€‚<br>å¯ä»¥ç”¨dfsé¢„å¤„ç†ä¸¤ç‚¹è·ç¦»ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å€å¢åšã€‚</p>
<dir style="text-align:right"><a href="/2016/08/19/JSOI2016-æé«˜2ç­-æ ‘å½¢DPï¼ˆäºŒï¼‰/fire.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>fire.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">const</span> inf=<span class="number">1000000000</span>;</div><div class="line"><span class="keyword">type</span> </div><div class="line">    int=longint;</div><div class="line">    edge=<span class="keyword">record</span> t,w,next:int <span class="keyword">end</span>;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    n,t,i,f0,t0,w0:int;</div><div class="line">    g:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">2010</span>] <span class="keyword">of</span> edge;</div><div class="line">    dist,f:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1010</span>,<span class="number">0</span>..<span class="number">1010</span>] <span class="keyword">of</span> int;</div><div class="line">    w,lim,ans,head:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1010</span>] <span class="keyword">of</span> int;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">add</span><span class="params">(f,t,w:int)</span>;</span></div><div class="line"><span class="keyword">var</span> m:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    inc(head[<span class="number">0</span>]);m:=head[<span class="number">0</span>];</div><div class="line">    g[m].t:=t;g[m].w:=w;</div><div class="line">    g[m].next:=head[f];head[f]:=m;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">cal</span><span class="params">(v,p,d:int)</span>;</span></div><div class="line"><span class="keyword">var</span> j:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    dist[i,v]:=d;</div><div class="line">    j:=head[v];</div><div class="line">    <span class="keyword">while</span> j&lt;&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">if</span> g[j].t&lt;&gt;p <span class="keyword">then</span> cal(g[j].t,v,d+g[j].w);</div><div class="line">        j:=g[j].next;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">dp</span><span class="params">(v,p:int)</span>;</span></div><div class="line"><span class="keyword">var</span> i,j:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    i:=head[v];</div><div class="line">    <span class="keyword">while</span> i&lt;&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">if</span> g[i].t&lt;&gt;p <span class="keyword">then</span> dp(g[i].t,v);</div><div class="line">        i:=g[i].next;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">        <span class="keyword">if</span> dist[v,i]&lt;=lim[v] <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            f[v,i]:=w[i];</div><div class="line">            j:=head[v];</div><div class="line">            <span class="keyword">while</span> j&lt;&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">                <span class="keyword">if</span> g[j].t&lt;&gt;p <span class="keyword">then</span> </div><div class="line">                    inc(f[v,i],min(ans[g[j].t],f[g[j].t,i]-w[i]));</div><div class="line">                j:=g[j].next;</div><div class="line">            <span class="keyword">end</span>;</div><div class="line">            ans[v]:=min(ans[v],f[v,i]);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'fire.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'fire.out'</span>);rewrite(output);</div><div class="line">    <span class="keyword">read</span>(t);</div><div class="line">    <span class="keyword">while</span> t&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        fillchar(head,sizeof(head),<span class="number">0</span>);</div><div class="line">        filldword(ans,sizeof(ans) <span class="keyword">shr</span> <span class="number">2</span>,inf);</div><div class="line">        filldword(f,sizeof(f) <span class="keyword">shr</span> <span class="number">2</span>,inf);</div><div class="line">        filldword(dist,sizeof(dist) <span class="keyword">shr</span> <span class="number">2</span>,inf);</div><div class="line">        </div><div class="line">        <span class="keyword">read</span>(n);</div><div class="line">        <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">read</span>(w[i]);</div><div class="line">        <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">read</span>(lim[i]);</div><div class="line">        <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n-<span class="number">1</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            <span class="keyword">read</span>(f0,t0,w0);</div><div class="line">            add(f0,t0,w0);add(t0,f0,w0);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">        <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> cal(i,<span class="number">0</span>,<span class="number">0</span>);</div><div class="line">        </div><div class="line">        dp(<span class="number">1</span>,<span class="number">0</span>);</div><div class="line">        writeln(ans[<span class="number">1</span>]);</div><div class="line">        dec(t);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;P5-The-more-The-better&quot;&gt;&lt;a href=&quot;#P5-The-more-The-better&quot; class=&quot;headerlink&quot; title=&quot;P5 The more, The better&quot;&gt;&lt;/a&gt;P5 The more, The better&lt;/h1&gt;&lt;p&gt;ACboyå¾ˆå–œæ¬¢ç©ä¸€ç§æˆ˜ç•¥æ¸¸æˆï¼Œåœ¨ä¸€ä¸ªåœ°å›¾ä¸Šï¼Œæœ‰Nåº§åŸå ¡ï¼Œæ¯åº§åŸå ¡éƒ½æœ‰ä¸€å®šçš„å®ç‰©ï¼Œåœ¨æ¯æ¬¡æ¸¸æˆä¸­ACboyå…è®¸æ”»å…‹Mä¸ªåŸå ¡å¹¶è·å¾—é‡Œé¢çš„å®ç‰©ã€‚ä½†ç”±äºåœ°ç†ä½ç½®åŸå› ï¼Œæœ‰äº›åŸå ¡ä¸èƒ½ç›´æ¥æ”»å…‹ï¼Œè¦æ”»å…‹è¿™äº›åŸå ¡å¿…é¡»å…ˆæ”»å…‹å…¶ä»–æŸä¸€ä¸ªç‰¹å®šçš„åŸå ¡ã€‚ä½ èƒ½å¸®ACboyç®—å‡ºè¦è·å¾—å°½é‡å¤šçš„å®ç‰©åº”è¯¥æ”»å…‹å“ªMä¸ªåŸå ¡å—ï¼Ÿ&lt;/p&gt;
&lt;h2 id=&quot;æ ¼å¼&quot;&gt;&lt;a href=&quot;#æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;æ ¼å¼&quot;&gt;&lt;/a&gt;æ ¼å¼&lt;/h2&gt;&lt;h3 id=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å…¥æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å…¥æ ¼å¼&lt;/h3&gt;&lt;p&gt;æ¯ä¸ªæµ‹è¯•å®ä¾‹é¦–å…ˆåŒ…æ‹¬2ä¸ªæ•´æ•°ï¼ŒN,M.(1 &amp;lt;= M &amp;lt;= N &amp;lt;= 200);åœ¨æ¥ä¸‹æ¥çš„Nè¡Œé‡Œï¼Œæ¯è¡ŒåŒ…æ‹¬2ä¸ªæ•´æ•°ï¼Œa,b. åœ¨ç¬¬ i è¡Œï¼Œa ä»£è¡¨è¦æ”»å…‹ç¬¬ i ä¸ªåŸå ¡å¿…é¡»å…ˆæ”»å…‹ç¬¬ a ä¸ªåŸå ¡ï¼Œå¦‚æœ a = 0 åˆ™ä»£è¡¨å¯ä»¥ç›´æ¥æ”»å…‹ç¬¬ i ä¸ªåŸå ¡ã€‚b ä»£è¡¨ç¬¬ i ä¸ªåŸå ¡çš„å®ç‰©æ•°é‡, b &amp;gt;= 0ã€‚å½“N = 0, M = 0è¾“å…¥ç»“æŸã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å‡ºæ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å‡ºæ ¼å¼&lt;/h2&gt;&lt;p&gt;å¯¹äºæ¯ä¸ªæµ‹è¯•å®ä¾‹ï¼Œè¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œä»£è¡¨ACboyæ”»å…‹Mä¸ªåŸå ¡æ‰€è·å¾—çš„æœ€å¤šå®ç‰©çš„æ•°é‡ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="Problem Set" scheme="https://cothrax.github.io/categories/Problem-Set/"/>
    
    
      <category term="OI" scheme="https://cothrax.github.io/tags/OI/"/>
    
      <category term="JSOI" scheme="https://cothrax.github.io/tags/JSOI/"/>
    
      <category term="DP" scheme="https://cothrax.github.io/tags/DP/"/>
    
      <category term="æ ‘å½¢DP" scheme="https://cothrax.github.io/tags/%E6%A0%91%E5%BD%A2DP/"/>
    
      <category term="èƒŒåŒ…" scheme="https://cothrax.github.io/tags/%E8%83%8C%E5%8C%85/"/>
    
      <category term="ä½è¿ç®—" scheme="https://cothrax.github.io/tags/%E4%BD%8D%E8%BF%90%E7%AE%97/"/>
    
      <category term="çŠ¶å‹DP" scheme="https://cothrax.github.io/tags/%E7%8A%B6%E5%8E%8BDP/"/>
    
      <category term="æ ‘å½¢èƒŒåŒ…" scheme="https://cothrax.github.io/tags/%E6%A0%91%E5%BD%A2%E8%83%8C%E5%8C%85/"/>
    
      <category term="æ ‘ç»“æ„" scheme="https://cothrax.github.io/tags/%E6%A0%91%E7%BB%93%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>[JSOI2016] æé«˜1ç­ Day4</title>
    <link href="https://cothrax.github.io/2016/08/19/JSOI2016-%E6%8F%90%E9%AB%981%E7%8F%AD-Day4/"/>
    <id>https://cothrax.github.io/2016/08/19/JSOI2016-æé«˜1ç­-Day4/</id>
    <published>2016-08-19T01:03:58.000Z</published>
    <updated>2016-08-23T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="P1-å…¬çº¦æ•°"><a href="#P1-å…¬çº¦æ•°" class="headerlink" title="P1 å…¬çº¦æ•°"></a>P1 å…¬çº¦æ•°</h1><p>å°w æœ€è¿‘ä»”ç»†ç ”ç©¶äº†å…¬çº¦æ•°ï¼Œä»–æƒ³åˆ°äº†ä»¥ä¸‹é—®é¢˜ï¼š<br>ç°æœ‰n ä¸ªæ­£æ•´æ•°ï¼Œä»ä¸­é€‰kï¼ˆ2&lt;=k&lt;=nï¼‰ä¸ªï¼Œè®¾è¿™k ä¸ªæ•°çš„æœ€å¤§å…¬çº¦æ•°ä¸ºgï¼Œåˆ™è¿™k ä¸ªæ•°<br>çš„ä»·å€¼ä¸ºk*gã€‚æ±‚è¿™ä¸ªä»·å€¼çš„æœ€å¤§å€¼ã€‚<br>å°w å½“ç„¶çŸ¥é“ç­”æ¡ˆäº†ã€‚ç°åœ¨ä»–æƒ³è€ƒè€ƒä½ ï¼Œä½ èƒ½å¾ˆå¿«å›ç­”å‡ºæ¥å—ï¼Ÿ</p>
<h2 id="æ ¼å¼"><a href="#æ ¼å¼" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼"><a href="#è¾“å…¥æ ¼å¼" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬ä¸€è¡Œï¼Œä¸€ä¸ªæ•´æ•°nã€‚<br>ç¬¬äºŒè¡Œï¼Œn ä¸ªæ­£æ•´æ•°ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼"><a href="#è¾“å‡ºæ ¼å¼" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>ä¸€è¡Œä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºç­”æ¡ˆã€‚<br><a id="more"></a></p>
<h2 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥"><a href="#æ ·ä¾‹è¾“å…¥" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>5<br>4 6 3 8 9</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º"><a href="#æ ·ä¾‹è¾“å‡º" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>9</p>
</blockquote>
<h2 id="æç¤º"><a href="#æç¤º" class="headerlink" title="æç¤º"></a>æç¤º</h2><p>å¯¹äº30%æ•°æ®ï¼ŒN&lt;=100<br>å¯¹äº100%æ•°æ®ï¼ŒN&lt;=200000ï¼Œè¾“å…¥ç¬¬äºŒè¡Œæ¯ä¸ªæ•°å­—ä¸è¶…è¿‡2000000</p>
<h2 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>å¼€å§‹è«åå…¶å¦™æƒ³åˆ°äº†èƒŒåŒ…ï¼Œç»“æœæ˜¯æšä¸¾ã€‚<br>æšä¸¾å…¬çº¦æ•°å°±å¥½äº†ã€‚</p>
<dir style="text-align:right"><a href="/2016/08/19/JSOI2016-æé«˜1ç­-Day4/gcd.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>gcd.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    n,m,i,j,cur:int;ans:int64;</div><div class="line">    cnt:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">2000010</span>] <span class="keyword">of</span> int;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'gcd.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'gcd.out'</span>);rewrite(output);</div><div class="line"></div><div class="line">    <span class="keyword">read</span>(n);m:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(j);</div><div class="line">        inc(cnt[j]);</div><div class="line">        m:=max(m,j);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    ans:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        j:=i;cur:=<span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span> j&lt;=m <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            inc(cur,cnt[j]);</div><div class="line">            inc(j,i);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">        <span class="keyword">if</span> cur&lt;<span class="number">2</span> <span class="keyword">then</span> continue;</div><div class="line">        ans:=max(ans,cur*i);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">write</span>(ans);</div><div class="line"></div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P2-å‹å¥½åŸå¸‚"><a href="#P2-å‹å¥½åŸå¸‚" class="headerlink" title="P2 å‹å¥½åŸå¸‚"></a>P2 å‹å¥½åŸå¸‚</h1><p>å°w ç”Ÿæ´»åœ¨ç¾ä¸½çš„Z å›½ã€‚Z å›½æ˜¯ä¸€ä¸ªæœ‰n ä¸ªåŸå¸‚çš„å¤§å›½ï¼ŒåŸå¸‚ä¹‹é—´æœ‰m æ¡å•å‘å…¬è·¯ï¼ˆè¿<br>æ¥åŸå¸‚iã€j çš„å…¬è·¯åªèƒ½ä»i è¿åˆ°jï¼‰ã€‚åŸå¸‚iã€j æ˜¯å‹å¥½åŸå¸‚å½“ä¸”ä»…å½“ä»åŸå¸‚i èƒ½åˆ°è¾¾åŸå¸‚j å¹¶<br>ä¸”ä»åŸå¸‚j èƒ½åˆ°è¾¾åŸå¸‚iã€‚å¦‚æœk ä¸ªåŸå¸‚ä¸¤ä¸¤äº’ä¸ºå‹å¥½åŸå¸‚ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç§°è¿™k ä¸ªåŸå¸‚æ˜¯å‹å¥½<br>åŸå¸‚ç¾¤ï¼Œk ä¸ºå‹å¥½åŸå¸‚ç¾¤çš„å¤§å°ã€‚ç°åœ¨å°w æƒ³çŸ¥é“å‹å¥½åŸå¸‚ç¾¤çš„å¤§å°æœ€å¤§ä¸ºå¤šå°‘ï¼Œä½ èƒ½å‘Šè¯‰<br>ä»–å—ï¼Ÿ</p>
<h2 id="æ ¼å¼-1"><a href="#æ ¼å¼-1" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-1"><a href="#è¾“å…¥æ ¼å¼-1" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°n å’Œmã€‚<br>æ¥ä¸‹æ¥m è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°i å’Œjï¼Œè¡¨ç¤ºæœ‰ä»åŸå¸‚i åˆ°åŸå¸‚j çš„ä¸€æ¡å•å‘å…¬è·¯ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼-1"><a href="#è¾“å‡ºæ ¼å¼-1" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>å…±ä¸€è¡Œä¸€ä¸ªæ•´æ•°è¡¨ç¤ºç­”æ¡ˆã€‚<br><!--more--></p>
<h2 id="æ ·ä¾‹-1"><a href="#æ ·ä¾‹-1" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-1"><a href="#æ ·ä¾‹è¾“å…¥-1" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>10 12<br>3 7<br>1 2<br>4 5<br>7 10<br>10 8<br>6 8<br>2 1<br>3 8<br>10 3<br>6 8<br>7 3<br>4 1</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-1"><a href="#æ ·ä¾‹è¾“å‡º-1" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>3</p>
</blockquote>
<h2 id="æç¤º-1"><a href="#æç¤º-1" class="headerlink" title="æç¤º"></a>æç¤º</h2><p>å¯¹äº30%çš„æ•°æ®ï¼Œn,m&lt;=100<br>å¯¹äº80%çš„æ•°æ®ï¼Œn&lt;=1000,m&lt;=100000<br>å¯¹äº100%çš„æ•°æ®ï¼Œn,m&lt;=100000</p>
<h2 id="é¢˜è§£-1"><a href="#é¢˜è§£-1" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>å’¦è¿™ä¸æ˜¯è£¸çš„å¼ºè¿é€šåˆ†é‡å—ï¼Œä¸Štarjanå§ã€‚<br>æœ€åä¸€ä¸ªç‚¹å¥½åƒç”±äºåˆ†é‡å¤§å°BTï¼Œç„¶åé€’å½’æ ˆçˆ†äº†ã€‚ã€‚ã€‚</p>
<dir style="text-align:right"><a href="/2016/08/19/JSOI2016-æé«˜1ç­-Day4/friend.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>friend.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">type</span> </div><div class="line">    int=longint;</div><div class="line">    edge=<span class="keyword">record</span> t,next:int <span class="keyword">end</span>;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    g:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">100010</span>] <span class="keyword">of</span> edge;</div><div class="line">    head,dfn,low,s:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">100010</span>] <span class="keyword">of</span> int;</div><div class="line">    ins:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">100010</span>] <span class="keyword">of</span> boolean;</div><div class="line">    n,m,i,j,t,tim,ans:int;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">add</span><span class="params">(f,t:int)</span>;</span></div><div class="line"><span class="keyword">var</span> m:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    inc(head[<span class="number">0</span>]);m:=head[<span class="number">0</span>];</div><div class="line">    g[m].t:=t;</div><div class="line">    g[m].next:=head[f];head[f]:=m;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">tarjan</span><span class="params">(v:int)</span>;</span></div><div class="line"><span class="keyword">var</span> i,u,cnt:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    inc(tim);dfn[v]:=tim;low[v]:=tim;</div><div class="line">    inc(t);s[t]:=v;ins[v]:=true;</div><div class="line">    i:=head[v];</div><div class="line">    <span class="keyword">while</span> i&lt;&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        u:=g[i].t;</div><div class="line">        <span class="keyword">if</span> dfn[u]=<span class="number">0</span> <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            tarjan(u);</div><div class="line">            low[v]:=min(low[v],low[u]);</div><div class="line">        <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">if</span> ins[u] <span class="keyword">then</span></div><div class="line">            low[v]:=min(low[v],dfn[u]);</div><div class="line">        i:=g[i].next;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">if</span> low[v]=dfn[v] <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">        cnt:=<span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span> s[t+<span class="number">1</span>]&lt;&gt;v <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            inc(cnt);</div><div class="line">            ins[s[t]]:=false;</div><div class="line">            dec(t);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">        ans:=max(ans,cnt);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'friend.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'friend.out'</span>);rewrite(output);</div><div class="line"></div><div class="line">    <span class="keyword">read</span>(n,m);</div><div class="line">    fillchar(head,sizeof(head),<span class="number">0</span>);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(j,t);add(j,t);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    t:=<span class="number">0</span>;tim:=<span class="number">0</span>;ans:=<span class="number">0</span>;</div><div class="line">    fillchar(dfn,sizeof(dfn),<span class="number">0</span>);</div><div class="line">    fillchar(ins,sizeof(ins),false);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">if</span> dfn[i]=<span class="number">0</span> <span class="keyword">then</span> tarjan(i);</div><div class="line">    <span class="keyword">write</span>(ans);</div><div class="line"></div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P3-è¿è´§"><a href="#P3-è¿è´§" class="headerlink" title="P3 è¿è´§"></a>P3 è¿è´§</h1><p>å°w å¼€äº†ä¸€å®¶å¿«é€’å…¬å¸ï¼Œåœ¨n ä¸ªåŸå¸‚ä¹‹é—´è¿›è¡Œè´§ç‰©è¿è¾“å·¥ä½œï¼Œä¸€å…±é›‡äº†m ä¸ªå¿«é€’å‘˜ã€‚<br>æ¯ä¸ªå¿«é€’å‘˜æ€§æ ¼å¾ˆå¥‡ç‰¹ï¼Œç¬¬i å·å¿«é€’å‘˜åªæ„¿æ„å°†è´§ç‰©ä»åŸå¸‚si è¿é€åˆ°tiï¼ˆç”šè‡³ä¸æ„¿æ„å°†è´§ç‰©ä»ti è¿é€åˆ°siï¼‰ï¼Œå¹¶ä¸”å¦‚æœä»–è¿é€çš„è´§ç‰©é‡x&lt;=diï¼Œé‚£ä¹ˆä»–è¦æ±‚è·å¾—çš„æŠ¥é…¬ä¸ºx<em>aiï¼Œå¦åˆ™ä¸ºdi</em>ai+(x-di)*biã€‚<br>ç°åœ¨å°w æ¥åˆ°ä¸€ä¸ªå¤§è®¢å•ï¼Œéœ€è¦å°†f å•ä½è´§ç‰©ä»s è¿é€åˆ°tï¼Œè¯·æ±‚å‡ºå°w çš„æœ€å°å¼€æ”¯ã€‚<br>ä½ å¯ä»¥å‡å®šæ¯ä¸ªå¿«é€’å‘˜çš„è¿è´§é‡æ²¡æœ‰é™åˆ¶ã€‚</p>
<h2 id="æ ¼å¼-2"><a href="#æ ¼å¼-2" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-2"><a href="#è¾“å…¥æ ¼å¼-2" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬ä¸€è¡Œäº”ä¸ªæ•´æ•°nï¼Œmï¼Œsï¼Œtï¼Œf<br>æ¥ä¸‹æ¥m è¡Œæ¯è¡Œäº”ä¸ªæ•°si,ti,ai,bi,diï¼Œæè¿°ä¸€ä¸ªå¿«é€’å‘˜çš„ä¿¡æ¯ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼-2"><a href="#è¾“å‡ºæ ¼å¼-2" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>å¦‚æœ‰è§£è¯·è¾“å‡ºæœ€å°å°å¼€æ”¯ï¼Œå¦åˆ™è¯·è¾“å‡ºâ€œImpossibleâ€ã€‚ï¼ˆä¸å«å¼•å·ï¼‰<br><!--more--></p>
<h2 id="æ ·ä¾‹-2"><a href="#æ ·ä¾‹-2" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-2"><a href="#æ ·ä¾‹è¾“å…¥-2" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>4 4 0 3 5<br>0 1 3 0 3<br>1 3 3 0 3<br>0 2 2 1 6<br>2 3 2 1 6</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-2"><a href="#æ ·ä¾‹è¾“å‡º-2" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>18</p>
</blockquote>
<h2 id="æç¤º-2"><a href="#æç¤º-2" class="headerlink" title="æç¤º"></a>æç¤º</h2><p>$n&lt;=100,m&lt;=1000,si,ti,s,t&lt;=n-1,f,di&lt;=200,ai,bi&lt;=1000$<br>ä¿è¯è‡³å¤šåªæœ‰ä¸€åé‚®é€’å‘˜<span>$ai&lt;bi$</span><!-- Has MathJax -->,å…¶ä½™å‡æ˜¯<span>$ai&gt;bi$</span><!-- Has MathJax --><br>å…±50 ç»„æ•°æ®ï¼Œä¿è¯æ•°æ®æœ‰æ¢¯åº¦ã€‚</p>
<h2 id="é¢˜è§£-2"><a href="#é¢˜è§£-2" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>æƒ³åˆ°ç½‘ç»œæµï¼Œä½†æ¨¡å‹ä¸ä¸€æ ·</p>
<ol>
<li>æ²¡æœ‰æµé‡é™åˆ¶</li>
<li>æœ‰ä¸¤ç§è´¹ç”¨</li>
</ol>
<p>è€ƒè™‘åˆ°åªæœ‰<strong>ä¸€å</strong>é‚®é€’å‘˜<span>$ai&lt;bi$</span><!-- Has MathJax -->ï¼Œäºæ˜¯å¯ä»¥<strong>è´ªå¿ƒ</strong>ã€‚<br>å¦‚æœæ²¡æœ‰è¿™æ ·çš„é‚®é€’å‘˜çš„è¯ï¼Œæ˜¾ç„¶å¯¹äºä¸€ä¸ªé‚®é€’å‘˜è¦è¿<strong>å°½é‡å¤šçš„è´§ç‰©</strong>ï¼Œæ‰èƒ½ä½¿è´¹ç”¨æœ€å°‘ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œç›´æ¥ç”¨æ»¡æµfï¼Œè®¡ç®—æ¯æ¡è¾¹çš„è´¹ç”¨ï¼Œç„¶åè·‘floydå³å¯ã€‚<br>è¿™ä¸ªè´ªå¿ƒå¯ä»¥åè¯ï¼Œå‡è®¾æœ‰ä¸€æ¡è·¯å¾„ä¸Šæœ‰ä¸¤ä¸ªé‚®é€’å‘˜iå’Œjï¼Œå®ƒä»¬çš„æµéƒ½<span>$&lt;f$</span><!-- Has MathJax -->ï¼Œä¸å¦¨è®¾<span>$ai&lt;aj$</span><!-- Has MathJax -->ï¼ŒæŠŠajçš„æµåŠ åˆ°aiä¸Šæ˜¾ç„¶æ›´ä¼˜ã€‚<br>å¦‚æœæœ‰ä¸€ä¸ª<span>$ai&gt;bi$</span><!-- Has MathJax -->çš„é‚®é€’å‘˜çš„è¯ï¼Œå¯¹äºç»è¿‡è¿™ä¸ªé‚®é€’å‘˜xçš„è·¯å¾„s-&gt;tçš„æœ€ä¼˜è§£å­˜å¯èƒ½å­˜åœ¨å¦ä¸€ç§æƒ…å†µï¼š</p>
<ol>
<li>s-&gt;tä¸Šç»è¿‡xè·‘ä¸€ä¸ªæµä¸ºd[x]</li>
<li>s-&gt;tä¸Šä¸ç»è¿‡xè·‘ä¸€ä¸ªæµf-d[x]</li>
</ol>
<p>è¿™æ ·æˆ‘ä»¬å¯ä»¥å¯¹è¿™ä¸¤ç§æƒ…å†µéƒ½è·‘ä¸€æ¬¡floydï¼Œç„¶åæšä¸¾ä¸¤ç‚¹i,jæ ¹æ®ä¸‰æ¬¡floydçš„ç»“æœå¾—åˆ°æœ€å°å€¼ã€‚</p>
<p>å‘ç‚¹</p>
<ol>
<li>f-d[x]çš„æµä¸èƒ½ç»è¿‡x</li>
<li>å­˜åœ¨å¤§é‡é‡è¾¹QAQ</li>
<li>æå¤§å€¼infä¸èƒ½å¤ªå¤§ï¼Œè¦åŠ å››å€å¯èƒ½ä¼šçˆ†longint</li>
</ol>
<dir style="text-align:right"><a href="/2016/08/19/JSOI2016-æé«˜1ç­-Day4/transport.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>transport.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">const</span> inf=<span class="number">100000000</span>;</div><div class="line"><span class="keyword">type</span> </div><div class="line">    int=longint;</div><div class="line">    arr=<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">110</span>,<span class="number">0</span>..<span class="number">110</span>] <span class="keyword">of</span> int;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    ds0,ds1,ds2:arr;</div><div class="line">    a,b,d,s,t:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1010</span>] <span class="keyword">of</span> int;</div><div class="line">    n,m,s0,t0,f,i,j,x,ans:int;</div><div class="line"></div><div class="line"><span class="comment">//flagæ ‡è®°èƒ½å¦ç»è¿‡é‚®é€’å‘˜x</span></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">floyd</span><span class="params">(<span class="keyword">var</span> ds:arr;f:int;flag:boolean)</span>;</span></div><div class="line"><span class="keyword">var</span> i,j,k:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    filldword(ds,sizeof(ds) <span class="keyword">div</span> <span class="number">4</span>,inf);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">if</span> flag <span class="keyword">and</span> (i=x) <span class="keyword">then</span> continue;</div><div class="line">        k:=a[i]*min(f,d[i])+b[i]*max(<span class="number">0</span>,f-d[i]);</div><div class="line">        ds[s[i],t[i]]:=min(k,ds[s[i],t[i]]);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> ds[i,i]:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> k:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">        <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">            <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">                ds[i,j]:=min(ds[i,k]+ds[k,j],ds[i,j]);</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'transport.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'transport.out'</span>);rewrite(output);</div><div class="line">    <span class="keyword">read</span>(n,m,s0,t0,f);</div><div class="line">    inc(s0);inc(t0);</div><div class="line">    x:=-<span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(s[i],t[i],a[i],b[i],d[i]);</div><div class="line">        inc(s[i]);inc(t[i]);</div><div class="line">        <span class="keyword">if</span> a[i]&lt;b[i] <span class="keyword">then</span> x:=i;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    </div><div class="line">    floyd(ds0,f,false);</div><div class="line">    <span class="keyword">if</span> (x=-<span class="number">1</span>) <span class="keyword">or</span> (f&lt;=d[x]) <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">if</span> ds0[s0,t0]=inf <span class="keyword">then</span> <span class="keyword">write</span>(<span class="string">'Impossible'</span>) </div><div class="line">        <span class="keyword">else</span> <span class="keyword">write</span>(ds0[s0,t0]);</div><div class="line">        close(input);close(output);halt;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    </div><div class="line">    floyd(ds1,d[x],false);</div><div class="line">    floyd(ds2,f-d[x],true);</div><div class="line">    ans:=inf;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">        <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">            ans:=min(ans,ds0[s0,i]+ds1[i,j]+ds2[i,j]+ds0[j,t0]);</div><div class="line">    <span class="keyword">if</span> ans=inf <span class="keyword">then</span> <span class="keyword">write</span>(<span class="string">'Impossible'</span>) <span class="keyword">else</span> <span class="keyword">write</span>(ans);</div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;P1-å…¬çº¦æ•°&quot;&gt;&lt;a href=&quot;#P1-å…¬çº¦æ•°&quot; class=&quot;headerlink&quot; title=&quot;P1 å…¬çº¦æ•°&quot;&gt;&lt;/a&gt;P1 å…¬çº¦æ•°&lt;/h1&gt;&lt;p&gt;å°w æœ€è¿‘ä»”ç»†ç ”ç©¶äº†å…¬çº¦æ•°ï¼Œä»–æƒ³åˆ°äº†ä»¥ä¸‹é—®é¢˜ï¼š&lt;br&gt;ç°æœ‰n ä¸ªæ­£æ•´æ•°ï¼Œä»ä¸­é€‰kï¼ˆ2&amp;lt;=k&amp;lt;=nï¼‰ä¸ªï¼Œè®¾è¿™k ä¸ªæ•°çš„æœ€å¤§å…¬çº¦æ•°ä¸ºgï¼Œåˆ™è¿™k ä¸ªæ•°&lt;br&gt;çš„ä»·å€¼ä¸ºk*gã€‚æ±‚è¿™ä¸ªä»·å€¼çš„æœ€å¤§å€¼ã€‚&lt;br&gt;å°w å½“ç„¶çŸ¥é“ç­”æ¡ˆäº†ã€‚ç°åœ¨ä»–æƒ³è€ƒè€ƒä½ ï¼Œä½ èƒ½å¾ˆå¿«å›ç­”å‡ºæ¥å—ï¼Ÿ&lt;/p&gt;
&lt;h2 id=&quot;æ ¼å¼&quot;&gt;&lt;a href=&quot;#æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;æ ¼å¼&quot;&gt;&lt;/a&gt;æ ¼å¼&lt;/h2&gt;&lt;h3 id=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å…¥æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å…¥æ ¼å¼&lt;/h3&gt;&lt;p&gt;ç¬¬ä¸€è¡Œï¼Œä¸€ä¸ªæ•´æ•°nã€‚&lt;br&gt;ç¬¬äºŒè¡Œï¼Œn ä¸ªæ­£æ•´æ•°ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å‡ºæ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å‡ºæ ¼å¼&lt;/h2&gt;&lt;p&gt;ä¸€è¡Œä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºç­”æ¡ˆã€‚&lt;br&gt;
    
    </summary>
    
      <category term="Problem Set" scheme="https://cothrax.github.io/categories/Problem-Set/"/>
    
    
      <category term="OI" scheme="https://cothrax.github.io/tags/OI/"/>
    
      <category term="JSOI" scheme="https://cothrax.github.io/tags/JSOI/"/>
    
      <category term="å›¾è®º" scheme="https://cothrax.github.io/tags/%E5%9B%BE%E8%AE%BA/"/>
    
      <category term="è´ªå¿ƒ" scheme="https://cothrax.github.io/tags/%E8%B4%AA%E5%BF%83/"/>
    
      <category term="æ•°è®º" scheme="https://cothrax.github.io/tags/%E6%95%B0%E8%AE%BA/"/>
    
      <category term="å¼ºè¿é€šåˆ†é‡" scheme="https://cothrax.github.io/tags/%E5%BC%BA%E8%BF%9E%E9%80%9A%E5%88%86%E9%87%8F/"/>
    
  </entry>
  
  <entry>
    <title>[JSOI2016] æé«˜2ç­ æ ‘å½¢DPï¼ˆä¸€ï¼‰</title>
    <link href="https://cothrax.github.io/2016/08/18/JSOI2016-%E6%8F%90%E9%AB%982%E7%8F%AD-%E6%A0%91%E5%BD%A2DP/"/>
    <id>https://cothrax.github.io/2016/08/18/JSOI2016-æé«˜2ç­-æ ‘å½¢DP/</id>
    <published>2016-08-18T14:30:18.000Z</published>
    <updated>2016-08-18T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="P1-å­¦æ ¡ç½‘ç»œ"><a href="#P1-å­¦æ ¡ç½‘ç»œ" class="headerlink" title="P1 å­¦æ ¡ç½‘ç»œ"></a>P1 å­¦æ ¡ç½‘ç»œ</h1><p>ä¸€æ‰€å­¦æ ¡åœ¨å‡ å¹´å‰è´­è¿›äº†ç¬¬ä¸€å°ç”µè„‘ï¼ˆè¿™å°ç”µè„‘çš„ç¼–å·ä¸º1ï¼‰ã€‚æœ€è¿‘å‡ å¹´ï¼Œå­¦æ ¡åˆè´­ä¹°äº†N-1å°ç”µè„‘ï¼Œæ¯å°æ–°ç”µè„‘å’Œä¹‹å‰çš„æŸä¸€å°ç”µè„‘è¿æ¥ã€‚å­¦æ ¡çš„ç®¡ç†å‘˜æƒ³çŸ¥é“å¯¹äºæ¯ä¸€å°ç”µè„‘iï¼Œåˆ°ä¸å®ƒè·ç¦»æœ€è¿œçš„ç”µè„‘çš„è·ç¦»Siã€‚ä½ éœ€è¦æä¾›è¿™ä¸ªä¿¡æ¯ã€‚<br><img src="/2016/08/18/JSOI2016-æé«˜2ç­-æ ‘å½¢DP/T.jpg" alt="T.jpg" title=""><br>Hint: æ ·ä¾‹è¾“å…¥å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä»å›¾ä¸­ä½ å¯ä»¥çŸ¥é“ï¼Œ4å·ç”µè„‘åˆ°1å·ç”µè„‘çš„è·ç¦»æœ€è¿œï¼Œæ‰€ä»¥S1=3ã€‚4å·ç”µè„‘å’Œ5å·ç”µè„‘åˆ°2å·ç”µè„‘çš„è·ç¦»æœ€è¿œï¼Œæ‰€ä»¥S2=2ã€‚5å·ç”µè„‘åˆ°3å·ç”µè„‘è·ç¦»æœ€è¿œï¼Œæ‰€ä»¥S3=3ã€‚ç”±æ­¤ç±»æ¨S4=4ï¼ŒS5=4ã€‚</p>
<h2 id="æ ¼å¼"><a href="#æ ¼å¼" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼"><a href="#è¾“å…¥æ ¼å¼" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>è¾“å…¥æ–‡ä»¶åŒ…å«å¤šç»„æµ‹è¯•æ•°æ®ï¼Œå¯¹äºæ¯ç»„æµ‹è¯•æ•°æ®ï¼š<br>ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°N (N&lt;=10000) ï¼›<br>æ¥ä¸‹æ¥N-1è¡Œæè¿°æ¯ä¸€å°ç”µè„‘ã€‚ç¬¬iè¡ŒåŒ…å«ä¸¤ä¸ªç”¨ç©ºæ ¼éš”å¼€çš„æ•´æ•°yã€lï¼Œè¡¨ç¤ºiå·ç”µè„‘ä¸ä¹‹å‰çš„yå·ç”µè„‘è¿æ¥ï¼Œè·ç¦»ä¸ºlã€‚<br>æ‰€æœ‰lä¹‹å’Œä¸è¶…è¿‡10^9ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼"><a href="#è¾“å‡ºæ ¼å¼" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>å¯¹äºæ¯ç»„æµ‹è¯•æ•°æ®è¾“å‡ºNè¡Œï¼Œç¬¬iè¡Œè¡¨ç¤ºç¦»iå·ç”µè„‘çš„æœ€è¿œè·ç¦»Siã€‚<br><a id="more"></a></p>
<h2 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥"><a href="#æ ·ä¾‹è¾“å…¥" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>5<br>1 1<br>2 1<br>3 1<br>1 1</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º"><a href="#æ ·ä¾‹è¾“å‡º" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>3 2 3 4 4</p>
</blockquote>
<h2 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><dir style="text-align:right"><a href="/2016/08/18/JSOI2016-æé«˜2ç­-æ ‘å½¢DP/computer.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>computer.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">const</span> inf=<span class="number">100000000</span>;</div><div class="line"><span class="keyword">type</span></div><div class="line">    int=longint; </div><div class="line">    edge=<span class="keyword">record</span> f,t,w,next:int <span class="keyword">end</span>;</div><div class="line"><span class="keyword">var</span></div><div class="line">    g:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">10010</span>] <span class="keyword">of</span> edge;</div><div class="line">    head,par:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">10010</span>] <span class="keyword">of</span> int;</div><div class="line">    f,p:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">10010</span>,<span class="number">0</span>..<span class="number">2</span>] <span class="keyword">of</span> int;</div><div class="line">    n,i,j,k:int;</div><div class="line">    </div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">add</span><span class="params">(f,t,w:int)</span>;</span></div><div class="line"><span class="keyword">var</span> m:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    inc(head[<span class="number">0</span>]);m:=head[<span class="number">0</span>];</div><div class="line">    g[m].f:=f;g[m].t:=t;g[m].w:=w;</div><div class="line">    g[m].next:=head[f];head[f]:=m;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">dp</span><span class="params">(v:int)</span>;</span></div><div class="line"><span class="keyword">var</span> i,u,tmp:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    fillchar(f[v],sizeof(f[v]),<span class="number">0</span>);</div><div class="line">    i:=head[v];</div><div class="line">    <span class="keyword">while</span> i&lt;&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        u:=g[i].t;dp(u);</div><div class="line">        tmp:=f[u,<span class="number">0</span>]+g[i].w;</div><div class="line">        <span class="keyword">if</span> tmp&gt;f[v,<span class="number">0</span>] <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            f[v,<span class="number">1</span>]:=f[v,<span class="number">0</span>];</div><div class="line">            f[v,<span class="number">0</span>]:=tmp;</div><div class="line">            f[v,<span class="number">2</span>]:=u;</div><div class="line">        <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">if</span> tmp&gt;f[v,<span class="number">1</span>] <span class="keyword">then</span></div><div class="line">            f[v,<span class="number">1</span>]:=tmp;</div><div class="line">        i:=g[i].next;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">dfs</span><span class="params">(v,w:int)</span>;</span></div><div class="line"><span class="keyword">var</span> i,tmp:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    p[v]:=f[v];</div><div class="line">    <span class="keyword">if</span> p[par[v],<span class="number">2</span>]&lt;&gt;v <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">        tmp:=p[par[v],<span class="number">0</span>]+w;</div><div class="line">        <span class="keyword">if</span> tmp&gt;p[v,<span class="number">0</span>] <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            p[v,<span class="number">1</span>]:=p[v,<span class="number">0</span>];</div><div class="line">            p[v,<span class="number">0</span>]:=tmp;</div><div class="line">            p[v,<span class="number">2</span>]:=par[v];</div><div class="line">        <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">if</span> tmp&gt;p[v,<span class="number">1</span>] <span class="keyword">then</span></div><div class="line">            p[v,<span class="number">1</span>]:=tmp;</div><div class="line">    <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">begin</span></div><div class="line">        tmp:=p[par[v],<span class="number">1</span>]+w;</div><div class="line">        <span class="keyword">if</span> tmp&gt;p[v,<span class="number">0</span>] <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            p[v,<span class="number">1</span>]:=p[v,<span class="number">0</span>];</div><div class="line">            p[v,<span class="number">0</span>]:=tmp;</div><div class="line">            p[v,<span class="number">2</span>]:=par[v];</div><div class="line">        <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">if</span> tmp&gt;p[v,<span class="number">1</span>] <span class="keyword">then</span></div><div class="line">            p[v,<span class="number">1</span>]:=tmp;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    i:=head[v];</div><div class="line">    <span class="keyword">while</span> i&lt;&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        dfs(g[i].t,g[i].w);</div><div class="line">        i:=g[i].next;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'computer.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'computer.out'</span>);rewrite(output);</div><div class="line"></div><div class="line">    <span class="keyword">read</span>(n);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">2</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(j,k);</div><div class="line">        add(j,i,k);par[i]:=j;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    dp(<span class="number">1</span>);</div><div class="line">    dfs(<span class="number">1</span>,-inf);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> writeln(p[i,<span class="number">0</span>]);</div><div class="line"></div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P2-é»‘æ‰‹å…š"><a href="#P2-é»‘æ‰‹å…š" class="headerlink" title="P2 é»‘æ‰‹å…š"></a>P2 é»‘æ‰‹å…š</h1><p>å»å¹´çš„èŠåŠ å“¥å……æ»¡äº†é»‘å¸®äº‰æ–—å’Œå¥‡æ€ªçš„è°‹æ€ã€‚è­¦å¯Ÿå±€é•¿çœŸçš„åŒå€¦äº†æ‰€æœ‰è¿™äº›ç½ªè¡Œï¼Œå†³å®šé€®æ•é»‘æ‰‹å…šé¢†è¢–ã€‚<br>ä¸å¹¸çš„æ˜¯ï¼ŒèŠåŠ å“¥é»‘æ‰‹å…šç›¸å½“å¤æ‚çš„ç»“æ„ã€‚æ²¡æœ‰äººçŸ¥é“é»‘æ‰‹å…šçš„ä¿¡æ¯ã€‚è­¦æ–¹å·²ç»è¿½è¸ªä»–ä»¬ä¸€æ®µæ—¶é—´çš„æ´»åŠ¨ï¼Œå¹¶ä¸”çŸ¥é“ä»–ä»¬ä¸­çš„ä¸€äº›äººäº’ç›¸é€šä¿¡ã€‚æ ¹æ®æ”¶é›†åˆ°çš„èµ„æ–™ï¼Œè­¦å¯Ÿå±€é•¿è¡¨æ˜é»‘æ‰‹å…šçš„å±‚æ¬¡ç»“æ„å¯ä»¥è¡¨ç¤ºä¸ºä¸€æ£µæ ‘ã€‚é»‘æ‰‹å…šé¦–è„‘æ˜¯æ ‘çš„æ ¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹è¡¨ç¤ºä¸€ä¸ªäººï¼Œä¸€ä¸ªèŠ‚ç‚¹çš„å­©å­å³ä¸ºè¿™ä¸ªèŠ‚ç‚¹è¡¨ç¤ºçš„äººçš„ç›´æ¥ä¸‹å±ã€‚<br>æ›´ä¸å¹¸çš„æ˜¯ï¼Œè™½ç„¶è­¦æ–¹çŸ¥é“äº†åŒªå¾’çš„é€šè®¯ï¼Œä»–ä»¬ä¸çŸ¥é“è°æ˜¯é»‘æ‰‹å…šé¦–è„‘ã€‚å› æ­¤ä»–ä»¬åªæœ‰é€šä¿¡å…³ç³»çš„æ— å‘æ ‘ã€‚<br>åŸºäºè¿™æ ·çš„æ€æƒ³ï¼Œè­¦å¯Ÿå±€é•¿çŒœæµ‹å¯èƒ½è¡¨ç¤ºé»‘æ‰‹å…šé¦–è„‘çš„èŠ‚ç‚¹å¿…é¡»æ»¡è¶³ï¼šåœ¨åˆ é™¤å®ƒåï¼ŒåŒ…å«æœ€å¤šèŠ‚ç‚¹çš„å‰©ä½™è¿é€šå—çš„èŠ‚ç‚¹æ•°æœ€å°ã€‚å¸®åŠ©è­¦å¯Ÿæ‰¾åˆ°æ‰€æœ‰å¯èƒ½æˆä¸ºé»‘æ‰‹å…šé¦–è„‘çš„èŠ‚ç‚¹ã€‚</p>
<h2 id="æ ¼å¼-1"><a href="#æ ¼å¼-1" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-1"><a href="#è¾“å…¥æ ¼å¼-1" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°n(2â‰¤nâ‰¤50000)ï¼Œè¡¨ç¤ºæœ‰nä¸ªäººï¼Œç¼–å·ä¸º1~nã€‚<br>æ¥ä¸‹æ¥n-1è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•°xï¼Œyï¼Œè¡¨ç¤ºç¼–å·ä¸ºxçš„äººå’Œç¼–å·ä¸ºyçš„äººä¹‹é—´æœ‰é€šä¿¡ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼-1"><a href="#è¾“å‡ºæ ¼å¼-1" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>è¾“å‡ºæ‰€æœ‰å¯èƒ½æˆä¸ºé»‘æ‰‹å…šé¦–è„‘çš„äººçš„ç¼–å·ï¼ŒæŒ‰å‡åºæ’åˆ—ï¼Œä¸¤ä¸ªç¼–å·ä¹‹é—´ç”¨ç©ºæ ¼éš”å¼€ã€‚<br><!--more--></p>
<h2 id="æ ·ä¾‹-1"><a href="#æ ·ä¾‹-1" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-1"><a href="#æ ·ä¾‹è¾“å…¥-1" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>6<br>1 2<br>2 3<br>2 5<br>3 4<br>3 6</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-1"><a href="#æ ·ä¾‹è¾“å‡º-1" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>2 3</p>
</blockquote>
<h2 id="é¢˜è§£-1"><a href="#é¢˜è§£-1" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><dir style="text-align:right"><a href="/2016/08/18/JSOI2016-æé«˜2ç­-æ ‘å½¢DP/godfather.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>godfather.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">type</span> </div><div class="line">    int=longint;</div><div class="line">    edge=<span class="keyword">record</span> t,next:int <span class="keyword">end</span>;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    n,i,j,k,mins:int;</div><div class="line">    g:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">100010</span>] <span class="keyword">of</span> edge;</div><div class="line">    head,siz,f:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">50010</span>] <span class="keyword">of</span> int;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">add</span><span class="params">(f,t:int)</span>;</span></div><div class="line"><span class="keyword">var</span> m:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    inc(head[<span class="number">0</span>]);m:=head[<span class="number">0</span>];</div><div class="line">    g[m].t:=t;</div><div class="line">    g[m].next:=head[f];head[f]:=m;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">dp</span><span class="params">(v,p:int)</span>;</span></div><div class="line"><span class="keyword">var</span> i,u:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    i:=head[v];</div><div class="line">    siz[v]:=<span class="number">1</span>;</div><div class="line">    <span class="keyword">while</span> i&lt;&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        u:=g[i].t;</div><div class="line">        <span class="keyword">if</span> u&lt;&gt;p <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            dp(u,v);</div><div class="line">            inc(siz[v],siz[u]);</div><div class="line">            f[v]:=max(f[v],siz[u]);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">        i:=g[i].next;</div><div class="line">    <span class="keyword">end</span>;    </div><div class="line">    f[v]:=max(f[v],n-siz[v]);</div><div class="line">    mins:=min(mins,f[v]);</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'godfather.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'godfather.out'</span>);rewrite(output);</div><div class="line"></div><div class="line">    <span class="keyword">read</span>(n);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n-<span class="number">1</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(j,k);</div><div class="line">        add(j,k);add(k,j);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    mins:=maxlongint;</div><div class="line">    dp(<span class="number">1</span>,<span class="number">0</span>);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">        <span class="keyword">if</span> f[i]=mins <span class="keyword">then</span> <span class="keyword">write</span>(i,<span class="string">' '</span>);</div><div class="line"></div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P3-æ ‘çš„åˆå¹¶"><a href="#P3-æ ‘çš„åˆå¹¶" class="headerlink" title="P3 æ ‘çš„åˆå¹¶"></a>P3 æ ‘çš„åˆå¹¶</h1><p>è¯è¯´moreDç»è¿‡ä¸æ‡ˆåŠªåŠ›ï¼Œç»ˆäºèƒŒå®Œäº†å¾ªç¯æ•´æ•°ï¼Œä¹Ÿç»ˆäºå®Œæˆäº†ä»–çš„è›‹ç³•å¤§é¤ã€‚ ä½†æ˜¯ä¸å¹¸çš„æ˜¯ï¼Œ moreDå¾—åˆ°äº†è¯…å’’ï¼Œå—åˆ°è¯…å’’çš„åŸå› è‡³ä»Šæ— äººçŸ¥æ™“ã€‚<br>moreDåœ¨å‘è§‰è‡ªå·±å¾—åˆ°è¯…å’’ä¹‹åï¼Œå†³å®šå»å¯»æ‰¾é—»åéè¿©çš„æœ¯å£«CDå¸®å¿™ã€‚ è¯è¯´CDæœ€è¿‘åœ¨æOIï¼Œé‡åˆ°äº†ä¸€é“æœ‰è¶£çš„é¢˜ç›®ï¼š ç»™å®šä¸¤æ£µæ ‘ï¼Œ åˆ™æ€»å…±æœ‰N*Mç§æ–¹æ¡ˆæŠŠè¿™ä¸¤æ£µæ ‘é€šè¿‡åŠ ä¸€æ¡è¾¹è¿æˆä¸€æ£µæ ‘ï¼Œ é‚£è¿™N*Mæ£µ æ ‘çš„ç›´å¾„ä¹‹å’Œæ˜¯å¤šå°‘å‘¢ï¼Ÿ<br>CDä¸ºäº†è€ƒéªŒmoreDæ˜¯å¦å€¼å¾—è‡ªå·±è´¹å¿ƒåŠ›ä¸ºä»–é™¤å»è¯…å’’ï¼Œäºæ˜¯è¦ä»–ç¼–ç¨‹å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œ ä½†æ˜¯è¿™moreDæ—©å°±è¢«è¯…å’’ææ™•äº†å¤´è„‘ï¼Œå°±åªå¥½è¯·ä½ å¸®åŠ©ä»–äº†ã€‚ </p>
<h2 id="æ ¼å¼-2"><a href="#æ ¼å¼-2" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-2"><a href="#è¾“å…¥æ ¼å¼-2" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ­£æ•´æ•°N,Mï¼Œåˆ†åˆ«è¡¨ç¤ºä¸¤æ£µæ ‘çš„å¤§å°ã€‚ æ¥ä¸‹æ¥N-1è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ­£æ•´æ•°ai,bi,è¡¨ç¤ºç¬¬ä¸€æ£µæ ‘ä¸Šçš„è¾¹ã€‚ æ¥ä¸‹æ¥M-1è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ­£æ•´æ•°ci,di,è¡¨ç¤ºç¬¬äºŒæ£µæ ‘ä¸Šçš„è¾¹ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼-2"><a href="#è¾“å‡ºæ ¼å¼-2" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>ä¸€ä¸ªæ•´æ•°ï¼Œç­”æ¡ˆ<br><!--more--></p>
<h2 id="æ ·ä¾‹-2"><a href="#æ ·ä¾‹-2" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-2"><a href="#æ ·ä¾‹è¾“å…¥-2" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>4 3<br>1 2<br>2 3<br>2 4<br>1 3<br>2 3</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-2"><a href="#æ ·ä¾‹è¾“å‡º-2" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>53</p>
</blockquote>
<h2 id="é¢˜è§£-2"><a href="#é¢˜è§£-2" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>é¦–å…ˆï¼Œç±»ä¼¼äºP1ï¼Œæ±‚ä¸¤æ£µæ ‘ä¸Šï¼Œæ¯ä¸€ä¸ªç‚¹çš„æœ€é•¿è·¯g[i]ã€‚$O(N+M)$<br>ç„¶åï¼Œå¦‚æœæšä¸¾çš„è¯$O(NM)$è‚¯å®šä¼šTLEçš„ï¼Œäºæ˜¯<strong>ä¹±æ</strong>ï¼š<br>cnt[l]ç»Ÿè®¡g[i]å°äºlçš„èŠ‚ç‚¹ä¸ªæ•°ï¼Œåšå‰ç¼€å’Œå³å¯ï¼Œ$O(N+M)$<br>é¡ºä¾¿å¯ä»¥ç®—å‡ºä¸¤æ£µæ ‘åŸæ¥çš„ç›´å¾„d[0]å’Œd[1]ï¼Œæˆ‘ä»¬è®°dl=max(d[0],d[1])</p>
<p>å…ˆæƒ³ç¬¬ä¸€æ£µæ ‘ï¼šä»èŠ‚ç‚¹iè¿ä¸€æ¡è¾¹åˆ°å¦ä¸€æ£µæ ‘çš„èŠ‚ç‚¹xä¸Šï¼Œå½“$g[i]+g[x]+1&gt;=dl$æ—¶ï¼Œg[i]ä¼šè¢«ç»Ÿè®¡è¿›ç­”æ¡ˆï¼Œå°†å¼å­å˜å½¢ä¸€ä¸‹$g[x]&gt;=dl-g[i]-1$ï¼Œä¹Ÿå°±æ˜¯è¯´g[i]è¢«ç»Ÿè®¡è¿›ç­”æ¡ˆçš„æ¬¡æ•°=å¦ä¸€æ£µæ ‘ä¸Šæœ€é•¿è·¯$&gt;=dl-g[i]-1$çš„èŠ‚ç‚¹ä¸ªæ•°ï¼Œè¿™ä¸ªå€¼æˆ‘ä»¬ç”¨cntç®—è¿‡äº†ã€‚<br>åŒç†è€ƒè™‘ç¬¬äºŒæ£µæ ‘å°±å¯ä»¥äº†ã€‚</p>
<p>ä¸ºäº†é˜²æ­¢ æ–°è¿çš„è¾¹1 å’Œ ä¸èƒ½å½¢æˆæ–°çš„ç›´å¾„ï¼ˆæ–°ç›´å¾„å°äºdlï¼‰çš„æ ‘ è¢«é‡å¤è®¡ç®—ï¼Œæˆ‘ä»¬ç»Ÿè®¡n*mæ£µæ ‘ä¸­ï¼Œèƒ½è¿æˆæ–°ç›´å¾„çš„æ ‘çš„ä¸ªæ•°æ˜¯$k$ï¼Œç­”æ¡ˆåŠ ä¸Š$k+(n*m-k)*dl$å°±å¯ä»¥äº†ã€‚</p>
<p>è¿™æ ·æ€»çš„å¤æ‚åº¦æ˜¯$O(N+M)$<br>ä½†æ˜¯æœ‰ä¸‰ä¸ªç‚¹æ•°æ®é‡å¤ªå¤§å¯¼è‡´é€’å½’è¿‡æ·±ï¼Œç„¶å202äº†ã€‚ã€‚ã€‚è¿™ä¸æ€ªæˆ‘ï¼Œå› ä¸ºæˆ‘è¯•äº†ä¸€ä¸‹æ ‡ç¨‹ä¹Ÿ202äº†233ã€‚</p>
<dir style="text-align:right"><a href="/2016/08/18/JSOI2016-æé«˜2ç­-æ ‘å½¢DP/connect.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>connect.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">type</span> </div><div class="line">    int=longint;</div><div class="line">    edge=<span class="keyword">record</span> t,next:int <span class="keyword">end</span>;</div><div class="line">    tree=<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">200010</span>] <span class="keyword">of</span> edge;</div><div class="line">    arr=<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">100010</span>] <span class="keyword">of</span> int;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    t:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1</span>] <span class="keyword">of</span> tree;</div><div class="line">    h:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1</span>] <span class="keyword">of</span> arr;</div><div class="line">    f,g:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1</span>,<span class="number">0</span>..<span class="number">100010</span>,<span class="number">0</span>..<span class="number">2</span>] <span class="keyword">of</span> int;</div><div class="line">    cnt:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1</span>,<span class="number">0</span>..<span class="number">100010</span>] <span class="keyword">of</span> int;</div><div class="line">    d,n:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1</span>] <span class="keyword">of</span> int;</div><div class="line">    i,j,f0,t0,dl,k,tmp:int;ans:int64;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">add</span><span class="params">(<span class="keyword">var</span> g:tree;<span class="keyword">var</span> head:arr;f,t:int)</span>;</span></div><div class="line"><span class="keyword">var</span> m:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    inc(head[<span class="number">0</span>]);m:=head[<span class="number">0</span>];</div><div class="line">    g[m].t:=t;</div><div class="line">    g[m].next:=head[f];head[f]:=m;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">dp</span><span class="params">(x,v,p:int)</span>;</span></div><div class="line"><span class="keyword">var</span> i,u,tmp:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    fillchar(f[x,v],sizeof(f[x,v]),<span class="number">0</span>);</div><div class="line">    i:=h[x][v];</div><div class="line">    <span class="keyword">while</span> i&lt;&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        u:=t[x][i].t;</div><div class="line">        <span class="keyword">if</span> u&lt;&gt;p <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            dp(x,u,v);</div><div class="line">            tmp:=f[x,u,<span class="number">0</span>]+<span class="number">1</span>;</div><div class="line">            <span class="keyword">if</span> tmp&gt;f[x,v,<span class="number">0</span>] <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">                f[x,v,<span class="number">1</span>]:=f[x,v,<span class="number">0</span>];</div><div class="line">                f[x,v,<span class="number">0</span>]:=tmp;</div><div class="line">                f[x,v,<span class="number">2</span>]:=u;</div><div class="line">            <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">if</span> tmp&gt;f[x,v,<span class="number">1</span>] <span class="keyword">then</span> </div><div class="line">                f[x,v,<span class="number">1</span>]:=tmp;</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">        i:=t[x][i].next;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">dfs</span><span class="params">(x,v,p:int)</span>;</span></div><div class="line"><span class="keyword">var</span> i,tmp:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    g[x,v]:=f[x,v];</div><div class="line">    <span class="keyword">if</span> p&lt;&gt;<span class="number">0</span> <span class="keyword">then</span> </div><div class="line">        <span class="keyword">if</span> g[x,p,<span class="number">2</span>]&lt;&gt;v <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            tmp:=g[x,p,<span class="number">0</span>]+<span class="number">1</span>;</div><div class="line">            <span class="keyword">if</span> tmp&gt;g[x,v,<span class="number">0</span>] <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">                g[x,v,<span class="number">1</span>]:=g[x,v,<span class="number">0</span>];</div><div class="line">                g[x,v,<span class="number">0</span>]:=tmp;</div><div class="line">                g[x,v,<span class="number">2</span>]:=p;</div><div class="line">            <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">if</span> tmp&gt;g[x,v,<span class="number">1</span>] <span class="keyword">then</span></div><div class="line">                g[x,v,<span class="number">1</span>]:=tmp;</div><div class="line">        <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">begin</span></div><div class="line">            tmp:=g[x,p,<span class="number">1</span>]+<span class="number">1</span>;</div><div class="line">            <span class="keyword">if</span> tmp&gt;g[x,v,<span class="number">0</span>] <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">                g[x,v,<span class="number">1</span>]:=g[x,v,<span class="number">0</span>];</div><div class="line">                g[x,v,<span class="number">0</span>]:=tmp;</div><div class="line">                g[x,v,<span class="number">2</span>]:=p;</div><div class="line">            <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">if</span> tmp&gt;g[x,v,<span class="number">1</span>] <span class="keyword">then</span></div><div class="line">                g[x,v,<span class="number">1</span>]:=tmp;</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    i:=h[x][v];</div><div class="line">    <span class="keyword">while</span> i&lt;&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">if</span> t[x][i].t&lt;&gt;p <span class="keyword">then</span> dfs(x,t[x][i].t,v);</div><div class="line">        i:=t[x][i].next;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'connect.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'connect.out'</span>);rewrite(output);</div><div class="line"></div><div class="line">    <span class="keyword">read</span>(n[<span class="number">0</span>],n[<span class="number">1</span>]);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">0</span> <span class="keyword">to</span> <span class="number">1</span> <span class="keyword">do</span></div><div class="line">        <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> n[i]-<span class="number">1</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            <span class="keyword">read</span>(f0,t0);</div><div class="line">            add(t[i],h[i],f0,t0);add(t[i],h[i],t0,f0);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">0</span> <span class="keyword">to</span> <span class="number">1</span> <span class="keyword">do</span> <span class="keyword">begin</span> </div><div class="line">        dp(i,<span class="number">1</span>,<span class="number">0</span>);</div><div class="line">        dfs(i,<span class="number">1</span>,<span class="number">0</span>) </div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    </div><div class="line">    <span class="keyword">for</span> i:=<span class="number">0</span> <span class="keyword">to</span> <span class="number">1</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        d[i]:=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> n[i] <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            inc(cnt[i,g[i,j,<span class="number">0</span>]]);</div><div class="line">            d[i]:=max(d[i],g[i,j,<span class="number">0</span>]);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">        <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> d[i] <span class="keyword">do</span></div><div class="line">            inc(cnt[i,j],cnt[i,j-<span class="number">1</span>]);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    dl:=max(d[<span class="number">0</span>],d[<span class="number">1</span>]);</div><div class="line">    ans:=<span class="number">0</span>;k:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">0</span> <span class="keyword">to</span> <span class="number">1</span> <span class="keyword">do</span></div><div class="line">        <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> n[i] <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            tmp:=n[<span class="number">1</span>-i]-cnt[<span class="number">1</span>-i,dl-g[i,j,<span class="number">0</span>]-<span class="number">1</span>];</div><div class="line">            inc(ans,tmp*g[i,j,<span class="number">0</span>]);</div><div class="line">            <span class="keyword">if</span> i=<span class="number">0</span> <span class="keyword">then</span> inc(k,tmp);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    inc(ans,k+(n[<span class="number">0</span>]*n[<span class="number">1</span>]-k)*dl);</div><div class="line">    <span class="keyword">write</span>(ans);</div><div class="line"></div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P4-Contestants-Division"><a href="#P4-Contestants-Division" class="headerlink" title="P4 Contestants Division"></a>P4 Contestants Division</h1><p>æœ‰ä¸€æ£µNä¸ªç‚¹N-1æ¡è¾¹çš„æ ‘ï¼Œæ¯ä¸ªç‚¹æœ‰ä¸€ä¸ªæƒå€¼ã€‚éœ€è¦åˆ å»ä¸€æ¡è¾¹ä½¿è¿™æ£µæ ‘åˆ†æˆçš„ä¸¤éƒ¨åˆ†æƒå€¼å·®æœ€å°ï¼Œæ±‚å‡ºæœ€å°çš„æƒå€¼ã€‚</p>
<h2 id="æ ¼å¼-3"><a href="#æ ¼å¼-3" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-3"><a href="#è¾“å…¥æ ¼å¼-3" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>å«æœ‰å¤šç»„æµ‹è¯•æ•°æ®ï¼Œæœ€åä»¥0 0 ç»“å°¾ã€‚<br>ç¬¬ä¸€è¡Œï¼šNå’ŒMï¼Œè¡¨ç¤ºç‚¹æ•°å’Œè¾¹æ•°ï¼ˆM=N-1ï¼‰ã€‚<br>ç¬¬äºŒè¡Œï¼šNä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºNä¸ªç‚¹çš„æƒå€¼ã€‚<br>æ¥ä¸‹æ¥Mè¡Œï¼šæ¯è¡Œä¸¤ä¸ªæ•°aï¼Œbï¼Œè¡¨ç¤ºaå’Œbæœ‰è¿è¾¹ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼-3"><a href="#è¾“å‡ºæ ¼å¼-3" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>æœ€å°çš„æƒå€¼å·®ã€‚æ ¼å¼è§æ ·ä¾‹<br><!--more--></p>
<h2 id="æ ·ä¾‹-3"><a href="#æ ·ä¾‹-3" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-3"><a href="#æ ·ä¾‹è¾“å…¥-3" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>7 6<br>1 1 1 1 1 1 1<br>1 2<br>2 7<br>3 7<br>4 6<br>6 2<br>5 7<br>0 0</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-3"><a href="#æ ·ä¾‹è¾“å‡º-3" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>Case 1: 1</p>
</blockquote>
<h2 id="é¢˜è§£-3"><a href="#é¢˜è§£-3" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>è¿™æ˜¯<a href="http://poj.org/problem?id=3140" target="_blank" rel="external">POJ 3140</a>ï¼Œé¢˜ç›®è¢«è€å¸ˆç®€åŒ–äº†äºæ˜¯ç›´æ¥åšå°±å¥½äº†ï¼Œæ•°æ®èŒƒå›´åˆ°POJçœ‹å§ã€‚<br>ACM OJå¯¹pascalæ€»æ˜¯å¼‚å¸¸çš„ä¸å‹å¥½ï¼Œmathåº“ä¸èƒ½ç”¨ï¼Œabs(int64)éƒ½æ²¡æœ‰é‡è½½ã€‚<br>å…³äºè¿™ä¸€é¢˜ï¼Œç»Ÿè®¡å­æ ‘æƒå€¼å’Œå°±å¯ä»¥äº†ã€‚</p>
<p><dir style="text-align:right"><a href="/2016/08/18/JSOI2016-æé«˜2ç­-æ ‘å½¢DP/3140.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir><br><figure class="highlight delphi"><figcaption><span>3140.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> </div><div class="line">    int=longint;</div><div class="line">    edge=<span class="keyword">record</span> t,next:int <span class="keyword">end</span>;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    n,m,i,f0,t0,cnt:int;sum,ans:int64;</div><div class="line">    g:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">2000010</span>] <span class="keyword">of</span> edge;</div><div class="line">    head:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">100010</span>] <span class="keyword">of</span> int;</div><div class="line">    w,f:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">100010</span>] <span class="keyword">of</span> int64;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">min</span><span class="params">(a,b:int64)</span>:</span>int64;</div><div class="line"><span class="keyword">begin</span> <span class="keyword">if</span> a&gt;b <span class="keyword">then</span> min:=b <span class="keyword">else</span> min:=a <span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">qabs</span><span class="params">(a:int64)</span>:</span>int64;</div><div class="line"><span class="keyword">begin</span> <span class="keyword">if</span> a&lt;<span class="number">0</span> <span class="keyword">then</span> qabs:=-a <span class="keyword">else</span> qabs:=a <span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">add</span><span class="params">(f,t:int)</span>;</span></div><div class="line"><span class="keyword">var</span> m:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    inc(head[<span class="number">0</span>]);m:=head[<span class="number">0</span>];</div><div class="line">    g[m].t:=t;</div><div class="line">    g[m].next:=head[f];head[f]:=m;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">dp</span><span class="params">(v,p:int)</span>;</span></div><div class="line"><span class="keyword">var</span> i,u:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    f[v]:=w[v];</div><div class="line">    i:=head[v];</div><div class="line">    <span class="keyword">while</span> i&lt;&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        u:=g[i].t;</div><div class="line">        <span class="keyword">if</span> p&lt;&gt;u <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            dp(u,v);</div><div class="line">            inc(f[v],f[u]);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">        i:=g[i].next;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    ans:=min(ans,qabs(sum-f[v]*<span class="number">2</span>));</div><div class="line"><span class="keyword">end</span>;</div><div class="line">    </div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">read</span>(n,m);cnt:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span> (n&lt;&gt;<span class="number">0</span>) <span class="keyword">and</span> (m&lt;&gt;<span class="number">0</span>) <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        fillchar(head,sizeof(head),<span class="number">0</span>);</div><div class="line">        sum:=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            <span class="keyword">read</span>(w[i]);</div><div class="line">            inc(sum,w[i]);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">        <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            <span class="keyword">read</span>(f0,t0);</div><div class="line">            add(f0,t0);add(t0,f0);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">        ans:=sum;</div><div class="line">        dp(<span class="number">1</span>,<span class="number">0</span>);</div><div class="line">        inc(cnt);</div><div class="line">        writeln(<span class="string">'Case '</span>,cnt,<span class="string">': '</span>,ans);</div><div class="line">        <span class="keyword">read</span>(n,m);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;P1-å­¦æ ¡ç½‘ç»œ&quot;&gt;&lt;a href=&quot;#P1-å­¦æ ¡ç½‘ç»œ&quot; class=&quot;headerlink&quot; title=&quot;P1 å­¦æ ¡ç½‘ç»œ&quot;&gt;&lt;/a&gt;P1 å­¦æ ¡ç½‘ç»œ&lt;/h1&gt;&lt;p&gt;ä¸€æ‰€å­¦æ ¡åœ¨å‡ å¹´å‰è´­è¿›äº†ç¬¬ä¸€å°ç”µè„‘ï¼ˆè¿™å°ç”µè„‘çš„ç¼–å·ä¸º1ï¼‰ã€‚æœ€è¿‘å‡ å¹´ï¼Œå­¦æ ¡åˆè´­ä¹°äº†N-1å°ç”µè„‘ï¼Œæ¯å°æ–°ç”µè„‘å’Œä¹‹å‰çš„æŸä¸€å°ç”µè„‘è¿æ¥ã€‚å­¦æ ¡çš„ç®¡ç†å‘˜æƒ³çŸ¥é“å¯¹äºæ¯ä¸€å°ç”µè„‘iï¼Œåˆ°ä¸å®ƒè·ç¦»æœ€è¿œçš„ç”µè„‘çš„è·ç¦»Siã€‚ä½ éœ€è¦æä¾›è¿™ä¸ªä¿¡æ¯ã€‚&lt;br&gt;&lt;img src=&quot;/2016/08/18/JSOI2016-æé«˜2ç­-æ ‘å½¢DP/T.jpg&quot; alt=&quot;T.jpg&quot; title=&quot;&quot;&gt;&lt;br&gt;Hint: æ ·ä¾‹è¾“å…¥å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä»å›¾ä¸­ä½ å¯ä»¥çŸ¥é“ï¼Œ4å·ç”µè„‘åˆ°1å·ç”µè„‘çš„è·ç¦»æœ€è¿œï¼Œæ‰€ä»¥S1=3ã€‚4å·ç”µè„‘å’Œ5å·ç”µè„‘åˆ°2å·ç”µè„‘çš„è·ç¦»æœ€è¿œï¼Œæ‰€ä»¥S2=2ã€‚5å·ç”µè„‘åˆ°3å·ç”µè„‘è·ç¦»æœ€è¿œï¼Œæ‰€ä»¥S3=3ã€‚ç”±æ­¤ç±»æ¨S4=4ï¼ŒS5=4ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ ¼å¼&quot;&gt;&lt;a href=&quot;#æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;æ ¼å¼&quot;&gt;&lt;/a&gt;æ ¼å¼&lt;/h2&gt;&lt;h3 id=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å…¥æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å…¥æ ¼å¼&lt;/h3&gt;&lt;p&gt;è¾“å…¥æ–‡ä»¶åŒ…å«å¤šç»„æµ‹è¯•æ•°æ®ï¼Œå¯¹äºæ¯ç»„æµ‹è¯•æ•°æ®ï¼š&lt;br&gt;ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°N (N&amp;lt;=10000) ï¼›&lt;br&gt;æ¥ä¸‹æ¥N-1è¡Œæè¿°æ¯ä¸€å°ç”µè„‘ã€‚ç¬¬iè¡ŒåŒ…å«ä¸¤ä¸ªç”¨ç©ºæ ¼éš”å¼€çš„æ•´æ•°yã€lï¼Œè¡¨ç¤ºiå·ç”µè„‘ä¸ä¹‹å‰çš„yå·ç”µè„‘è¿æ¥ï¼Œè·ç¦»ä¸ºlã€‚&lt;br&gt;æ‰€æœ‰lä¹‹å’Œä¸è¶…è¿‡10^9ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å‡ºæ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å‡ºæ ¼å¼&lt;/h2&gt;&lt;p&gt;å¯¹äºæ¯ç»„æµ‹è¯•æ•°æ®è¾“å‡ºNè¡Œï¼Œç¬¬iè¡Œè¡¨ç¤ºç¦»iå·ç”µè„‘çš„æœ€è¿œè·ç¦»Siã€‚&lt;br&gt;
    
    </summary>
    
      <category term="Problem Set" scheme="https://cothrax.github.io/categories/Problem-Set/"/>
    
    
      <category term="OI" scheme="https://cothrax.github.io/tags/OI/"/>
    
      <category term="JSOI" scheme="https://cothrax.github.io/tags/JSOI/"/>
    
      <category term="DP" scheme="https://cothrax.github.io/tags/DP/"/>
    
      <category term="æ ‘å½¢DP" scheme="https://cothrax.github.io/tags/%E6%A0%91%E5%BD%A2DP/"/>
    
      <category term="èƒŒåŒ…" scheme="https://cothrax.github.io/tags/%E8%83%8C%E5%8C%85/"/>
    
      <category term="æ ‘å½¢èƒŒåŒ…" scheme="https://cothrax.github.io/tags/%E6%A0%91%E5%BD%A2%E8%83%8C%E5%8C%85/"/>
    
      <category term="æ ‘ç»“æ„" scheme="https://cothrax.github.io/tags/%E6%A0%91%E7%BB%93%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>[JSOI2016] æé«˜1ç­ Day2</title>
    <link href="https://cothrax.github.io/2016/08/17/JSOI2016-%E6%8F%90%E9%AB%981%E7%8F%AD-Day2/"/>
    <id>https://cothrax.github.io/2016/08/17/JSOI2016-æé«˜1ç­-Day2/</id>
    <published>2016-08-17T14:33:59.000Z</published>
    <updated>2016-08-18T03:39:33.118Z</updated>
    
    <content type="html"><![CDATA[<h1 id="P1-è¶…å¸‚"><a href="#P1-è¶…å¸‚" class="headerlink" title="P1 è¶…å¸‚"></a>P1 è¶…å¸‚</h1><p>è¶…å¸‚æ­£åœ¨ä¸¾è¡Œä¸€ä¸ªæ´»åŠ¨ï¼Œè¯¥æ´»åŠ¨çš„è§„åˆ™å¦‚ä¸‹ï¼š<br>æƒ³è¦å‚ä¸çš„é¡¾å®¢ä¼šå°†ä»–è´­ç‰©çš„è´¦å•æ”¾å…¥çº¸ç®±ä¸­ï¼Œè´¦å•ä¸Šå†™æœ‰é¡¾å®¢çš„è”ç³»æ–¹å¼å’Œè´­ç‰©çš„é‡‘é¢ã€‚æ¯å¤©è¶…å¸‚å…³é—¨å‰çº¸ç®±ä¸­é‡‘é¢æœ€å¤§ã€æœ€å°çš„ä¸¤å¼ å¸å•è¢«å–å‡ºï¼Œä»˜æ¬¾é‡‘é¢æœ€å¤§çš„é¡¾å®¢å°†è·å¾—ä¸€ç¬”å¥–é‡‘ï¼Œä»·å€¼ä¸ºå–å‡ºçš„ä¸¤å¼ å¸å•çš„é‡‘é¢ä¹‹å·®ï¼›ä¸ºäº†ä¸é‡å¤è®¡ç®—ï¼Œå–å‡ºçš„ä¸¤å¼ å¸å•ä¸å†æ”¾å›ç®±å­ï¼Œè€Œå‰©ä¸‹çš„å¸å•ä»ä¿ç•™åœ¨ç®±ä¸­ï¼Œè¿›è¡Œç¬¬äºŒå¤©çš„æ´»åŠ¨ã€‚<br>é¡¾å®¢å¾ˆå¤šï¼Œå› æ­¤å¯å‡å®šï¼šæ¯å¤©æ´»åŠ¨ç»“æŸæ—¶ï¼Œç®±ä¸­è‡³å°‘æœ‰ä¸¤å¼ å¸å•ä»¥ä¾›å–å‡ºã€‚<br>å°hä¹Ÿå‚åŠ äº†è¿™æ¬¡æ´»åŠ¨ï¼Œä»–æƒ³çŸ¥é“æ•´ä¸ªæ´»åŠ¨æœŸé—´è¶…å¸‚ä»˜å‡ºçš„å¥–é‡‘æ€»é¢æ˜¯å¤šå°‘ï¼Ÿ</p>
<h2 id="æ ¼å¼"><a href="#æ ¼å¼" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼"><a href="#è¾“å…¥æ ¼å¼" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•´æ•°nï¼Œè¡¨ç¤ºæ´»åŠ¨å†æ—¶çš„å¤©æ•°ã€‚<br>ä»¥ä¸‹çš„nè¡Œï¼Œæ¯è¡ŒåŒ…å«è‹¥å¹²ç”±ç©ºæ ¼åˆ†éš”çš„éè´Ÿæ•´æ•°ã€‚ç¬¬i+1è¡Œçš„æ•°è¡¨ç¤ºåœ¨ç¬¬iå¤©æŠ•å…¥ç®±å­çš„è´¦å•é‡‘é¢ã€‚æ¯è¡Œçš„ç¬¬ä¸€ä¸ªæ•°æ˜¯ä¸€ä¸ªæ•´æ•°kï¼Œè¡¨ç¤ºå½“æ—¥è´¦å•çš„æ•°ç›®ã€‚åé¢çš„kä¸ªæ­£æ•´æ•°ä»£è¡¨è¿™kç¬”è´¦å•çš„é‡‘é¢ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼"><a href="#è¾“å‡ºæ ¼å¼" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>è¾“å‡ºä¸€ä¸ªæ•°ï¼Œè¡¨ç¤ºæ´»åŠ¨æœŸé—´è¶…å¸‚ä»˜å‡ºçš„å¥–é‡‘æ€»é¢ã€‚<br><a id="more"></a></p>
<h2 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥"><a href="#æ ·ä¾‹è¾“å…¥" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>5<br>3 1 2 3<br>2 1 1<br>4 10 5 5 1<br>0<br>1 2</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º"><a href="#æ ·ä¾‹è¾“å‡º" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>19</p>
</blockquote>
<h2 id="æç¤ºâ€‹"><a href="#æç¤ºâ€‹" class="headerlink" title="æç¤ºâ€‹"></a>æç¤ºâ€‹</h2><p>è®¾sä¸ºæ•´ä¸ªæ´»åŠ¨ä¸­æ¶‰åŠåˆ°çš„è´¦å•ç¬”æ•°ã€‚<br>30%çš„æ•°æ®æ»¡è¶³nâ‰¤100,sâ‰¤10000ã€‚<br>70%çš„æ•°æ®æ»¡è¶³sâ‰¤10^5ã€‚<br>100%çš„æ•°æ®æ»¡è¶³1â‰¤nâ‰¤5000,0â‰¤kâ‰¤10^5,sâ‰¤10^6,æ¯ç¬”è´¦å•çš„é‡‘é¢ä¸è¶…è¿‡10^6ã€‚</p>
<h2 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>ç”¨ä¸€ä¸ªå¤§æ ¹å †å’Œä¸€ä¸ªå°æ ¹å †ï¼Œç»´æŠ¤å€¼å¯¹{é‡‘é¢,ç¼–å·}ï¼Œç”¨del[i]è®°å½•ç¼–å·içš„è´¦å•æ˜¯å¦å·²ç»è¢«å–å‡ºï¼Œç„¶åæ¨¡æ‹Ÿå³å¯ã€‚</p>
<dir style="text-align:right"><a href="/2016/08/17/JSOI2016-æé«˜1ç­-Day2/market.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>market.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> big=<span class="number">1</span>;small=-<span class="number">1</span>;</div><div class="line"><span class="keyword">type</span> </div><div class="line">    int=longint;</div><div class="line">    heap=<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1000010</span>,<span class="number">0</span>..<span class="number">1</span>] <span class="keyword">of</span> int;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">swap</span><span class="params">(<span class="keyword">var</span> a,b:int)</span>;</span></div><div class="line"><span class="keyword">var</span> tmp:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    tmp:=a;a:=b;b:=tmp;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">com</span><span class="params">(p,c,s:int)</span>:</span>boolean;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">if</span> s=big <span class="keyword">then</span> com:=p&gt;c <span class="keyword">else</span> com:=p&lt;c;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">heapify</span><span class="params">(<span class="keyword">var</span> h:heap;x:int)</span>;</span></div><div class="line"><span class="keyword">var</span> l,r,s:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    l:=<span class="number">2</span>*x;r:=<span class="number">2</span>*x+<span class="number">1</span>;</div><div class="line">    <span class="keyword">if</span> (l&lt;=h[<span class="number">0</span>,<span class="number">0</span>]) <span class="keyword">and</span> com(h[l,<span class="number">0</span>],h[x,<span class="number">0</span>],h[<span class="number">0</span>,<span class="number">1</span>]) <span class="keyword">then</span> s:=l <span class="keyword">else</span> s:=x;</div><div class="line">    <span class="keyword">if</span> (r&lt;=h[<span class="number">0</span>,<span class="number">0</span>]) <span class="keyword">and</span> com(h[r,<span class="number">0</span>],h[s,<span class="number">0</span>],h[<span class="number">0</span>,<span class="number">1</span>]) <span class="keyword">then</span> s:=r;</div><div class="line">    <span class="keyword">if</span> s&lt;&gt;x <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">        swap(h[s,<span class="number">0</span>],h[x,<span class="number">0</span>]);</div><div class="line">        swap(h[s,<span class="number">1</span>],h[x,<span class="number">1</span>]);</div><div class="line">        heapify(h,s);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">extract</span><span class="params">(<span class="keyword">var</span> h:heap)</span>;</span></div><div class="line"><span class="keyword">begin</span></div><div class="line">    h[<span class="number">1</span>]:=h[h[<span class="number">0</span>,<span class="number">0</span>]];</div><div class="line">    dec(h[<span class="number">0</span>,<span class="number">0</span>]);</div><div class="line">    heapify(h,<span class="number">1</span>);</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">insert</span><span class="params">(<span class="keyword">var</span> h:heap;k,v:int)</span>;</span></div><div class="line"><span class="keyword">var</span> i:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    inc(h[<span class="number">0</span>,<span class="number">0</span>]);i:=h[<span class="number">0</span>,<span class="number">0</span>];</div><div class="line">    h[i,<span class="number">0</span>]:=v;h[i,<span class="number">1</span>]:=k;</div><div class="line">    <span class="keyword">while</span> (i&gt;<span class="number">1</span>) <span class="keyword">and</span> com(h[i,<span class="number">0</span>],h[i <span class="keyword">div</span> <span class="number">2</span>,<span class="number">0</span>],h[<span class="number">0</span>,<span class="number">1</span>]) <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        swap(h[i,<span class="number">0</span>],h[i <span class="keyword">div</span> <span class="number">2</span>,<span class="number">0</span>]);</div><div class="line">        swap(h[i,<span class="number">1</span>],h[i <span class="keyword">div</span> <span class="number">2</span>,<span class="number">1</span>]);</div><div class="line">        i:=i <span class="keyword">div</span> <span class="number">2</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> </div><div class="line">    hb,hs:heap;</div><div class="line">    i,j,n,m,cnt,each,b,s:int;</div><div class="line">    ans:int64;</div><div class="line">    del:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1000010</span>] <span class="keyword">of</span> boolean;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'market.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'market.out'</span>);rewrite(output);</div><div class="line"></div><div class="line">    <span class="keyword">read</span>(n);</div><div class="line">    fillchar(del,sizeof(del),false);</div><div class="line">    hb[<span class="number">0</span>,<span class="number">0</span>]:=<span class="number">0</span>;hb[<span class="number">0</span>,<span class="number">1</span>]:=big;</div><div class="line">    hs[<span class="number">0</span>,<span class="number">0</span>]:=<span class="number">0</span>;hs[<span class="number">0</span>,<span class="number">1</span>]:=small;</div><div class="line">    cnt:=<span class="number">0</span>;ans:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(m);</div><div class="line">        <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            inc(cnt);</div><div class="line">            <span class="keyword">read</span>(each);</div><div class="line">            insert(hs,cnt,each);</div><div class="line">            insert(hb,cnt,each);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">        <span class="comment">//writeln(hb[0,0],' ',hs[0,0],' ',ans);</span></div><div class="line">        <span class="keyword">while</span> del[hb[<span class="number">1</span>,<span class="number">1</span>]] <span class="keyword">do</span> extract(hb);</div><div class="line">        b:=hb[<span class="number">1</span>,<span class="number">0</span>];del[hb[<span class="number">1</span>,<span class="number">1</span>]]:=true;extract(hb);</div><div class="line">        <span class="keyword">while</span> del[hs[<span class="number">1</span>,<span class="number">1</span>]] <span class="keyword">do</span> extract(hs);</div><div class="line">        s:=hs[<span class="number">1</span>,<span class="number">0</span>];del[hs[<span class="number">1</span>,<span class="number">1</span>]]:=true;extract(hs);</div><div class="line">        inc(ans,b-s);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">write</span>(ans);</div><div class="line"></div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P2-é†‰é…’"><a href="#P2-é†‰é…’" class="headerlink" title="P2 é†‰é…’"></a>P2 é†‰é…’</h1><p>å°X å®¶ä½åœ¨ä¸€æ¡ä¸œè¥¿å‘çš„å¤§è¡—ä¸Šã€‚åœ¨ä»–ä»¬å®¶çš„ä¸œé¢ï¼Œè‡ªä¸œå‘è¥¿ä¾æ¬¡åˆ†å¸ƒç€n å¹¢ç›¸ä¼¼çš„æˆ¿<br>å±‹ï¼Œç¼–å·ä¸º1 åˆ°n,å¯ä»¥ç”¨ä¸€ä¸ªé•¿åº¦ä¸ºn çš„å­—ç¬¦ä¸²è¡¨ç¤ºè¿™n å¹¢æˆ¿å±‹çš„é¢œè‰²ã€‚<br>å°X çš„çˆ¶äº²ç»å¸¸å–é†‰é…’ï¼Œæ¯æ¬¡é†‰é…’åä»–éƒ½ä¼šç¨€é‡Œç³Šæ¶‚åœ°èµ°åˆ°ç¬¬Ai å¹¢æˆ¿å±‹å‰ï¼Œç„¶ååšä¿¡<br>ä»–ç°åœ¨ç¬¬Bi å¹¢æˆ¿å±‹å‰ã€‚è™½ç„¶ä»–å–é†‰äº†ï¼Œä½†æ˜¯ä»–ä¾ç„¶èƒ½åˆ†æ¸…æ¯å¹¢æˆ¿å±‹çš„é¢œè‰²ï¼Œå¹¶ä¸”æå‡ºåœ°å›¾<br>è¿›è¡Œæ¯”è¾ƒï¼Œåªæœ‰æˆ¿å±‹é¢œè‰²å’Œåœ°å›¾ä¸Šä¸€è‡´æ—¶ï¼Œä»–æ‰ä¼šç»§ç»­å‘è¥¿èµ°ã€‚å½“ä»–å‘ç°è‡ªå·±çš„é”™è¯¯æˆ–è€…ä¸<br>èƒ½å‰è¿›æ—¶ï¼Œå°±ä¼šåœä¸‹æ¥ã€‚ç°åœ¨ï¼Œå°X è®°å½•ä¸‹äº†æ¯æ¬¡çš„æ•°æ®Ai å’ŒBiï¼Œä»–å¸Œæœ›çŸ¥é“çˆ¶äº²æœ€å¤šèµ°<br>è¿‡å¤šå°‘å¹¢ç›¸åŒé¢œè‰²çš„æˆ¿å±‹ã€‚</p>
<h2 id="æ ¼å¼-1"><a href="#æ ¼å¼-1" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-1"><a href="#è¾“å…¥æ ¼å¼-1" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•°n å’Œmï¼Œè¡¨ç¤ºn å¹¢æˆ¿å±‹å’Œm æ¬¡è¯¢é—®ã€‚<br>ç¬¬äºŒè¡Œä¸€ä¸ªé•¿åº¦ä¸ºn çš„å­—ç¬¦ä¸²ï¼Œä»…åŒ…å«å¤§å†™å­—æ¯ã€‚<br>æ¥ä¸‹æ¥m è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•°Ai å’ŒBiã€‚</p>
<h3 id="è¾“å‡ºæ ¼å¼-1"><a href="#è¾“å‡ºæ ¼å¼-1" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h3><p>m è¡Œï¼Œæ¯ä¸ªä¸€ä¸ªæ•°ï¼Œè¡¨ç¤ºå°X çš„çˆ¶äº²çˆ¶äº²æœ€å¤šèµ°è¿‡å¤šå°‘å¹¢ç›¸åŒé¢œè‰²çš„æˆ¿å±‹ã€‚</p>
<h2 id="æ ·ä¾‹-1"><a href="#æ ·ä¾‹-1" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="è¾“å…¥æ ·ä¾‹"><a href="#è¾“å…¥æ ·ä¾‹" class="headerlink" title="è¾“å…¥æ ·ä¾‹"></a>è¾“å…¥æ ·ä¾‹</h3><blockquote>
<p>10 6<br>AABBCCAABB<br>1 7<br>7 1<br>3 4<br>4 9<br>2 5<br>5 5</p>
</blockquote>
<h3 id="è¾“å‡ºæ ·ä¾‹"><a href="#è¾“å‡ºæ ·ä¾‹" class="headerlink" title="è¾“å‡ºæ ·ä¾‹"></a>è¾“å‡ºæ ·ä¾‹</h3><blockquote>
<p>4<br>4<br>1<br>1<br>0<br>6</p>
</blockquote>
<h2 id="æç¤º"><a href="#æç¤º" class="headerlink" title="æç¤º"></a>æç¤º</h2><p>å¯¹äº60%çš„æ•°æ®ï¼Œn,mâ‰¤100ã€‚<br>å¯¹äº80%çš„æ•°æ®ï¼Œnâ‰¤1000ã€‚<br>å¯¹äº100%çš„æ•°æ®ï¼Œn,mâ‰¤100000,Ai,Biâ‰¤nã€‚</p>
<h2 id="é¢˜è§£-1"><a href="#é¢˜è§£-1" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>åŒå­—ç¬¦ä¸²Hash+äºŒåˆ†ç­”æ¡ˆ<br>é¢„å¤„ç†å‰ç¼€Hashï¼š$O(N)$<br>å¯¹äºæ¯ä¸ªæŸ¥è¯¢äºŒåˆ†ï¼š$O(MlogN)$<br>hashå‡½æ•°è¦å†™å¥½ï¼Œæ³¨æ„ç«¯ç‚¹ã€‚</p>
<dir style="text-align:right"><a href="/2016/08/17/JSOI2016-æé«˜1ç­-Day2/drunk.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>drunk.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"></div><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">const</span> </div><div class="line">    q:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1</span>] <span class="keyword">of</span> int=(<span class="number">1000019</span>,<span class="number">100000007</span>);</div><div class="line">    p:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1</span>] <span class="keyword">of</span> int=(<span class="number">1009</span>,<span class="number">133</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span></div><div class="line">    n,m,i,j,k:int;</div><div class="line">    s:ansistring;</div><div class="line">    pn,f:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1</span>,<span class="number">0</span>..<span class="number">100010</span>] <span class="keyword">of</span> int64;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">hash</span><span class="params">(l,r,j:int)</span>:</span>int64;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    hash:=(f[j,r]-f[j,l-<span class="number">1</span>]*pn[j,r-l+<span class="number">1</span>] <span class="keyword">mod</span> q[j]+q[j]) <span class="keyword">mod</span> q[j];</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">query</span><span class="params">(i,j:int)</span>:</span>int;</div><div class="line"><span class="keyword">var</span> l,r,mid:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">if</span> i&gt;j <span class="keyword">then</span> <span class="keyword">begin</span> l:=i;i:=j;j:=l <span class="keyword">end</span>;</div><div class="line">    l:=<span class="number">1</span>;r:=n-j+<span class="number">1</span>;query:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span> l&lt;=r <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        mid:=(l+r) <span class="keyword">shr</span> <span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span> (hash(i,i+mid-<span class="number">1</span>,<span class="number">0</span>)=hash(j,j+mid-<span class="number">1</span>,<span class="number">0</span>)) <span class="keyword">and</span></div><div class="line">           (hash(i,i+mid-<span class="number">1</span>,<span class="number">1</span>)=hash(j,j+mid-<span class="number">1</span>,<span class="number">1</span>)) <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            query:=mid;l:=mid+<span class="number">1</span>;</div><div class="line">        <span class="keyword">end</span> <span class="keyword">else</span> r:=mid-<span class="number">1</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'drunk.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'drunk.out'</span>);rewrite(output);</div><div class="line">    </div><div class="line">    readln(n,m);readln(s);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">0</span> <span class="keyword">to</span> <span class="number">1</span> <span class="keyword">do</span> <span class="keyword">begin</span> f[i,<span class="number">0</span>]:=<span class="number">0</span>;pn[i,<span class="number">0</span>]:=<span class="number">1</span> <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> </div><div class="line">        <span class="keyword">for</span> j:=<span class="number">0</span> <span class="keyword">to</span> <span class="number">1</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            pn[j,i]:=pn[j,i-<span class="number">1</span>]*p[j] <span class="keyword">mod</span> q[j];</div><div class="line">            f[j,i]:=(f[j,i-<span class="number">1</span>]*p[j]+ord(s[i])) <span class="keyword">mod</span> q[j];</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    </div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(j,k);</div><div class="line">        writeln(query(j,k));</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"></div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P3-æ–¹å—æ¸¸æˆ"><a href="#P3-æ–¹å—æ¸¸æˆ" class="headerlink" title="P3 æ–¹å—æ¸¸æˆ"></a>P3 æ–¹å—æ¸¸æˆ</h1><p>å°A å’Œå°B åœ¨ç©ä¸€ä¸ªæ–¹å—æ¸¸æˆã€‚ç¼–å·ä¸º1 åˆ°n(1&lt;=n&lt;=30000)çš„n ä¸ªæ–¹å—æ­£æ”¾åœ¨åœ°ä¸Šã€‚<br>æ¯ä¸ªæ„æˆä¸€ä¸ªç«‹æ–¹æŸ±ã€‚<br>æ¸¸æˆå¼€å§‹åï¼Œå°A ä¼šç»™å°B å‘å‡ºp(1&lt;=p&lt;=100000)ä¸ªæŒ‡ä»¤ã€‚</p>
<ol>
<li>ç§»åŠ¨(M)ï¼šå°†åŒ…å«X çš„ç«‹æ–¹æŸ±ç§»åŠ¨åˆ°åŒ…å«Y çš„ç«‹æ–¹æŸ±ä¸Šã€‚</li>
<li>ç»Ÿè®¡(C)ï¼šç»Ÿè®¡å«X çš„ç«‹æ–¹æŸ±ä¸­ï¼Œåœ¨X ä¸‹æ–¹çš„æ–¹å—æ•°ç›®ã€‚</li>
</ol>
<p>å†™ä¸ªç¨‹åºå¸®å°B å®Œæˆæ¸¸æˆã€‚</p>
<h2 id="æ ¼å¼-2"><a href="#æ ¼å¼-2" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-2"><a href="#è¾“å…¥æ ¼å¼-2" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬1 è¡Œè¾“å…¥Pï¼Œä¹‹åP è¡Œæ¯è¡Œè¾“å…¥ä¸€æ¡æŒ‡ä»¤ã€‚å½¢å¼ä¸ºâ€œM X Yâ€æˆ–è€…â€œC Xâ€ã€‚<br>è¾“å…¥ä¿è¯ä¸ä¼šæœ‰å°†ç«‹æ–¹æŸ±æ”¾åœ¨è‡ªå·±å¤´ä¸Šçš„æŒ‡ä»¤ã€‚</p>
<h3 id="è¾“å‡ºæ ¼å¼-2"><a href="#è¾“å‡ºæ ¼å¼-2" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h3><p>æ¯ä¸€è¡Œï¼Œå¯¹äºæ¯ä¸ªç»Ÿè®¡æŒ‡ä»¤ï¼Œè¾“å‡ºå…¶ç»“æœã€‚</p>
<h2 id="æ ·ä¾‹-2"><a href="#æ ·ä¾‹-2" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="è¾“å…¥æ ·ä¾‹-1"><a href="#è¾“å…¥æ ·ä¾‹-1" class="headerlink" title="è¾“å…¥æ ·ä¾‹"></a>è¾“å…¥æ ·ä¾‹</h3><blockquote>
<p>6<br>M 1 6<br>C 1<br>M 2 4<br>M 2 6<br>C 3<br>C 4</p>
</blockquote>
<h3 id="è¾“å‡ºæ ·ä¾‹-1"><a href="#è¾“å‡ºæ ·ä¾‹-1" class="headerlink" title="è¾“å‡ºæ ·ä¾‹"></a>è¾“å‡ºæ ·ä¾‹</h3><blockquote>
<p>1<br>0<br>2</p>
</blockquote>
<h2 id="æç¤º-1"><a href="#æç¤º-1" class="headerlink" title="æç¤º"></a>æç¤º</h2><p>å¯¹äº40%çš„æ•°æ®ï¼Œn,Pâ‰¤200ã€‚<br>å¯¹äº60%çš„æ•°æ®ï¼Œn,Pâ‰¤2000ã€‚<br>å¯¹äº100%çš„æ•°æ®ï¼Œn,Pâ‰¤100000ã€‚</p>
<h2 id="é¢˜è§£-2"><a href="#é¢˜è§£-2" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>å¹¶æŸ¥é›†ã€‚</p>
<ol>
<li>è®°dist[i]æ˜¯iåˆ°par[i]çš„è·ç¦»ï¼Œå³iä¸par[i]ä¹‹é—´ åŒ…å«par[i] ä¸åŒ…å«i çš„æ–¹å—æ ¼æ•°</li>
<li>è®°len[i]æ˜¯æ ¹iæ‰€åœ¨ç«‹æ–¹ä½“çš„æ–¹å—ä¸ªæ•°ï¼Œå½“iä¸æ˜¯æ ¹æ—¶=0</li>
</ol>
<p>ç„¶ååœ¨æŸ¥è¯¢å’Œåˆå¹¶æ—¶ç»´æŠ¤å³å¯ã€‚</p>
<dir style="text-align:right"><a href="/2016/08/17/JSOI2016-æé«˜1ç­-Day2/cubes.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>drunk.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">const</span> n=<span class="number">100000</span>;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    par,dist,len:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">100010</span>] <span class="keyword">of</span> int;</div><div class="line">    p,i,x,y:int;c:char;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">find</span><span class="params">(x:int)</span>:</span>int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">if</span> par[x]=x <span class="keyword">then</span> find:=x</div><div class="line">    <span class="keyword">else</span> <span class="keyword">begin</span></div><div class="line">        find:=find(par[x]);</div><div class="line">        inc(dist[x],dist[par[x]]);</div><div class="line">        par[x]:=find;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">union</span><span class="params">(x,y:int)</span>;</span></div><div class="line"><span class="keyword">begin</span></div><div class="line">    x:=find(x);y:=find(y);</div><div class="line">    par[x]:=y;</div><div class="line">    dist[x]:=len[y];</div><div class="line">    inc(len[y],len[x]);</div><div class="line">    len[x]:=<span class="number">0</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">query</span><span class="params">(x:int)</span>:</span>int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">if</span> par[x]=x <span class="keyword">then</span> query:=<span class="number">1</span></div><div class="line">    <span class="keyword">else</span> query:=dist[x]+query(par[x]);</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'cubes.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'cubes.out'</span>);rewrite(output);</div><div class="line"></div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        par[i]:=i;</div><div class="line">        dist[i]:=<span class="number">0</span>;</div><div class="line">        len[i]:=<span class="number">1</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    readln(p);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> p <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(c);</div><div class="line">        <span class="keyword">if</span> c=<span class="string">'M'</span> <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            readln(x,y);</div><div class="line">            union(x,y);</div><div class="line">        <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">begin</span></div><div class="line">            readln(x);</div><div class="line">            writeln(query(x)-<span class="number">1</span>);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    </div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P4-é“è·¯ç½‘"><a href="#P4-é“è·¯ç½‘" class="headerlink" title="P4 é“è·¯ç½‘"></a>P4 é“è·¯ç½‘</h1><p>Cå›½çš„é“è·¯ç½‘ç»œç”±è‹¥å¹²æ¡åŒå‘çº¿è·¯ç»„æˆã€‚æ¯æ¡çº¿è·¯é€”ç»ä¸€äº›åŸå¸‚(å¯èƒ½ä¼šç»è¿‡å¤šæ¬¡åŒä¸€<br>åŸå¸‚)ï¼Œä½äºçº¿è·¯ä¸Šçš„ä¸¤ä¸ªåŸå¸‚aï¼Œbé€šè¿‡iå·çº¿è·¯äº’ç›¸æŠµè¾¾çš„è´¹ç”¨ä¸º w[i][a] + w[i][b]ã€‚ç°åœ¨æœ‰è‹¥å¹²ä¸ªè¯¢é—®ï¼Œè¯¢é—®ä¸¤åŸå¸‚äº’ç›¸åˆ°è¾¾çš„æœ€å°è´¹ç”¨ã€‚</p>
<h2 id="æ ¼å¼-3"><a href="#æ ¼å¼-3" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-3"><a href="#è¾“å…¥æ ¼å¼-3" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬ä¸€è¡Œä¸ºåŸå¸‚æ•°nä¸çº¿è·¯æ•°mã€‚<br>ä»¥ä¸‹mè¡Œæ¯è¡Œæè¿°ä¸€æ¡çº¿è·¯ï¼š<br>ç¬¬ä¸€ä¸ªæ­£æ•´æ•°l[i]ä¸ºiå·çº¿è·¯é€”ç»çš„åŸå¸‚æ•°ï¼Œæ¥ä¸‹æ¥2*l[i]ä¸ªæ­£æ•´æ•°ï¼Œæ¯ä¸¤ä¸ªæ•°æè¿°ä¸€ä¸ªåŸå¸‚ï¼Œä¾æ¬¡è¡¨ç¤ºé€”ç»çš„åŸå¸‚jï¼Œè´¹ç”¨w[i][j]ï¼›æ¥ä¸‹æ¥è‹¥å¹²è¡Œæ¯è¡Œä¸¤ä¸ªæ­£æ•´æ•°aï¼Œbè¡¨ç¤ºè¯¢é—®aï¼Œbä¹‹é—´çš„æœ€å°è´¹ç”¨ï¼Œæœ€åä»¥0 0ç»“æŸã€‚</p>
<h3 id="è¾“å‡ºæ ¼å¼-3"><a href="#è¾“å‡ºæ ¼å¼-3" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h3><p>æ¯ä¸€è¡Œï¼Œå¯¹äºæ¯ä¸ªç»Ÿè®¡æŒ‡ä»¤ï¼Œè¾“å‡ºå…¶ç»“æœã€‚</p>
<h2 id="æ ·ä¾‹-3"><a href="#æ ·ä¾‹-3" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="è¾“å…¥æ ·ä¾‹-2"><a href="#è¾“å…¥æ ·ä¾‹-2" class="headerlink" title="è¾“å…¥æ ·ä¾‹"></a>è¾“å…¥æ ·ä¾‹</h3><blockquote>
<p>4 2<br>3 1 1 2 1 3 3<br>3 1 2 2 1 4 2<br>1 2<br>3 4<br>2 4<br>0 0</p>
</blockquote>
<h3 id="è¾“å‡ºæ ·ä¾‹-2"><a href="#è¾“å‡ºæ ·ä¾‹-2" class="headerlink" title="è¾“å‡ºæ ·ä¾‹"></a>è¾“å‡ºæ ·ä¾‹</h3><blockquote>
<p>2<br>7<br>3</p>
</blockquote>
<h2 id="æç¤º-2"><a href="#æç¤º-2" class="headerlink" title="æç¤º"></a>æç¤º</h2><p>ä»¤Tä¸ºè¯¢é—®æ•°<br>10%çš„æ•°æ®æ»¡è¶³nâ‰¤10,mâ‰¤3,Tâ‰¤3ã€‚<br>30%çš„æ•°æ®æ»¡è¶³n,Tâ‰¤100,m,l[i]â‰¤15ã€‚<br>50%çš„æ•°æ®æ»¡è¶³nâ‰¤1000,Tâ‰¤100,m,l[i]â‰¤50ã€‚<br>100%çš„æ•°æ®æ»¡è¶³nâ‰¤100000,mâ‰¤300,T,l[i],w[i][j]â‰¤2000ã€‚</p>
<h2 id="æ°´è§£"><a href="#æ°´è§£" class="headerlink" title="æ°´è§£"></a>æ°´è§£</h2><p>$w[i][a] + w[i][b]$ï¼ŒæŠŠçº¿è·¯å½“æˆç‚¹ï¼Œç„¶ån+mä¸ªç‚¹è·‘Floydï¼Œ<br>30åˆ†åˆ°æ‰‹ã€‚</p>
<dir style="text-align:right"><a href="/2016/08/17/JSOI2016-æé«˜1ç­-Day2/map.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>map.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">const</span> inf=<span class="number">100000000</span>;</div><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    f:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1110</span>,<span class="number">0</span>..<span class="number">1110</span>] <span class="keyword">of</span> int;</div><div class="line">    n,m,l,k,i,j,tmp:int;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'map.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'map.out'</span>);rewrite(output);</div><div class="line"></div><div class="line">    <span class="keyword">read</span>(n,m);</div><div class="line">    filldword(f,sizeof(f) <span class="keyword">div</span> <span class="number">4</span>,inf);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(l);</div><div class="line">        <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> l <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            <span class="keyword">read</span>(k);<span class="keyword">read</span>(tmp);</div><div class="line">            f[k,i+n]:=min(f[k,i+n],tmp);</div><div class="line">            f[i+n,k]:=f[k,i+n];</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> m+n <span class="keyword">do</span> f[i,i]:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> k:=<span class="number">1</span> <span class="keyword">to</span> m+n <span class="keyword">do</span></div><div class="line">        <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> m+n <span class="keyword">do</span></div><div class="line">            <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> m+n <span class="keyword">do</span></div><div class="line">                f[i,j]:=min(f[i,j],f[i,k]+f[k,j]);</div><div class="line">    <span class="keyword">read</span>(i,j);</div><div class="line">    <span class="keyword">while</span> (i&lt;&gt;<span class="number">0</span>) <span class="keyword">and</span> (j&lt;&gt;<span class="number">0</span>) <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">if</span> f[i,j]=inf <span class="keyword">then</span> writeln(-<span class="number">1</span>) <span class="keyword">else</span> writeln(f[i,j]);</div><div class="line">        <span class="keyword">read</span>(i,j);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h2 id="æ­£è§£"><a href="#æ­£è§£" class="headerlink" title="æ­£è§£"></a>æ­£è§£</h2><p>çº¿è·¯æ•°éå¸¸å°ï¼Œæˆ‘ä»¬ä»çº¿è·¯å…¥æ‰‹ï¼Œä¾ç„¶æŠŠçº¿è·¯çœ‹æˆç‚¹ï¼Œæ¯ä¸¤ä¸ªåŸå¸‚çš„è·¯å¾„å¿…ç„¶è¦ç»è¿‡ä»£è¡¨çº¿è·¯çš„ç‚¹ï¼Œå…ˆè€ƒè™‘çº¿è·¯é—´çš„åˆ‡æ¢ã€‚<br>è´ªå¿ƒåœ°è€ƒè™‘ä¸¤æ¡çº¿è·¯iå’Œjï¼šè®°å®ƒä»¬çš„å…¬ç”¨åŸå¸‚ä¸ºaï¼Œiå’Œjçš„è¿è¾¹ä¸º<span>$min\{w[i,a]+w[j,a]\}$</span><!-- Has MathJax -->ï¼Œ<br>ç„¶ååœ¨çº¿è·¯è®¾ç‚¹ç»„æˆçš„å›¾ä¸Šè·‘Floydã€‚<br>å¯¹äºæ¯ä¸ªæŸ¥è¯¢ï¼Œæšä¸¾ç»è¿‡ä¸¤ç‚¹çš„çº¿è·¯ç®—æœ€å°å€¼å°±å¯ä»¥äº†ã€‚</p>
<p>å¤„ç†çº¿è·¯é—´çš„è¿è¾¹å¯ä»¥ç”¨ç±»ä¼¼ å‰å‘æ˜Ÿè®¡æ•°æ’åº çš„æ€æƒ³ï¼Œåœ¨$O(l[i]*m)$çš„æ—¶é—´å†…å°†w[i,j]å‹ç¼©è¿›ä¸€ä¸ªæ•°ç»„ï¼Œä¹Ÿå¯ä»¥ç”¨è§„æ¨¡ä¸ºnçš„æŒ‡é’ˆæ•°ç»„å®ç°ã€‚<br>æ‰‹æ®‹æ•²é”™äº†ä¸€æ¬¡floydã€‚</p>
<dir style="text-align:right"><a href="/2016/08/17/JSOI2016-æé«˜1ç­-Day2/0map.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>0map.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">const</span> inf=<span class="number">100000000</span>;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    n,m,k,i,j,t1,t2,ans,last:int;</div><div class="line">    f:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">310</span>,<span class="number">0</span>..<span class="number">310</span>] <span class="keyword">of</span> int; <span class="comment">//floyd</span></div><div class="line">    e:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">310</span>,<span class="number">0</span>..<span class="number">2010</span>,<span class="number">0</span>..<span class="number">1</span>] <span class="keyword">of</span> int; <span class="comment">//åŸå§‹æ•°æ®</span></div><div class="line">    g:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">600010</span>,<span class="number">0</span>..<span class="number">1</span>] <span class="keyword">of</span> int; <span class="comment">//å‹ç¼©åæ•°æ®</span></div><div class="line">    cnt,l,r,p:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">100010</span>] <span class="keyword">of</span> int; <span class="comment">//è®¡æ•°,å·¦ç«¯ç‚¹,å³ç«¯ç‚¹,å½“å‰æŒ‡é’ˆ</span></div><div class="line">    s:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">310</span>] <span class="keyword">of</span> int; <span class="comment">//é¢˜ä¸­çš„l</span></div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'map.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'map.out'</span>);rewrite(output);</div><div class="line">    <span class="comment">//input</span></div><div class="line">    <span class="keyword">read</span>(n,m);</div><div class="line">    fillchar(cnt,sizeof(cnt),<span class="number">0</span>);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(s[i]);</div><div class="line">        <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> s[i] <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            <span class="keyword">read</span>(e[i,j,<span class="number">0</span>],e[i,j,<span class="number">1</span>]);</div><div class="line">            inc(cnt[e[i,j,<span class="number">0</span>]]);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="comment">//æŒ‡é’ˆ</span></div><div class="line">    last:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        l[i]:=last+<span class="number">1</span>;</div><div class="line">        r[i]:=last+cnt[i];</div><div class="line">        p[i]:=l[i];</div><div class="line">        last:=r[i];</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="comment">//eå‹è¿›gï¼ˆç±»ä¼¼è®¡æ•°æ’åºï¼‰</span></div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span>    </div><div class="line">        <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> s[i] <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            g[p[e[i,j,<span class="number">0</span>]],<span class="number">0</span>]:=i;</div><div class="line">            g[p[e[i,j,<span class="number">0</span>]],<span class="number">1</span>]:=e[i,j,<span class="number">1</span>];</div><div class="line">            inc(p[e[i,j,<span class="number">0</span>]]);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    <span class="comment">//init f</span></div><div class="line">    filldword(f,sizeof(f) <span class="keyword">div</span> <span class="number">4</span>,inf);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">        <span class="keyword">for</span> j:=l[i] <span class="keyword">to</span> r[i] <span class="keyword">do</span></div><div class="line">            <span class="keyword">for</span> k:=l[i] <span class="keyword">to</span> r[i] <span class="keyword">do</span></div><div class="line">                f[g[j,<span class="number">0</span>],g[k,<span class="number">0</span>]]:=min(f[g[j,<span class="number">0</span>],g[k,<span class="number">0</span>]],g[j,<span class="number">1</span>]+g[k,<span class="number">1</span>]);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span> f[i,i]:=<span class="number">0</span>;</div><div class="line">    <span class="comment">//floyd</span></div><div class="line">    <span class="keyword">for</span> k:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span></div><div class="line">        <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span>    </div><div class="line">            <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span></div><div class="line">                f[i,j]:=min(f[i,j],f[i,k]+f[k,j]);</div><div class="line">    <span class="comment">//query</span></div><div class="line">    <span class="keyword">read</span>(t1,t2);</div><div class="line">    <span class="keyword">while</span> (t1&lt;&gt;<span class="number">0</span>) <span class="keyword">and</span> (t2&lt;&gt;<span class="number">0</span>) <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        ans:=inf;</div><div class="line">        <span class="keyword">for</span> i:=l[t1] <span class="keyword">to</span> r[t1] <span class="keyword">do</span></div><div class="line">            <span class="keyword">for</span> j:=l[t2] <span class="keyword">to</span> r[t2] <span class="keyword">do</span></div><div class="line">                ans:=min(ans,g[i,<span class="number">1</span>]+f[g[i,<span class="number">0</span>],g[j,<span class="number">0</span>]]+g[j,<span class="number">1</span>]);</div><div class="line">        <span class="keyword">if</span> ans=inf <span class="keyword">then</span> writeln(-<span class="number">1</span>) <span class="keyword">else</span> writeln(ans);</div><div class="line">        <span class="keyword">read</span>(t1,t2);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"></div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;P1-è¶…å¸‚&quot;&gt;&lt;a href=&quot;#P1-è¶…å¸‚&quot; class=&quot;headerlink&quot; title=&quot;P1 è¶…å¸‚&quot;&gt;&lt;/a&gt;P1 è¶…å¸‚&lt;/h1&gt;&lt;p&gt;è¶…å¸‚æ­£åœ¨ä¸¾è¡Œä¸€ä¸ªæ´»åŠ¨ï¼Œè¯¥æ´»åŠ¨çš„è§„åˆ™å¦‚ä¸‹ï¼š&lt;br&gt;æƒ³è¦å‚ä¸çš„é¡¾å®¢ä¼šå°†ä»–è´­ç‰©çš„è´¦å•æ”¾å…¥çº¸ç®±ä¸­ï¼Œè´¦å•ä¸Šå†™æœ‰é¡¾å®¢çš„è”ç³»æ–¹å¼å’Œè´­ç‰©çš„é‡‘é¢ã€‚æ¯å¤©è¶…å¸‚å…³é—¨å‰çº¸ç®±ä¸­é‡‘é¢æœ€å¤§ã€æœ€å°çš„ä¸¤å¼ å¸å•è¢«å–å‡ºï¼Œä»˜æ¬¾é‡‘é¢æœ€å¤§çš„é¡¾å®¢å°†è·å¾—ä¸€ç¬”å¥–é‡‘ï¼Œä»·å€¼ä¸ºå–å‡ºçš„ä¸¤å¼ å¸å•çš„é‡‘é¢ä¹‹å·®ï¼›ä¸ºäº†ä¸é‡å¤è®¡ç®—ï¼Œå–å‡ºçš„ä¸¤å¼ å¸å•ä¸å†æ”¾å›ç®±å­ï¼Œè€Œå‰©ä¸‹çš„å¸å•ä»ä¿ç•™åœ¨ç®±ä¸­ï¼Œè¿›è¡Œç¬¬äºŒå¤©çš„æ´»åŠ¨ã€‚&lt;br&gt;é¡¾å®¢å¾ˆå¤šï¼Œå› æ­¤å¯å‡å®šï¼šæ¯å¤©æ´»åŠ¨ç»“æŸæ—¶ï¼Œç®±ä¸­è‡³å°‘æœ‰ä¸¤å¼ å¸å•ä»¥ä¾›å–å‡ºã€‚&lt;br&gt;å°hä¹Ÿå‚åŠ äº†è¿™æ¬¡æ´»åŠ¨ï¼Œä»–æƒ³çŸ¥é“æ•´ä¸ªæ´»åŠ¨æœŸé—´è¶…å¸‚ä»˜å‡ºçš„å¥–é‡‘æ€»é¢æ˜¯å¤šå°‘ï¼Ÿ&lt;/p&gt;
&lt;h2 id=&quot;æ ¼å¼&quot;&gt;&lt;a href=&quot;#æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;æ ¼å¼&quot;&gt;&lt;/a&gt;æ ¼å¼&lt;/h2&gt;&lt;h3 id=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å…¥æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å…¥æ ¼å¼&lt;/h3&gt;&lt;p&gt;ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•´æ•°nï¼Œè¡¨ç¤ºæ´»åŠ¨å†æ—¶çš„å¤©æ•°ã€‚&lt;br&gt;ä»¥ä¸‹çš„nè¡Œï¼Œæ¯è¡ŒåŒ…å«è‹¥å¹²ç”±ç©ºæ ¼åˆ†éš”çš„éè´Ÿæ•´æ•°ã€‚ç¬¬i+1è¡Œçš„æ•°è¡¨ç¤ºåœ¨ç¬¬iå¤©æŠ•å…¥ç®±å­çš„è´¦å•é‡‘é¢ã€‚æ¯è¡Œçš„ç¬¬ä¸€ä¸ªæ•°æ˜¯ä¸€ä¸ªæ•´æ•°kï¼Œè¡¨ç¤ºå½“æ—¥è´¦å•çš„æ•°ç›®ã€‚åé¢çš„kä¸ªæ­£æ•´æ•°ä»£è¡¨è¿™kç¬”è´¦å•çš„é‡‘é¢ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å‡ºæ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å‡ºæ ¼å¼&lt;/h2&gt;&lt;p&gt;è¾“å‡ºä¸€ä¸ªæ•°ï¼Œè¡¨ç¤ºæ´»åŠ¨æœŸé—´è¶…å¸‚ä»˜å‡ºçš„å¥–é‡‘æ€»é¢ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="Problem Set" scheme="https://cothrax.github.io/categories/Problem-Set/"/>
    
    
      <category term="OI" scheme="https://cothrax.github.io/tags/OI/"/>
    
      <category term="JSOI" scheme="https://cothrax.github.io/tags/JSOI/"/>
    
      <category term="å †" scheme="https://cothrax.github.io/tags/%E5%A0%86/"/>
    
      <category term="æ•°æ®ç»“æ„" scheme="https://cothrax.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="å¹¶æŸ¥é›†" scheme="https://cothrax.github.io/tags/%E5%B9%B6%E6%9F%A5%E9%9B%86/"/>
    
      <category term="å›¾è®º" scheme="https://cothrax.github.io/tags/%E5%9B%BE%E8%AE%BA/"/>
    
      <category term="æœ€çŸ­è·¯" scheme="https://cothrax.github.io/tags/%E6%9C%80%E7%9F%AD%E8%B7%AF/"/>
    
  </entry>
  
  <entry>
    <title>[JSOI2016] æé«˜2ç­ ä½è¿ç®—</title>
    <link href="https://cothrax.github.io/2016/08/17/JSOI2016-%E6%8F%90%E9%AB%982%E7%8F%AD-%E4%BD%8D%E8%BF%90%E7%AE%97/"/>
    <id>https://cothrax.github.io/2016/08/17/JSOI2016-æé«˜2ç­-ä½è¿ç®—/</id>
    <published>2016-08-17T10:18:57.000Z</published>
    <updated>2016-08-18T03:34:11.718Z</updated>
    
    <content type="html"><![CDATA[<h1 id="P1-æ‹”æ²³æ¯”èµ›"><a href="#P1-æ‹”æ²³æ¯”èµ›" class="headerlink" title="P1 æ‹”æ²³æ¯”èµ›"></a>P1 æ‹”æ²³æ¯”èµ›</h1><p>ä¸€ä¸ªå­¦æ ¡ä¸¾è¡Œæ‹”æ²³æ¯”èµ›ï¼Œæ‰€æœ‰çš„äººè¢«åˆ†æˆäº†ä¸¤ç»„ï¼Œæ¯ä¸ªäººå¿…é¡»ï¼ˆä¸”åªèƒ½å¤Ÿï¼‰åœ¨å…¶ä¸­çš„ä¸€ç»„ï¼Œä¸”ä¸¤ä¸ªç»„å†…çš„æ‰€æœ‰äººä½“é‡åŠ èµ·æ¥å°½å¯èƒ½åœ°æ¥è¿‘ã€‚</p>
<h2 id="æ ¼å¼"><a href="#æ ¼å¼" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼"><a href="#è¾“å…¥æ ¼å¼" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>æ•°æ®çš„ç¬¬1è¡Œæ˜¯ä¸€ä¸ªnï¼Œè¡¨ç¤ºå‚åŠ æ‹”æ²³æ¯”èµ›çš„æ€»äººæ•°ï¼Œæ¥ä¸‹æ¥çš„nè¡Œè¡¨ç¤ºç¬¬1åˆ°ç¬¬nä¸ªäººçš„ä½“é‡ï¼Œæ¯ä¸ªäººçš„ä½“é‡weightéƒ½æ˜¯æ•´æ•°ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼"><a href="#è¾“å‡ºæ ¼å¼" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>åŒ…å«ä¸¤ä¸ªæ•´æ•°ï¼šåˆ†åˆ«æ˜¯ä¸¤ä¸ªç»„çš„æ‰€æœ‰äººçš„ä½“é‡å’Œï¼Œç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ã€‚æ³¨æ„å¦‚æœè¿™ä¸¤ä¸ªæ•°ä¸ç›¸ç­‰ï¼Œåˆ™è¯·æŠŠå°çš„æ”¾åœ¨å‰é¢è¾“å‡ºã€‚<br><a id="more"></a></p>
<h2 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥"><a href="#æ ·ä¾‹è¾“å…¥" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>3<br>100<br>90<br>200</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º"><a href="#æ ·ä¾‹è¾“å‡º" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>190 200</p>
</blockquote>
<h2 id="æç¤º"><a href="#æç¤º" class="headerlink" title="æç¤º"></a>æç¤º</h2><p>60%çš„æ•°æ®ä¿è¯ n&lt;=100ï¼Œ1&lt;=weight&lt;=500ã€‚<br>100%çš„æ•°æ®ä¿è¯ n&lt;=500ï¼Œ1&lt;=weight&lt;=1000ã€‚</p>
<h2 id="æ°´è§£"><a href="#æ°´è§£" class="headerlink" title="æ°´è§£"></a>æ°´è§£</h2><p>å˜å½¢èƒŒåŒ…ï¼Œå¾ˆæ˜¾ç„¶ã€‚<br>è®°f[i,j]å‰iä¸ªäººå·®å€¼ä¸ºjçš„æƒ…å†µæ˜¯å¦å¯èƒ½ï¼Œa[i]æ”¾åˆ°ç¬¬ä¸€ç»„è®¤ä¸ºæ˜¯-a[i]ï¼Œæ”¾åˆ°ç¬¬äºŒç»„è®¤ä¸ºæ˜¯+a[i]ï¼Œé‚£ä¹ˆï¼š$f[i,j]=f[i,j-a[i]]\ or\ f[i,j+a[i]]$<br>ä½†å¤æ‚åº¦æ˜¯$O(N^2W)$ï¼Œ60åˆ†ã€‚</p>
<dir style="text-align:right"><a href="/2016/08/17/JSOI2016-æé«˜2ç­-ä½è¿ç®—/competition.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>competition.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    n,m,i,j,i0,i1:int;</div><div class="line">    a:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">501</span>] <span class="keyword">of</span> int;</div><div class="line">    f:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1</span>,-<span class="number">501000</span>..<span class="number">501000</span>] <span class="keyword">of</span> boolean;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'competition.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'competition.out'</span>);rewrite(output);</div><div class="line"></div><div class="line">    <span class="keyword">read</span>(n);</div><div class="line">    m:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(a[i]);</div><div class="line">        inc(m,a[i]);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    fillchar(f,sizeof(f),false);</div><div class="line">    f[<span class="number">0</span>,<span class="number">0</span>]:=true;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        i0:=i <span class="keyword">mod</span> <span class="number">2</span>;i1:=<span class="number">1</span>-i0;</div><div class="line">        <span class="keyword">for</span> j:=-m <span class="keyword">to</span> m <span class="keyword">do</span></div><div class="line">            f[i0,j]:=f[i1,j-a[i]] <span class="keyword">or</span> f[i1,j+a[i]];</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    i0:=n <span class="keyword">mod</span> <span class="number">2</span>;</div><div class="line">    <span class="keyword">for</span> j:=<span class="number">0</span> <span class="keyword">to</span> m <span class="keyword">do</span></div><div class="line">        <span class="keyword">if</span> f[i0,j] <span class="keyword">or</span> f[i0,-j] <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            <span class="keyword">write</span>((m-j) <span class="keyword">div</span> <span class="number">2</span>,<span class="string">' '</span>,(m+j) <span class="keyword">div</span> <span class="number">2</span>);</div><div class="line">            halt</div><div class="line">        <span class="keyword">end</span>;</div><div class="line"></div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h2 id="æ­£è§£"><a href="#æ­£è§£" class="headerlink" title="æ­£è§£"></a>æ­£è§£</h2><p>C++æœ‰ä¸€ä¸ªstlå«bitsetï¼Œç„¶è€Œpæ²¡æœ‰ã€‚<br>æ€è·¯æ˜¯H[w]è¡¨ç¤ºç»„åˆå‡ºä½“é‡wæ˜¯å¦å¯è¡Œï¼Œé‚£ä¹ˆæ¯æ¬¡è¯»å…¥xï¼Œw=å¯è¡Œè§£+x éƒ½æ˜¯å¯è¡Œçš„ï¼Œäºæ˜¯<code>H|=H&lt;&lt;x</code><br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">bitset</span>&lt;501000&gt; H;</div><div class="line"><span class="function"><span class="keyword">int</span>  <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="built_in">cin</span>&gt;&gt;n;</div><div class="line">    H[<span class="number">0</span>]=<span class="literal">true</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</div><div class="line">	     <span class="built_in">cin</span>&gt;&gt;x;s+=x;H=H|(H&lt;&lt;x);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> x=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=s;i++)<span class="keyword">if</span>(H[i]&amp;&amp;i&lt;=s-i)x=i;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;x&lt;&lt;<span class="string">" "</span>&lt;&lt;s-x&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="P2-èµ·åºŠå›°éš¾ç»¼åˆç—‡"><a href="#P2-èµ·åºŠå›°éš¾ç»¼åˆç—‡" class="headerlink" title="P2 èµ·åºŠå›°éš¾ç»¼åˆç—‡"></a>P2 èµ·åºŠå›°éš¾ç»¼åˆç—‡</h1><p>21ä¸–çºªï¼Œè®¸å¤šäººå¾—äº†ä¸€ç§å¥‡æ€ªçš„ç—…ï¼šèµ·åºŠå›°éš¾ç»¼åˆç—‡ï¼Œå…¶ä¸´åºŠè¡¨ç°ä¸ºï¼šèµ·åºŠéš¾ï¼Œèµ·åºŠåç²¾ç¥ä¸ä½³ã€‚ä½œä¸ºä¸€åé’æ˜¥é˜³å…‰å¥½å°‘å¹´ï¼Œatmä¸€ç›´åšæŒä¸èµ·åºŠå›°éš¾ç»¼åˆç—‡ä½œæ–—äº‰ã€‚é€šè¿‡ç ”ç©¶ç›¸å…³æ–‡çŒ®ï¼Œä»–æ‰¾åˆ°äº†è¯¥ç—…çš„å‘ç—…åŸå› ï¼šåœ¨æ·±é‚ƒçš„å¤ªå¹³æ´‹æµ·åº•ä¸­ï¼Œå‡ºç°äº†ä¸€æ¡åä¸ºdrdçš„å·¨é¾™ï¼Œå®ƒæŒæ¡ç€ç¡çœ ä¹‹ç²¾é«“ï¼Œèƒ½éšæ„å»¶é•¿å¤§å®¶çš„ç¡çœ æ—¶é—´ã€‚æ­£æ˜¯ç”±äºdrdçš„æ´»åŠ¨ï¼Œèµ·åºŠå›°éš¾ç»¼åˆç—‡æ„ˆæ¼”æ„ˆçƒˆï¼Œä»¥æƒŠäººçš„é€Ÿåº¦åœ¨ä¸–ç•Œä¸Šä¼ æ’­ã€‚ä¸ºäº†å½»åº•æ¶ˆç­è¿™ç§ç—…ï¼Œatmå†³å®šå‰å¾€æµ·åº•ï¼Œæ¶ˆç­è¿™æ¡æ¶é¾™ã€‚<br>å†ç»åƒè¾›ä¸‡è‹¦ï¼Œatmç»ˆäºæ¥åˆ°äº†drdæ‰€åœ¨çš„åœ°æ–¹ï¼Œå‡†å¤‡ä¸å…¶å±•å¼€è‰°è‹¦å“ç»çš„æˆ˜æ–—ã€‚drdæœ‰ç€ååˆ†ç‰¹æ®Šçš„æŠ€èƒ½ï¼Œä»–çš„é˜²å¾¡æˆ˜çº¿èƒ½å¤Ÿä½¿ç”¨ä¸€å®šçš„è¿ç®—æ¥æ”¹å˜ä»–å—åˆ°çš„ä¼¤å®³ã€‚å…·ä½“è¯´æ¥ï¼Œdrdçš„é˜²å¾¡æˆ˜çº¿ç”±næ‰‡é˜²å¾¡é—¨ç»„æˆã€‚æ¯æ‰‡é˜²å¾¡é—¨åŒ…æ‹¬ä¸€ä¸ªè¿ç®—opå’Œä¸€ä¸ªå‚æ•°tï¼Œå…¶ä¸­è¿ç®—ä¸€å®šæ˜¯OR,XOR,ANDä¸­çš„ä¸€ç§ï¼Œå‚æ•°åˆ™ä¸€å®šä¸ºéè´Ÿæ•´æ•°ã€‚å¦‚æœè¿˜æœªé€šè¿‡é˜²å¾¡é—¨æ—¶æ”»å‡»åŠ›ä¸ºxï¼Œåˆ™å…¶é€šè¿‡è¿™æ‰‡é˜²å¾¡é—¨åæ”»å‡»åŠ›å°†å˜ä¸ºxoptã€‚æœ€ç»ˆdrdå—åˆ°çš„ä¼¤å®³ä¸ºå¯¹æ–¹åˆå§‹æ”»å‡»åŠ›xä¾æ¬¡ç»è¿‡æ‰€æœ‰næ‰‡é˜²å¾¡é—¨åè½¬å˜å¾—åˆ°çš„æ”»å‡»åŠ›ã€‚<br>ç”±äºatmæ°´å¹³æœ‰é™ï¼Œä»–çš„åˆå§‹æ”»å‡»åŠ›åªèƒ½ä¸º0åˆ°mä¹‹é—´çš„ä¸€ä¸ªæ•´æ•°ï¼ˆå³ä»–çš„åˆå§‹æ”»å‡»åŠ›åªèƒ½åœ¨0,1,â€¦,mä¸­ä»»é€‰ï¼Œä½†åœ¨é€šè¿‡é˜²å¾¡é—¨ä¹‹åçš„æ”»å‡»åŠ›ä¸å—mçš„é™åˆ¶ï¼‰ã€‚ä¸ºäº†èŠ‚çœä½“åŠ›ï¼Œä»–å¸Œæœ›é€šè¿‡é€‰æ‹©åˆé€‚çš„åˆå§‹æ”»å‡»åŠ›ä½¿å¾—ä»–çš„æ”»å‡»èƒ½è®©drdå—åˆ°æœ€å¤§çš„ä¼¤å®³ï¼Œè¯·ä½ å¸®ä»–è®¡ç®—ä¸€ä¸‹ï¼Œä»–çš„ä¸€æ¬¡æ”»å‡»æœ€å¤šèƒ½ä½¿drdå—åˆ°å¤šå°‘ä¼¤å®³ã€‚</p>
<h2 id="æ ¼å¼-1"><a href="#æ ¼å¼-1" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-1"><a href="#è¾“å…¥æ ¼å¼-1" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬1è¡ŒåŒ…å«2ä¸ªæ•´æ•°ï¼Œä¾æ¬¡ä¸ºn,mï¼Œè¡¨ç¤ºdrdæœ‰næ‰‡é˜²å¾¡é—¨ï¼Œatmçš„åˆå§‹æ”»å‡»åŠ›ä¸º0åˆ°mä¹‹é—´çš„æ•´æ•°ã€‚æ¥ä¸‹æ¥nè¡Œï¼Œä¾æ¬¡è¡¨ç¤ºæ¯ä¸€æ‰‡é˜²å¾¡é—¨ã€‚æ¯è¡ŒåŒ…æ‹¬ä¸€ä¸ªå­—ç¬¦ä¸²opå’Œä¸€ä¸ªéè´Ÿæ•´æ•°tï¼Œä¸¤è€…ç”±ä¸€ä¸ªç©ºæ ¼éš”å¼€ï¼Œä¸”opåœ¨å‰ï¼Œtåœ¨åï¼Œopè¡¨ç¤ºè¯¥é˜²å¾¡é—¨æ‰€å¯¹åº”çš„æ“ä½œï¼Œ tè¡¨ç¤ºå¯¹åº”çš„å‚æ•°ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼-1"><a href="#è¾“å‡ºæ ¼å¼-1" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>ä¸€è¡Œä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºatmçš„ä¸€æ¬¡æ”»å‡»æœ€å¤šä½¿ drd å—åˆ°å¤šå°‘ä¼¤å®³ã€‚</p>
<h2 id="æ ·ä¾‹-1"><a href="#æ ·ä¾‹-1" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-1"><a href="#æ ·ä¾‹è¾“å…¥-1" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>3 10<br>AND 5<br>OR 6<br>XOR 7</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-1"><a href="#æ ·ä¾‹è¾“å‡º-1" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>3</p>
</blockquote>
<h2 id="æç¤º-1"><a href="#æç¤º-1" class="headerlink" title="æç¤º"></a>æç¤º</h2><p><strong>è¡¥å……è¯´æ˜</strong><br>atmå¯ä»¥é€‰æ‹©çš„åˆå§‹æ”»å‡»åŠ›ä¸º0,1,â€¦,10ã€‚<br>å‡è®¾åˆå§‹æ”»å‡»åŠ›ä¸º4ï¼Œæœ€ç»ˆæ”»å‡»åŠ›ç»è¿‡äº†å¦‚ä¸‹è®¡ç®—<br>4 AND 5 = 4<br>4 OR  6 = 6<br>6 XOR 7 = 1<br>ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—å‡ºåˆå§‹æ”»å‡»åŠ›ä¸º1,3,5,7,9æ—¶æœ€ç»ˆæ”»å‡»åŠ›ä¸º0ï¼Œåˆå§‹æ”»å‡»åŠ›ä¸º0,2,4,6,8,10æ—¶æœ€ç»ˆæ”»å‡»åŠ›ä¸º1ï¼Œå› æ­¤atmçš„ä¸€æ¬¡æ”»å‡»æœ€å¤šä½¿ drd å—åˆ°çš„ä¼¤å®³å€¼ä¸º1ã€‚<br><strong>æ•°æ®èŒƒå›´</strong><br>0&lt;=m&lt;=10^9<br>0&lt;=t&lt;=10^9<br>è¿ç®—ä¸€å®šä¸ºOR,XOR,AND ä¸­çš„ä¸€ç§</p>
<h2 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>ä½è¿ç®—æ¯ä¸€ä½éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œäºæ˜¯ä»é«˜åˆ°ä½æšä¸¾é€‰æ‹©æ•°å­—çš„æ¯ä¸€ä½ï¼Œåˆ†å‡ ç§æƒ…å†µè®¨è®ºï¼š</p>
<ol>
<li>è¯¥ä½å–0æ—¶ç»è¿‡næ¬¡æ“ä½œç»“æœå–1ï¼Œè¯¥ä½é€‰æ‹©0ä¸€å®šæœ€ä¼˜ã€‚</li>
<li>è‹¥æƒ…å†µ1ä¸æ»¡è¶³ï¼Œè¯¥ä½å–1æ—¶ç»è¿‡næ¬¡æ“ä½œç»“æœå–1 ä¸”å–1åå€¼ä¸è¶…è¿‡m è¿™æ ·æˆ‘ä»¬ä¹Ÿé€‰æ‹©1ã€‚</li>
<li>ä¸Šä¸¤ç§æƒ…å†µä¸æ»¡è¶³ï¼Œåˆ™è¯¥ä½å–0ä¸€å®šæ¯”å–1å°ä¸”æ›´ä¸å®¹æ˜“è¶…è¿‡mã€‚<br>å¯ä»¥ç›´æ¥ç”¨<span>$(0...0)_2$</span><!-- Has MathJax -->å’Œ<span>$(1...1)_2$</span><!-- Has MathJax -->ï¼Œè¿™æ ·ä¼˜åŒ–ä¸º$O(N)$ã€‚<br>ä»£ç ä¸‘çš„å¯ä»¥ã€‚</li>
</ol>
<dir style="text-align:right"><a href="/2016/08/17/JSOI2016-æé«˜2ç­-ä½è¿ç®—/sleep.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>sleep.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">var</span></div><div class="line">    a1,a0,ans,orig,p,t,c,i,n,m:int; </div><div class="line">    s,op:<span class="keyword">string</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'sleep.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'sleep.out'</span>);rewrite(output);</div><div class="line"></div><div class="line">    readln(n,m);</div><div class="line">    a0:=<span class="number">0</span>;a1:=<span class="keyword">not</span> <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        readln(s);</div><div class="line">        p:=pos(<span class="string">' '</span>,s);</div><div class="line">        op:=copy(s,<span class="number">1</span>,p-<span class="number">1</span>);</div><div class="line">        val(copy(s,p+<span class="number">1</span>,length(s)-p),t,c);</div><div class="line">        </div><div class="line">        <span class="keyword">if</span> op=<span class="string">'XOR'</span> <span class="keyword">then</span> <span class="keyword">begin</span> a0:=a0 xor t;a1:=a1 xor t <span class="keyword">end</span></div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> op=<span class="string">'OR'</span> <span class="keyword">then</span> <span class="keyword">begin</span> a0:=a0 <span class="keyword">or</span> t;a1:=a1 <span class="keyword">or</span> t <span class="keyword">end</span></div><div class="line">        <span class="keyword">else</span> <span class="keyword">begin</span> a0:=a0 <span class="keyword">and</span> t;a1:=a1 <span class="keyword">and</span> t <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"></div><div class="line">    ans:=<span class="number">0</span>; <span class="comment">//æœ€ç»ˆä¼¤å®³</span></div><div class="line">    orig:=<span class="number">0</span>; <span class="comment">//åŸå§‹ä¼¤å®³</span></div><div class="line">    <span class="keyword">for</span> i:=<span class="number">30</span> <span class="keyword">downto</span> <span class="number">0</span> <span class="keyword">do</span> </div><div class="line">        <span class="keyword">if</span> ((a0 <span class="keyword">shr</span> i) <span class="keyword">and</span> <span class="number">1</span>)=<span class="number">1</span> <span class="keyword">then</span></div><div class="line">            ans:=ans <span class="keyword">or</span> (<span class="number">1</span> <span class="keyword">shl</span> i)</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (((a1 <span class="keyword">shr</span> i) <span class="keyword">and</span> <span class="number">1</span>)=<span class="number">1</span>) <span class="keyword">and</span> </div><div class="line">                ((orig <span class="keyword">or</span> (<span class="number">1</span> <span class="keyword">shl</span> i))&lt;=m) <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            ans:=ans <span class="keyword">or</span> (<span class="number">1</span> <span class="keyword">shl</span> i);</div><div class="line">            orig:=orig <span class="keyword">or</span> (<span class="number">1</span> <span class="keyword">shl</span> i);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">write</span>(ans);</div><div class="line"></div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P3-ä¹’ä¹“æ¸¸æˆ"><a href="#P3-ä¹’ä¹“æ¸¸æˆ" class="headerlink" title="P3 ä¹’ä¹“æ¸¸æˆ"></a>P3 ä¹’ä¹“æ¸¸æˆ</h1><p>ä¸€æ¡å¤§è¡—ä¸Šä½ç€nä¸ªä¹’ä¹“çƒçˆ±å¥½è€…ï¼Œç»å¸¸ç»„ç»‡æ¯”èµ›åˆ‡ç£‹æŠ€æœ¯ã€‚æ¯ä¸ªäººéƒ½æœ‰ä¸€ä¸ªä¸åŒçš„æŠ€èƒ½å€¼aiã€‚æ¯åœºæ¯”èµ›éœ€è¦3ä¸ªäººï¼šä¸¤åé€‰æ‰‹ï¼Œä¸€åè£åˆ¤ã€‚ä»–ä»¬æœ‰ä¸€ä¸ªå¥‡æ€ªçš„è§„å®šï¼Œå³è£åˆ¤å¿…é¡»ä½åœ¨ä¸¤åé€‰æ‰‹çš„ä¸­é—´ï¼Œå¹¶ä¸”æŠ€èƒ½å€¼ä¹Ÿåœ¨ä¸¤åé€‰æ‰‹ä¹‹é—´ã€‚é—®ä¸€å…±èƒ½ç»„ç»‡å¤šå°‘ç§æ¯”èµ›ã€‚</p>
<h2 id="æ ¼å¼-2"><a href="#æ ¼å¼-2" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-2"><a href="#è¾“å…¥æ ¼å¼-2" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬ä¸€è¡Œæ˜¯æ•´æ•°nï¼Œç„¶åæ˜¯nä¸ªä¸åŒçš„æ•´æ•°ï¼Œå³a1,a2,â€¦,anï¼ŒæŒ‰ç…§ä½å¤„ä»å·¦åˆ°å³çš„é¡ºåºç»™æ¯ä¸ªä¹’ä¹“çƒçˆ±å¥½è€…çš„æŠ€èƒ½å€¼ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼-2"><a href="#è¾“å‡ºæ ¼å¼-2" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>è¾“å‡ºæ¯”èµ›æ€»æ•°çš„å€¼ã€‚<br><!--more--></p>
<h2 id="æ ·ä¾‹-2"><a href="#æ ·ä¾‹-2" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-2"><a href="#æ ·ä¾‹è¾“å…¥-2" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>5<br>6 1 8 10 1</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-2"><a href="#æ ·ä¾‹è¾“å‡º-2" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>3</p>
</blockquote>
<h2 id="æç¤º-2"><a href="#æç¤º-2" class="headerlink" title="æç¤º"></a>æç¤º</h2><p>30%çš„æ•°æ® n&lt;=3000ã€‚<br>100%çš„æ•°æ® n&lt;=100000,ai&lt;=100000ã€‚ </p>
<h2 id="é¢˜è§£-1"><a href="#é¢˜è§£-1" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>å¯¹äºè£åˆ¤iï¼Œè®°1..i-1ä¸­æŠ€èƒ½å€¼å°äºa[i]çš„äººæ•°ä¸ºlsï¼Œi+1..nä¸­å°äºa[i]çš„äººæ•°rsï¼Œé‚£ä¹ˆè¿™ä¸ªè£åˆ¤èƒ½ç»„ç»‡çš„æ¯”èµ›æ•°$=sl*(n-i-sr)+(i-1-sl)*sr$<br>æ‰«ä¸€éiï¼Œå¯ä»¥ç”¨ä¸¤ä¸ªæ ‘çŠ¶æ•°ç»„ç»´æŠ¤ã€‚</p>
<dir style="text-align:right"><a href="/2016/08/17/JSOI2016-æé«˜2ç­-ä½è¿ç®—/pingpong.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>pingpong.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> maxn=<span class="number">100000</span>;</div><div class="line"><span class="keyword">type</span> </div><div class="line">    int=longint;</div><div class="line">    arr=<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">100010</span>] <span class="keyword">of</span> int;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    l,r,a:arr;</div><div class="line">    n,i,sl,sr:int;ans:int64;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">lowbit</span><span class="params">(x:int)</span>:</span>int;</div><div class="line"><span class="keyword">begin</span> lowbit:=x <span class="keyword">and</span> (-x) <span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">add</span><span class="params">(<span class="keyword">var</span> a:arr;x,k:int)</span>;</span></div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">if</span> x=<span class="number">0</span> <span class="keyword">then</span> <span class="keyword">exit</span>;</div><div class="line">    <span class="keyword">while</span> x&lt;=maxn <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        inc(a[x],k);</div><div class="line">        inc(x,lowbit(x));</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span><span class="params">(<span class="keyword">var</span> a:arr;x:int)</span>:</span>int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    sum:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span> x&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        inc(sum,a[x]);</div><div class="line">        dec(x,lowbit(x));</div><div class="line">    <span class="keyword">end</span>;    </div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'pingpong.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'pingpong.out'</span>);rewrite(output);</div><div class="line"></div><div class="line">    <span class="keyword">read</span>(n);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(a[i]);</div><div class="line">        <span class="keyword">if</span> i&lt;&gt;<span class="number">1</span> <span class="keyword">then</span> add(r,a[i],<span class="number">1</span>);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    ans:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        sl:=sum(l,a[i]);sr:=sum(r,a[i]);</div><div class="line">        inc(ans,sl*(n-i-sr)+(i-<span class="number">1</span>-sl)*sr);</div><div class="line">        add(r,a[i+<span class="number">1</span>],-<span class="number">1</span>);add(l,a[i],<span class="number">1</span>);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">write</span>(ans);</div><div class="line"></div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P4-é»‘å®¢çš„æ”»å‡»"><a href="#P4-é»‘å®¢çš„æ”»å‡»" class="headerlink" title="P4 é»‘å®¢çš„æ”»å‡»"></a>P4 é»‘å®¢çš„æ”»å‡»</h1><p>å‡è®¾ä½ æ˜¯ä¸€ä¸ªé»‘å®¢ï¼Œå…¥ä¾µäº†ä¸€ä¸ªæœ‰ç€nå°è®¡ç®—æœº(ç¼–å·ä¸º0,1,â€¦,n-1)çš„ç½‘ç»œã€‚ä¸€å…±æœ‰nç§æœåŠ¡ï¼Œæ¯å°è®¡ç®—æœºéƒ½è¿è¡Œç€æ‰€æœ‰çš„æœåŠ¡ã€‚å¯¹äºæ¯å°è®¡ç®—æœºï¼Œä½ éƒ½å¯ä»¥é€‰æ‹©ä¸€é¡¹æœåŠ¡ï¼Œç»ˆæ­¢è¿™å°è®¡ç®—æœºå’Œæ‰€æœ‰å’Œå®ƒç›¸é‚»è®¡ç®—æœºçš„è¯¥é¡¹æœåŠ¡ï¼ˆå¦‚æœå…¶ä¸­çš„ä¸€äº›æœåŠ¡å·²ç»åœæ­¢ï¼Œåˆ™è¿™äº›æœåŠ¡ç»§ç»­å¤„äºåœæ­¢çŠ¶æ€ï¼‰ã€‚ä½ çš„ç›®æ ‡æ˜¯è®©å°½é‡å¤šçš„æœåŠ¡å®Œå…¨ç˜«ç—ªï¼ˆå³ï¼šæ²¡æœ‰ä»»ä½•è®¡ç®—æœºè¿è¡Œè¯¥é¡¹æœåŠ¡)</p>
<h2 id="æ ¼å¼-3"><a href="#æ ¼å¼-3" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-3"><a href="#è¾“å…¥æ ¼å¼-3" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬ä¸€è¡Œä¸ºæ•´æ•°nï¼›ä»¥ä¸‹nè¡Œæ¯è¡Œæè¿°ä¸€å°è®¡ç®—æœºçš„ç›¸é‚»è®¡ç®—æœºï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªæ•°mä¸ºç›¸é‚»çš„è®¡ç®—æœºä¸ªæ•°ï¼Œæ¥ä¸‹æ¥mä¸ªæ•°ä¸ºè¿™äº›è®¡ç®—æœºçš„ç¼–å·ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼-3"><a href="#è¾“å‡ºæ ¼å¼-3" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>è¾“å‡ºå®Œå…¨ç˜«ç—ªçš„æœåŠ¡å™¨çš„æœ€å¤§æ•°é‡<br><!--more--></p>
<h2 id="æ ·ä¾‹-3"><a href="#æ ·ä¾‹-3" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-3"><a href="#æ ·ä¾‹è¾“å…¥-3" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>4<br>1 1<br>1 0<br>1 3<br>1 2</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-3"><a href="#æ ·ä¾‹è¾“å‡º-3" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>2</p>
</blockquote>
<h2 id="æç¤º-3"><a href="#æç¤º-3" class="headerlink" title="æç¤º"></a>æç¤º</h2><p>nâ‰¤16ã€‚</p>
<h2 id="é¢˜è§£-2"><a href="#é¢˜è§£-2" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>çœ‹æ•°æ®èŒƒå›´ï¼ŒçŠ¶å‹DPï¼Œç”¨äºŒè¿›åˆ¶è¡¨ç¤ºé›†åˆ<br>a[i]é¢„å¤„ç†å‡ºç‚¹iç›¸é‚»çš„èŠ‚ç‚¹ï¼ŒäºŒè¿›åˆ¶è¡¨ç¤º<br>p[S]é¢„å¤„ç†å‡ºé›†åˆSæ‰€èƒ½å¤Ÿè¦†ç›–çš„ç‚¹çš„é›†åˆ<br>ç„¶ådpï¼Œ<span>$f[S]=max\{f[S\ xor\ j]+1\ |\ j\in S\ and\ p[j]=(1\ shl\ n)-1\}$</span><!-- Has MathJax --></p>
<dir style="text-align:right"><a href="/2016/08/17/JSOI2016-æé«˜2ç­-ä½è¿ç®—/hacker.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>hacker.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    n,m,k,i,j,t,lowbit:int;</div><div class="line">    f,p:<span class="keyword">array</span>[<span class="number">0</span>..(<span class="number">1</span> <span class="keyword">shl</span> <span class="number">16</span>)-<span class="number">1</span>] <span class="keyword">of</span> int;</div><div class="line">    a:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">17</span>] <span class="keyword">of</span> int;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'hacker.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'hacker.out'</span>);rewrite(output);</div><div class="line"></div><div class="line">    <span class="keyword">read</span>(n);</div><div class="line">    k:=(<span class="number">1</span> <span class="keyword">shl</span> n)-<span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">0</span> <span class="keyword">to</span> n-<span class="number">1</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(m);</div><div class="line">        a[i]:=<span class="number">1</span> <span class="keyword">shl</span> i;</div><div class="line">        <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            <span class="keyword">read</span>(t);</div><div class="line">            a[i]:=a[i] <span class="keyword">or</span> (<span class="number">1</span> <span class="keyword">shl</span> t);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">0</span> <span class="keyword">to</span> k <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        t:=i;</div><div class="line">        p[i]:=<span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span> t&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            lowbit:=t <span class="keyword">and</span> (-t);</div><div class="line">            p[i]:=p[i] <span class="keyword">or</span> a[round(ln(lowbit)/ln(<span class="number">2</span>))];</div><div class="line">            t:=t-lowbit;</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> k <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        f[i]:=<span class="number">0</span>;j:=i;</div><div class="line">        <span class="keyword">while</span> j&lt;&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            <span class="keyword">if</span> p[j]=k <span class="keyword">then</span> f[i]:=max(f[i xor j]+<span class="number">1</span>,f[i]);</div><div class="line">            j:=(j-<span class="number">1</span>) <span class="keyword">and</span> i;</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">write</span>(f[k]);</div><div class="line"></div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;P1-æ‹”æ²³æ¯”èµ›&quot;&gt;&lt;a href=&quot;#P1-æ‹”æ²³æ¯”èµ›&quot; class=&quot;headerlink&quot; title=&quot;P1 æ‹”æ²³æ¯”èµ›&quot;&gt;&lt;/a&gt;P1 æ‹”æ²³æ¯”èµ›&lt;/h1&gt;&lt;p&gt;ä¸€ä¸ªå­¦æ ¡ä¸¾è¡Œæ‹”æ²³æ¯”èµ›ï¼Œæ‰€æœ‰çš„äººè¢«åˆ†æˆäº†ä¸¤ç»„ï¼Œæ¯ä¸ªäººå¿…é¡»ï¼ˆä¸”åªèƒ½å¤Ÿï¼‰åœ¨å…¶ä¸­çš„ä¸€ç»„ï¼Œä¸”ä¸¤ä¸ªç»„å†…çš„æ‰€æœ‰äººä½“é‡åŠ èµ·æ¥å°½å¯èƒ½åœ°æ¥è¿‘ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ ¼å¼&quot;&gt;&lt;a href=&quot;#æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;æ ¼å¼&quot;&gt;&lt;/a&gt;æ ¼å¼&lt;/h2&gt;&lt;h3 id=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å…¥æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å…¥æ ¼å¼&lt;/h3&gt;&lt;p&gt;æ•°æ®çš„ç¬¬1è¡Œæ˜¯ä¸€ä¸ªnï¼Œè¡¨ç¤ºå‚åŠ æ‹”æ²³æ¯”èµ›çš„æ€»äººæ•°ï¼Œæ¥ä¸‹æ¥çš„nè¡Œè¡¨ç¤ºç¬¬1åˆ°ç¬¬nä¸ªäººçš„ä½“é‡ï¼Œæ¯ä¸ªäººçš„ä½“é‡weightéƒ½æ˜¯æ•´æ•°ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å‡ºæ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å‡ºæ ¼å¼&lt;/h2&gt;&lt;p&gt;åŒ…å«ä¸¤ä¸ªæ•´æ•°ï¼šåˆ†åˆ«æ˜¯ä¸¤ä¸ªç»„çš„æ‰€æœ‰äººçš„ä½“é‡å’Œï¼Œç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ã€‚æ³¨æ„å¦‚æœè¿™ä¸¤ä¸ªæ•°ä¸ç›¸ç­‰ï¼Œåˆ™è¯·æŠŠå°çš„æ”¾åœ¨å‰é¢è¾“å‡ºã€‚&lt;br&gt;
    
    </summary>
    
      <category term="Problem Set" scheme="https://cothrax.github.io/categories/Problem-Set/"/>
    
    
      <category term="OI" scheme="https://cothrax.github.io/tags/OI/"/>
    
      <category term="JSOI" scheme="https://cothrax.github.io/tags/JSOI/"/>
    
      <category term="æ•°æ®ç»“æ„" scheme="https://cothrax.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="DP" scheme="https://cothrax.github.io/tags/DP/"/>
    
      <category term="ä½è¿ç®—" scheme="https://cothrax.github.io/tags/%E4%BD%8D%E8%BF%90%E7%AE%97/"/>
    
      <category term="æ ‘çŠ¶æ•°ç»„" scheme="https://cothrax.github.io/tags/%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84/"/>
    
      <category term="çŠ¶å‹DP" scheme="https://cothrax.github.io/tags/%E7%8A%B6%E5%8E%8BDP/"/>
    
  </entry>
  
  <entry>
    <title>[JSOI2016] æé«˜1ç­-Day1</title>
    <link href="https://cothrax.github.io/2016/08/16/JSOI2016-%E6%8F%90%E9%AB%981%E7%8F%AD-Day1/"/>
    <id>https://cothrax.github.io/2016/08/16/JSOI2016-æé«˜1ç­-Day1/</id>
    <published>2016-08-16T14:10:35.000Z</published>
    <updated>2016-08-18T03:34:21.275Z</updated>
    
    <content type="html"><![CDATA[<h1 id="P1-é€‰æ•°"><a href="#P1-é€‰æ•°" class="headerlink" title="P1 é€‰æ•°"></a>P1 é€‰æ•°</h1><p>ç°åœ¨æœ‰ä¸€æ’å…±Nä¸ªæ•°ï¼Œä½ éœ€è¦ä»ä¸­é€‰å‡ºæ°å¥½Kä¸ªã€‚é€‰å‡ºKä¸ªæ•°åï¼Œè®¡ç®—å®ƒä»¬ä¸¤ä¸¤å·®å€¼çš„ç»å¯¹å€¼çš„æœ€å°å€¼Sã€‚ä½ éœ€è¦ç¡®å®šé€‰å‡ºå“ªKä¸ªï¼Œæ‰èƒ½æœ€å¤§åŒ–è¿™ä¸ªSã€‚</p>
<h2 id="æ ¼å¼"><a href="#æ ¼å¼" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼"><a href="#è¾“å…¥æ ¼å¼" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>è¾“å…¥ç¬¬ä¸€è¡Œä¸¤ä¸ªæ­£æ•´æ•°Nã€Kï¼Œå«ä¹‰å¦‚ä¸Šã€‚<br>è¾“å…¥ç¬¬äºŒè¡ŒNä¸ªæ­£æ•´æ•°ï¼Œä¾æ¬¡è¡¨ç¤ºè¿™Nä¸ªæ•°A1~Anã€‚0ï¼œAiâ‰¤10^9ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼"><a href="#è¾“å‡ºæ ¼å¼" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>ä¸€è¡Œä¸€ä¸ªæ­£æ•´æ•°ï¼ŒSçš„æœ€å¤§å€¼ã€‚<br><a id="more"></a></p>
<h2 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥"><a href="#æ ·ä¾‹è¾“å…¥" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>11 5<br>19 585 29 1111 5868 3331 272 4441 2251 868 581</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º"><a href="#æ ·ä¾‹è¾“å‡º" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>1092</p>
</blockquote>
<h2 id="æç¤ºâ€‹"><a href="#æç¤ºâ€‹" class="headerlink" title="æç¤ºâ€‹"></a>æç¤ºâ€‹</h2><p>å¯¹äº30%çš„æ•°æ®ï¼ŒNâ‰¤18ã€‚<br>å¯¹äº60%çš„æ•°æ®ï¼ŒNâ‰¤20ã€‚<br>å¯¹äº80%çš„æ•°æ®ï¼ŒNâ‰¤100ã€‚<br>å¯¹äº100%çš„æ•°æ®ï¼ŒNâ‰¤100000ï¼ŒK&lt;=N</p>
<h2 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>æœ€å¤§åŒ–æœ€å°å€¼ï¼Œå…¸å‹çš„äºŒåˆ†ç­”æ¡ˆã€‚<br>ç„¶è€Œä¸çŸ¥é“æ€ä¹ˆåœ¨O(N)å†…åˆ¤å®šä¸€ä¸ªè§£çš„æ­£ç¡®æ€§ã€‚ã€‚ã€‚<br>æˆ‘ä»¬è´ªå¿ƒçš„æƒ³ï¼š<br>å…ˆqsortå‡åº<br>æœ€å°çš„æ•°ä¸€å®šè¦é€‰ï¼Œå¯ä»¥åæ­£ï¼šå¦‚æœé€‰äº†æ¬¡å°çš„æ•°æ²¡æœ‰é€‰æœ€å°ï¼Œé‚£ä¹ˆæŠŠæ¬¡å°æ¢æˆæœ€å°çš„ç­”æ¡ˆä¸€å®šæ›´ä¼˜ã€‚<br>äºæ˜¯å…ˆé€‰a[last=1]ï¼ŒO(N)æ‰«ä¸€éï¼Œå¦‚æœa[i]-a[last]&gt;=midé‚£ä¹ˆå°±é€‰iï¼Œæ›´æ–°lastï¼Œç»Ÿè®¡ä¸ªæ•°ã€‚</p>
<dir style="text-align:right"><a href="/2016/08/16/JSOI2016-æé«˜1ç­-Day1/choose.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>choose.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    a:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">100010</span>] <span class="keyword">of</span> int;</div><div class="line">    n,k,i,l,r,mid,ans:int;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">swap</span><span class="params">(<span class="keyword">var</span> a,b:int)</span>;</span></div><div class="line"><span class="keyword">var</span> tmp:int;</div><div class="line"><span class="keyword">begin</span> tmp:=a;a:=b;b:=tmp <span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">qsort</span><span class="params">(b,e:int)</span>;</span></div><div class="line"><span class="keyword">var</span> i,j,x:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    i:=b;j:=e;x:=a[random(e-b)+b];</div><div class="line">    <span class="keyword">repeat</span></div><div class="line">        <span class="keyword">while</span> a[i]&lt;x <span class="keyword">do</span> inc(i);</div><div class="line">        <span class="keyword">while</span> a[j]&gt;x <span class="keyword">do</span> dec(j);</div><div class="line">        <span class="keyword">if</span> i&lt;=j <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            swap(a[i],a[j]);</div><div class="line">            inc(i);dec(j);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">until</span> i&gt;j;</div><div class="line">    <span class="keyword">if</span> i&lt;e <span class="keyword">then</span> qsort(i,e);</div><div class="line">    <span class="keyword">if</span> b&lt;j <span class="keyword">then</span> qsort(b,j);</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">check</span><span class="params">(x:int)</span>:</span>boolean;</div><div class="line"><span class="keyword">var</span> i,last,cnt:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    cnt:=<span class="number">1</span>;last:=a[<span class="number">1</span>];</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">2</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">        <span class="keyword">if</span> a[i]-last&gt;=x <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            last:=a[i];</div><div class="line">            inc(cnt);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    check:=cnt&gt;=k;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'choose.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'choose.out'</span>);rewrite(output);</div><div class="line"></div><div class="line">    <span class="keyword">read</span>(n,k);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">read</span>(a[i]);</div><div class="line">    qsort(<span class="number">1</span>,n);</div><div class="line">    l:=<span class="number">0</span>;r:=a[n]-a[<span class="number">1</span>];</div><div class="line">    <span class="keyword">while</span> l&lt;=r <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        mid:=(l+r) <span class="keyword">shr</span> <span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span> check(mid) <span class="keyword">then</span> <span class="keyword">begin</span> ans:=mid;l:=mid+<span class="number">1</span> <span class="keyword">end</span></div><div class="line">        <span class="keyword">else</span> r:=mid-<span class="number">1</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">write</span>(ans);</div><div class="line"></div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P2-åˆ’åŒºçŒæº‰"><a href="#P2-åˆ’åŒºçŒæº‰" class="headerlink" title="P2 åˆ’åŒºçŒæº‰"></a>P2 åˆ’åŒºçŒæº‰</h1><p>çº¦ç¿°çš„å¥¶ç‰›ä»¬å‘ç°å±±è„Šä¸Šçš„è‰ç‰¹åˆ«ç¾å‘³ã€‚ä¸ºäº†ç»´æŒè‰çš„ç”Ÿé•¿ï¼Œçº¦ç¿°æ‰“ç®—å®‰è£…è‹¥å¹²å–·çŒå™¨ã€‚<br>ä¸ºç®€åŒ–é—®é¢˜ï¼Œå±±è„Šå¯ä»¥çœ‹æˆä¸€ç»´çš„æ•°è½´ï¼Œé•¿ä¸ºL(1â‰¤Lâ‰¤1,000,000)ï¼Œè€Œä¸”Lä¸€å®šæ˜¯ä¸€ä¸ªå¶æ•°ã€‚æ¯ä¸ªå–·çŒå™¨å¯ä»¥åŒå‘å–·çŒï¼Œå¹¶æœ‰ç¡®å®šçš„å°„ç¨‹ï¼Œè¯¥å°„ç¨‹æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œä¸”ä¸çŸ­äºAï¼Œä¸é•¿äºBã€‚A,B(1â‰¤Aâ‰¤Bâ‰¤1000)éƒ½æ˜¯ç»™å‡ºçš„æ­£æ•´æ•°ã€‚å®ƒæ‰€åœ¨ä½ç½®çš„ä¸¤è¾¹å°„ç¨‹å†…ï¼Œéƒ½å±å®ƒçš„çŒæº‰åŒºåŸŸã€‚ç°è¦æ±‚å±±è„Šçš„æ¯ä¸€ä¸ªåŒºåŸŸéƒ½è¢«çŒæº‰åˆ°ï¼Œè€Œä¸”å–·çŒå™¨çš„çŒæº‰åŒºåŸŸä¸å…è®¸é‡å ã€‚<br>çº¦ç¿°æœ‰N(1â‰¤Nâ‰¤1000)åªå¥¶ç‰›ï¼Œæ¯ä¸€åªéƒ½æœ‰ç‰¹åˆ«å–œçˆ±çš„è‰åŒºï¼Œç¬¬iåªå¥¶ç‰›çš„è‰åŒºæ˜¯[Siï¼ŒEi]ï¼Œä¸åŒå¥¶ç‰›çš„è‰åŒºå¯ä»¥é‡å ã€‚ç°è¦æ±‚ï¼Œæ¯åªå¥¶ç‰›çš„è‰åŒºä»…è¢«ä¸€ä¸ªå–·çŒå™¨çŒæº‰ã€‚<br>å¯»æ‰¾æœ€å°‘éœ€è¦çš„å–·çŒå™¨æ•°ç›®ã€‚</p>
<h2 id="æ ¼å¼-1"><a href="#æ ¼å¼-1" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-1"><a href="#è¾“å…¥æ ¼å¼-1" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬1è¡Œï¼šN,L.<br>ç¬¬2è¡Œï¼šA,B.<br>ç¬¬3åˆ°Nå2è¡Œï¼šæ¯è¡Œ2ä¸ªæ•´æ•°Siï¼ŒEi,(0â‰¤S\&lt;Eâ‰¤L).</p>
<h2 id="è¾“å‡ºæ ¼å¼-1"><a href="#è¾“å‡ºæ ¼å¼-1" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>æœ€å°çš„å–·çŒå™¨æ•°ç›®ã€‚å¦‚æœæ— æ³•è®¾è®¡å‡ºæ»¡è¶³æ¡ä»¶çš„å–·çŒå™¨æ•°ç›®ï¼Œè¯·è¾“å‡º-1.</p>
<h2 id="æ ·ä¾‹-1"><a href="#æ ·ä¾‹-1" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-1"><a href="#æ ·ä¾‹è¾“å…¥-1" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>2 8<br>1 2<br>6 7<br>3 6 </p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-1"><a href="#æ ·ä¾‹è¾“å‡º-1" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>3</p>
</blockquote>
<h2 id="æç¤º"><a href="#æç¤º" class="headerlink" title="æç¤º"></a>æç¤º</h2><p>ã€æ ·ä¾‹è¯´æ˜ã€‘<br>å¦‚ä¸‹å›¾ï¼Œåªéœ€å®‰è£…ä¸‰ä¸ªå–·çŒå™¨ã€‚c1,c2ä¸ºå¥¶ç‰›ä»¬çš„è‰åŒºã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">            |-----c2----|-c1|       </div><div class="line">|---1---|-------2-------|---3---|   </div><div class="line">+---+---+---+---+---+---+---+---+</div><div class="line">0   1   2   3   4   5   6   7   8</div></pre></td></tr></table></figure></p>
<p>ã€æ•°æ®èŒƒå›´ã€‘<br>å¯¹äº30%çš„æ•°æ®ï¼ŒLâ‰¤100ã€‚<br>å¯¹äº60%çš„æ•°æ®ï¼ŒLâ‰¤10000ã€‚<br>å¯¹äº100%çš„æ•°æ®ï¼Œ1â‰¤Lâ‰¤1,000,000ï¼Œ1â‰¤Aâ‰¤Bâ‰¤1000ï¼Œ1â‰¤Nâ‰¤1000ã€‚</p>
<h2 id="æ°´è§£"><a href="#æ°´è§£" class="headerlink" title="æ°´è§£"></a>æ°´è§£</h2><p>é¦–å…ˆï¼Œçœ‹èµ·æ¥åƒçº¿æ®µè¦†ç›–DPï¼Œäºæ˜¯åˆ$O(L^2)$çš„ç®—æ³•<br>å·¦å³éƒ½è¦†ç›–æ¯”è¾ƒéº»çƒ¦ï¼Œå¯ä»¥çœ‹æˆåªå‘å·¦è¦†ç›–ï¼ŒèŒƒå›´[2*a,2*b]<br>80åˆ†ï¼Œä¸€ä¸ªç‚¹TLEï¼Œè¿˜æœ‰ä¸€ä¸ªä¸çŸ¥é“ä¸ºä»€ä¹ˆWAã€‚ã€‚ã€‚</p>
<dir style="text-align:right"><a href="/2016/08/16/JSOI2016-æé«˜1ç­-Day1/divide.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>divide.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">const</span> inf=<span class="number">1000000000</span>;</div><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    n,l,a,b,i,j,k:int;</div><div class="line">    seg:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1010</span>,<span class="number">0</span>..<span class="number">1</span>] <span class="keyword">of</span> int;</div><div class="line">    f:<span class="keyword">array</span>[-<span class="number">1010</span>..<span class="number">1000010</span>] <span class="keyword">of</span> int;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">com</span><span class="params">(x,y:int)</span>:</span>boolean;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">if</span> (seg[x,<span class="number">0</span>]&lt;seg[y,<span class="number">0</span>]) <span class="keyword">or</span> </div><div class="line">       ((seg[x,<span class="number">0</span>]=seg[y,<span class="number">0</span>]) <span class="keyword">and</span> (seg[x,<span class="number">1</span>]&lt;seg[y,<span class="number">1</span>])) <span class="keyword">then</span> com:=true</div><div class="line">    <span class="keyword">else</span> com:=false;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">swap</span><span class="params">(<span class="keyword">var</span> a,b:int)</span>;</span></div><div class="line"><span class="keyword">var</span> tmp:int;</div><div class="line"><span class="keyword">begin</span> tmp:=a;a:=b;b:=tmp <span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">qsort</span><span class="params">(b,e:int)</span>;</span></div><div class="line"><span class="keyword">var</span> i,j:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    i:=b;j:=e;seg[<span class="number">0</span>]:=seg[random(e-b)+b];</div><div class="line">    <span class="keyword">repeat</span></div><div class="line">        <span class="keyword">while</span> com(i,<span class="number">0</span>) <span class="keyword">do</span> inc(i);</div><div class="line">        <span class="keyword">while</span> com(<span class="number">0</span>,j) <span class="keyword">do</span> dec(j);</div><div class="line">        <span class="keyword">if</span> i&lt;=j <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            swap(seg[i,<span class="number">0</span>],seg[j,<span class="number">0</span>]);swap(seg[i,<span class="number">1</span>],seg[j,<span class="number">1</span>]);</div><div class="line">            inc(i);dec(j);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">until</span> i&gt;j;</div><div class="line">    <span class="keyword">if</span> i&lt;e <span class="keyword">then</span> qsort(i,e);</div><div class="line">    <span class="keyword">if</span> b&lt;j <span class="keyword">then</span> qsort(b,j);</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'divide.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'divide.out'</span>);rewrite(output);</div><div class="line"></div><div class="line">    <span class="keyword">read</span>(n,l,a,b);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">read</span>(seg[i,<span class="number">0</span>],seg[i,<span class="number">1</span>]);</div><div class="line">    qsort(<span class="number">1</span>,n);</div><div class="line">    filldword(f,sizeof(f) <span class="keyword">div</span> <span class="number">4</span>,inf);</div><div class="line">    seg[<span class="number">0</span>,<span class="number">1</span>]:=<span class="number">0</span>;seg[<span class="number">0</span>,<span class="number">0</span>]:=<span class="number">0</span>;seg[n+<span class="number">1</span>,<span class="number">0</span>]:=l;</div><div class="line"></div><div class="line">    f[<span class="number">0</span>]:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n+<span class="number">1</span> <span class="keyword">do</span></div><div class="line">        <span class="keyword">for</span> j:=seg[i-<span class="number">1</span>,<span class="number">1</span>] <span class="keyword">to</span> seg[i,<span class="number">0</span>] <span class="keyword">do</span></div><div class="line">            <span class="keyword">for</span> k:=a <span class="keyword">to</span> b <span class="keyword">do</span></div><div class="line">                f[j]:=min(f[j],f[j-k*<span class="number">2</span>]+<span class="number">1</span>);</div><div class="line">    <span class="keyword">if</span> f[l]=inf <span class="keyword">then</span> <span class="keyword">write</span>(-<span class="number">1</span>) <span class="keyword">else</span> <span class="keyword">write</span>(f[l]);</div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h2 id="æ­£è§£"><a href="#æ­£è§£" class="headerlink" title="æ­£è§£"></a>æ­£è§£</h2><p>ç„¶åå‘ç°å¯¹äºç¬¬iä¸ªä½ç½®ï¼Œå†³ç­–åœ¨[i-2<em>b,i-2</em>a]ï¼Œäºæ˜¯æƒ³åˆ°äº† å®šçª—é•¿æœ€å¤§å€¼ çš„æ¨¡å‹ï¼Œè€Œä¸”å†³ç­–å•è°ƒï¼Œäºæ˜¯ç”¨å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–æˆO(N)ã€‚<br>æ³¨æ„ï¼š</p>
<ol>
<li>åŒç†çœ‹æˆå‘å·¦è¦†ç›–ï¼Œåªèƒ½åœ¨å¶æ•°ç‚¹å¤„ç†</li>
<li>æ³¨æ„ç«¯ç‚¹å’Œé˜Ÿåˆ—æŒ‡é’ˆçš„ç»†èŠ‚</li>
<li>è¢«å¥¶ç‰›çš„è‰åŒºè¦†ç›–çš„ç‚¹ä¸åšå¤„ç†ï¼Œè¿™å¯ä»¥ç”¨å·®åˆ†åºåˆ—cé¢„å¤„ç†O(N)</li>
</ol>
<dir style="text-align:right"><a href="/2016/08/16/JSOI2016-æé«˜1ç­-Day1/0divide.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>0divide.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">const</span> inf=<span class="number">1000000000</span>;</div><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    n,l,a,b,h,t,i,x:int;</div><div class="line">    q:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">10010</span>,<span class="number">0</span>..<span class="number">1</span>] <span class="keyword">of</span> int;</div><div class="line">    c,f:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1000010</span>] <span class="keyword">of</span> int;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'divide.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'divide.out'</span>);rewrite(output);</div><div class="line">    </div><div class="line">    <span class="keyword">read</span>(n,l,a,b);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(h,t);</div><div class="line">        inc(c[h+<span class="number">1</span>]);dec(c[t]);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> l <span class="keyword">do</span> inc(c[i],c[i-<span class="number">1</span>]);</div><div class="line"></div><div class="line">    filldword(f,sizeof(f) <span class="keyword">div</span> <span class="number">4</span>,inf);</div><div class="line">    f[<span class="number">0</span>]:=<span class="number">0</span>;</div><div class="line">    h:=<span class="number">0</span>;t:=<span class="number">0</span>;i:=<span class="number">2</span>;</div><div class="line">    <span class="keyword">while</span> i&lt;=l <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        x:=i-<span class="number">2</span>*a;</div><div class="line">        <span class="keyword">if</span> x&gt;=<span class="number">0</span> <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            <span class="keyword">while</span> (h&lt;&gt;t) <span class="keyword">and</span> (q[t-<span class="number">1</span>,<span class="number">0</span>]&gt;=f[x]) <span class="keyword">do</span> dec(t);</div><div class="line">            q[t,<span class="number">0</span>]:=f[x];q[t,<span class="number">1</span>]:=x;</div><div class="line">            inc(t);<span class="keyword">if</span> t&gt;<span class="number">10010</span> <span class="keyword">then</span> t:=<span class="number">0</span>;</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">        <span class="keyword">if</span> c[i]=<span class="number">0</span> <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            x:=i-<span class="number">2</span>*b;</div><div class="line">            <span class="keyword">while</span> (h&lt;&gt;t) <span class="keyword">and</span> (q[h,<span class="number">1</span>]&lt;x) <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">                inc(h);<span class="keyword">if</span> h&gt;<span class="number">10010</span> <span class="keyword">then</span> h:=<span class="number">0</span>;</div><div class="line">            <span class="keyword">end</span>;</div><div class="line">            <span class="keyword">if</span> (h=t) <span class="keyword">or</span> (q[h,<span class="number">0</span>]=inf) <span class="keyword">then</span> f[i]:=inf <span class="keyword">else</span> f[i]:=q[h,<span class="number">0</span>]+<span class="number">1</span>;</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">        inc(i,<span class="number">2</span>);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">if</span> f[l]=inf <span class="keyword">then</span> <span class="keyword">write</span>(-<span class="number">1</span>) <span class="keyword">else</span> <span class="keyword">write</span>(f[l]);</div><div class="line"></div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P3-æ ‘æ—"><a href="#P3-æ ‘æ—" class="headerlink" title="P3 æ ‘æ—"></a>P3 æ ‘æ—</h1><p>ç°åœ¨æœ‰ä¸€ç‰‡æ ‘æ—ï¼Œå°Bå¾ˆæƒ³çŸ¥é“ï¼Œæœ€å°‘éœ€è¦å¤šå°‘æ­¥èƒ½å›´ç»•æ ‘æ—èµ°ä¸€åœˆï¼Œæœ€åå›åˆ°èµ·ç‚¹ï¼ä»–èƒ½ä¸Šä¸‹å·¦å³èµ°ï¼Œä¹Ÿèƒ½èµ°å¯¹è§’çº¿æ ¼å­ã€‚<br>åœŸåœ°è¢«åˆ†æˆRè¡ŒCåˆ—ï¼ˆ1â‰¤Râ‰¤50,1â‰¤Câ‰¤50)ï¼Œä¸‹é¢æ˜¯ä¸€å¼ æ ·ä¾‹çš„åœ°å›¾ï¼Œå…¶ä¸­â€œ.â€è¡¨ç¤ºå°Bå¯ä»¥èµ°çš„ç©ºåœ°ï¼Œâ€Xâ€è¡¨ç¤ºæ ‘æ—ï¼Œâ€*â€è¡¨ç¤ºèµ·ç‚¹ã€‚è€Œå°Bèµ°çš„æœ€è¿‘çš„è·¯å·±ç»ç‰¹åˆ«åœ°ç”¨â€œ+â€è¡¨ç¤ºå‡ºæ¥ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">. . . + . . .</div><div class="line">. . + X + . .</div><div class="line">. + X X X + .</div><div class="line">. . + X X X +</div><div class="line">. . + X . . +</div><div class="line">. . . + + + *</div></pre></td></tr></table></figure></p>
<p>é¢˜ç›®ä¿è¯ï¼Œä¸€å®šæœ‰åˆæ³•è§£å¹¶ä¸”æœ‰ä¸”åªæœ‰ä¸€ç‰‡æ ‘æ—ï¼Œæ ‘æ—ä¸€å®šæ˜¯ä¸Šä¸‹å·¦å³è”é€šçš„ã€‚</p>
<h2 id="æ ¼å¼-2"><a href="#æ ¼å¼-2" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-2"><a href="#è¾“å…¥æ ¼å¼-2" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p> ç¬¬1è¡Œè¾“å…¥Rå’ŒCï¼Œæ¥ä¸‹æ¥Rè¡ŒCåˆ—è¡¨ç¤ºä¸€å¼ åœ°å›¾ã€‚åœ°å›¾ä¸­çš„ç¬¦å·å¦‚é¢˜å¹²æ‰€è¿°ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼-2"><a href="#è¾“å‡ºæ ¼å¼-2" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>è¾“å‡ºæœ€å°‘çš„æ­¥æ•°ã€‚</p>
<h2 id="æ ·ä¾‹-2"><a href="#æ ·ä¾‹-2" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-2"><a href="#æ ·ä¾‹è¾“å…¥-2" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>6 7<br>â€¦â€¦.<br>â€¦Xâ€¦<br>..XXX..<br>â€¦XXX.<br>â€¦Xâ€¦<br>â€¦â€¦*</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-2"><a href="#æ ·ä¾‹è¾“å‡º-2" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>13</p>
</blockquote>
<h2 id="æç¤º-1"><a href="#æç¤º-1" class="headerlink" title="æç¤º"></a>æç¤º</h2><p>å¯¹äº40%çš„æ•°æ®ï¼ŒR,Câ‰¤12<br>å¯¹äº60%çš„æ•°æ®ï¼ŒR,Câ‰¤30<br>å¯¹äº100%çš„æ•°æ®ï¼ŒR,Câ‰¤50</p>
<h2 id="é¢˜è§£-1"><a href="#é¢˜è§£-1" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>ç¥å¥‡çš„é¢˜ç›®ï¼Œæˆ‘ä»¬å–ä¸€æ£µæ ‘ï¼ˆå¦‚å–æ¨ªåæ ‡æœ€å°çš„ï¼‰ï¼Œæ°´å¹³å‘å·¦å¼•ä¸€æ¡å°„çº¿ï¼ˆå›¾ä¸­â€œ-â€ï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">. . . + . . .</div><div class="line">. . a X + . .</div><div class="line">- - X X X + .</div><div class="line">. . b X X X +</div><div class="line">. . + X . . +</div><div class="line">. . . + + + *</div></pre></td></tr></table></figure></p>
<p>ç„¶ååœ¨<strong>ä¸ç©¿è¿‡è¿™æ¡çº¿</strong>çš„æƒ…å†µä¸‹ä»èµ·ç‚¹BFSï¼Œé‚£ä¹ˆä¸€æ¡åˆæ³•è·¯å¾„å¿…ç„¶æ˜¯ï¼š</p>
<ol>
<li>ä»èµ·ç‚¹ï¼Œä¸ç©¿è¿‡çº¿åˆ°è¾¾å°„çº¿ä¸‹ä¸€ç‚¹b</li>
<li>ä»bç©¿è¿‡çº¿åˆ°è¾¾å°„çº¿ä¸Šä¸€ç‚¹a</li>
<li>ä»aä¸ç©¿è¿‡å°„çº¿å›åˆ°èµ·ç‚¹</li>
</ol>
<p>1å’Œ3çš„æœ€çŸ­è·¯åœ¨bfsé‡Œç®—è¿‡äº†ï¼›2çš„è¯ï¼Œè®°b(i-1,j) a(i+1,k)ï¼Œé‚£ä¹ˆè·¯å¾„2çš„å€¼å°±æ˜¯$max(|k-j|,2)$<br>ä¸¤ä¸ªå¾ªç¯æšä¸¾a,bå°±å¥½äº†ã€‚</p>
<dir style="text-align:right"><a href="/2016/08/16/JSOI2016-æé«˜1ç­-Day1/grove.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>grove.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">type</span> int=integer;</div><div class="line"><span class="keyword">const</span> </div><div class="line">    dir:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">7</span>,<span class="number">0</span>..<span class="number">1</span>] <span class="keyword">of</span> int=</div><div class="line">    ((<span class="number">0</span>,<span class="number">1</span>),(<span class="number">0</span>,-<span class="number">1</span>),(<span class="number">1</span>,<span class="number">0</span>),(-<span class="number">1</span>,<span class="number">0</span>),(<span class="number">1</span>,<span class="number">1</span>),(-<span class="number">1</span>,-<span class="number">1</span>),(-<span class="number">1</span>,<span class="number">1</span>),(<span class="number">1</span>,-<span class="number">1</span>));</div><div class="line">    inf=<span class="number">5000</span>;    </div><div class="line"><span class="keyword">var</span> </div><div class="line">    n,m,i,j,sx,sy,x,y,nx,ny,h,t,ans:int;</div><div class="line">    map:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">51</span>,<span class="number">0</span>..<span class="number">51</span>] <span class="keyword">of</span> char;</div><div class="line">    f:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">51</span>,<span class="number">0</span>..<span class="number">51</span>] <span class="keyword">of</span> int;</div><div class="line">    q:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">2510</span>,<span class="number">0</span>..<span class="number">1</span>] <span class="keyword">of</span> int;</div><div class="line">    </div><div class="line"><span class="keyword">begin</span></div><div class="line">    assign(input,<span class="string">'grove.in'</span>);reset(input);</div><div class="line">    assign(output,<span class="string">'grove.out'</span>);rewrite(output);</div><div class="line"></div><div class="line">    readln(n,m);</div><div class="line">    y:=<span class="number">51</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            <span class="keyword">read</span>(map[i,j]);</div><div class="line">            <span class="keyword">if</span> (map[i,j]=<span class="string">'X'</span>) <span class="keyword">and</span> (j&lt;y) <span class="keyword">then</span> <span class="keyword">begin</span> x:=i;y:=j <span class="keyword">end</span>;</div><div class="line">            <span class="keyword">if</span> map[i,j]=<span class="string">'*'</span> <span class="keyword">then</span> <span class="keyword">begin</span> sx:=i;sy:=j <span class="keyword">end</span>;</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">        readln;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> y-<span class="number">1</span> <span class="keyword">do</span> map[x,j]:=<span class="string">'-'</span>; <span class="comment">//ç”»ä¸€æ¡æ°´å¹³çº¿</span></div><div class="line">    <span class="comment">//bfs</span></div><div class="line">    fillword(f,sizeof(f) <span class="keyword">div</span> <span class="number">2</span>,inf);</div><div class="line">    h:=<span class="number">1</span>;t:=<span class="number">2</span>;</div><div class="line">    q[h,<span class="number">0</span>]:=sx;q[h,<span class="number">1</span>]:=sy;</div><div class="line">    f[sx,sy]:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span> h&lt;&gt;t <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">for</span> i:=<span class="number">0</span> <span class="keyword">to</span> <span class="number">7</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            nx:=q[h,<span class="number">0</span>]+dir[i,<span class="number">0</span>];ny:=q[h,<span class="number">1</span>]+dir[i,<span class="number">1</span>];</div><div class="line">            <span class="keyword">if</span> (nx&lt;<span class="number">1</span>) <span class="keyword">or</span> (ny&lt;<span class="number">1</span>) <span class="keyword">or</span> (nx&gt;n) <span class="keyword">or</span> (ny&gt;m) <span class="keyword">then</span> continue;</div><div class="line">            <span class="keyword">if</span> f[nx,ny]&lt;&gt;inf <span class="keyword">then</span> continue;</div><div class="line">            <span class="keyword">if</span> (map[nx,ny]=<span class="string">'X'</span>) <span class="keyword">or</span> (map[nx,ny]=<span class="string">'-'</span>) <span class="keyword">then</span> continue;</div><div class="line"></div><div class="line">            q[t,<span class="number">0</span>]:=nx;q[t,<span class="number">1</span>]:=ny;f[nx,ny]:=f[q[h,<span class="number">0</span>],q[h,<span class="number">1</span>]]+<span class="number">1</span>;</div><div class="line">            inc(t);<span class="keyword">if</span> t&gt;<span class="number">2510</span> <span class="keyword">then</span> t:=<span class="number">0</span>;</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">        inc(h);<span class="keyword">if</span> h&gt;<span class="number">2510</span> <span class="keyword">then</span> h:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    </div><div class="line">    ans:=maxint;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> y <span class="keyword">do</span></div><div class="line">        <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> y <span class="keyword">do</span></div><div class="line">            ans:=min(ans,f[x-<span class="number">1</span>,i]+f[x+<span class="number">1</span>,j]+max(abs(j-i),<span class="number">2</span>));</div><div class="line">    <span class="keyword">write</span>(ans);</div><div class="line">    </div><div class="line">    close(input);close(output);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h1 id="P4-è¿·å®«èŠ±å›"><a href="#P4-è¿·å®«èŠ±å›" class="headerlink" title="P4 è¿·å®«èŠ±å›"></a>P4 è¿·å®«èŠ±å›</h1><p>åœ£ç›æ ¼ä¸½ç‰¹å­¦å›­çš„ä¸€è§’æœ‰ä¸€ä¸ªå·¨å¤§ã€å¦‚è¿·å®«èˆ¬çš„èŠ±å›ã€‚å¤§çº¦æœ‰ä¸€ä¸ªäººè¿™ä¹ˆé«˜çš„å¤§å‹èŠ±å›ï¼Œåšæˆè¿·å®«çš„å½¢çŠ¶ï¼Œæ·±å—ä¸­ä¸–çºªè´µæ—çš„å–œçˆ±ã€‚ç»´å¤šåˆ©åŠ çš„å°å±‹å°±åè½åœ¨è¿™è¿·å®«èŠ±å›çš„æ·±å¤„ã€‚æŸä¸€å¤©æ—©æ™¨ï¼Œä¹…åŸåŒå­¦è¦ç©¿è¿‡è¿™å·¨å¤§çš„è¿·å®«èŠ±å›ï¼Œå»æ¢æœ›æ„Ÿå†’çš„ç»´å¤šåˆ©åŠ ã€‚<br>æ•´ä¸ªè¿·å®«å¯ä»¥ç”¨Nä¸ªè·¯å£ä¸Mæ¡è¿æ¥ä¸¤ä¸ªä¸åŒè·¯å£çš„æ— å‘é€šé“æ¥æè¿°ã€‚è·¯å£è¢«æ ‡å·ä¸º1åˆ°Nï¼Œæ¯æ¡é€šé“æœ‰å„è‡ªçš„é•¿åº¦ã€‚æ•´ä¸ªè¿·å®«ä¸€å®šæ˜¯è¿é€šçš„ï¼Œè¿·å®«ä¸­å¯èƒ½å­˜åœ¨è‹¥å¹²ä¸ªç¯è·¯ï¼Œä½†æ˜¯ï¼Œå‡ºäºç¾è§‚è€ƒè™‘ï¼Œæ¯ä¸ªè·¯å£æœ€å¤šåªä¼šå±äºä¸€ä¸ªç®€å•ç¯è·¯ã€‚ä¾‹å¦‚ï¼Œå›¾1æ‰€ç¤ºçš„è¿·å®«æ˜¯éå¸¸ç¾è§‚çš„ï¼Œä½†å›¾2åˆ™ä¸ç¬¦åˆæˆ‘ä»¬çš„æè¿°ï¼Œå› ä¸º3å·è·¯å£åŒå±äºä¸¤ä¸ªç®€å•ç¯ã€‚<br><img src="/2016/08/16/JSOI2016-æé«˜1ç­-Day1/1.png" alt="1.png" title=""><img src="/2016/08/16/JSOI2016-æé«˜1ç­-Day1/2.png" alt="2.png" title=""><br>ä½ éœ€è¦å›ç­”å¤šä¸ªè¿™æ ·çš„è¯¢é—®ï¼šå‡å¦‚ä¹…åŸå¤„åœ¨è·¯å£xï¼Œç»´å¤šåˆ©åŠ çš„å°å±‹å¤„åœ¨è·¯å£yï¼Œä¹…åŸæœ€çŸ­éœ€è¦èµ°å¤šå°‘è·ç¦»æ‰èƒ½åˆ°è¾¾å°å±‹ï¼Ÿ</p>
<h2 id="æ ¼å¼-3"><a href="#æ ¼å¼-3" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼-3"><a href="#è¾“å…¥æ ¼å¼-3" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬ä¸€è¡Œ2ä¸ªæ•´æ•°N,Mï¼Œè¡¨ç¤ºè¿·å®«èŠ±å›çš„è·¯å£æ•°å’Œé€šé“æ•°ï¼›<br>æ¥ä¸‹æ¥Mè¡Œï¼Œæ¯è¡Œ3ä¸ªæ•´æ•°x,y,zï¼Œæè¿°ä¸€æ¡è¿æ¥è·¯å£xä¸è·¯å£yï¼Œé•¿åº¦ä¸ºzçš„é€šé“ï¼›<br>å†æ¥ä¸‹æ¥1è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°Qï¼Œè¡¨ç¤ºè¯¢é—®æ•°é‡ï¼›<br>ä¹‹åQè¡Œï¼Œæ¯è¡Œ2ä¸ªæ•´æ•°x,yï¼Œæè¿°ä¸€ä¸ªè¯¢é—®ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼-3"><a href="#è¾“å‡ºæ ¼å¼-3" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>å¯¹äºæ¯ä¸ªè¯¢é—®è¾“å‡ºä¸€è¡Œä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€çŸ­è·ç¦»ã€‚</p>
<h2 id="æ ·ä¾‹-3"><a href="#æ ·ä¾‹-3" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥-3"><a href="#æ ·ä¾‹è¾“å…¥-3" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>4 4<br>1 2 1<br>2 3 2<br>1 3 2<br>3 4 1<br>2<br>2 4<br>1 3</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º-3"><a href="#æ ·ä¾‹è¾“å‡º-3" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>3<br>2</p>
</blockquote>
<h2 id="æç¤º-2"><a href="#æç¤º-2" class="headerlink" title="æç¤º"></a>æç¤º</h2><p>å¯¹äº30%çš„æ•°æ®ï¼ŒNâ‰¤100ï¼›<br>å¦æœ‰30%çš„æ•°æ®ï¼Œä¿è¯N=Mï¼›<br>å¯¹äº100%çš„æ•°æ®ï¼Œ1â‰¤Nâ‰¤100,000ï¼ŒQâ‰¤200,000ï¼Œ1â‰¤x,yâ‰¤Nï¼Œ1â‰¤zâ‰¤1000ã€‚</p>
<h2 id="é¢˜è§£-2"><a href="#é¢˜è§£-2" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>ä»™äººæŒä¸Šçš„å€å¢LCAã€‚ã€‚ã€‚<br>æˆ‘è¿˜æ˜¯è§‰å¾—æš´åŠ›Floydéª—30åˆ†æ¯”è¾ƒé€‚åˆæˆ‘ã€‚<br>é‚£ä¹ˆæ¥æ¬£èµä¸€ä¸‹æ ‡ç¨‹å§</p>
<dir style="text-align:right"></dir>

<figure class="highlight cpp"><figcaption><span>garden.cpp</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 100010</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INF  0x3f3f3f3f</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span>  n,m,K;</div><div class="line"><span class="keyword">int</span>  F[maxn][<span class="number">20</span>];</div><div class="line"><span class="keyword">int</span>  H[maxn];       <span class="comment">//æ·±åº¦ </span></div><div class="line"><span class="keyword">int</span>  D[maxn];       <span class="comment">//è·ç¦» </span></div><div class="line"></div><div class="line"><span class="keyword">int</span>  List[maxn*<span class="number">3</span>];  <span class="comment">//SCCè·ç¦» </span></div><div class="line"><span class="keyword">int</span>  Front[maxn];   <span class="comment">//SCCç¬¬ä¸€è·ç¦» </span></div><div class="line"><span class="keyword">int</span>  Back[maxn];    <span class="comment">//SCCç¬¬äºŒè·ç¦»</span></div><div class="line"><span class="keyword">int</span>  SCC[maxn];     <span class="comment">//è”é€šåˆ†é‡ </span></div><div class="line"><span class="keyword">int</span>  Ls=<span class="number">0</span>,SCCs=<span class="number">0</span>;</div><div class="line"><span class="keyword">struct</span> Edge&#123;<span class="keyword">int</span> v,w;Edge *next;&#125;;</div><div class="line">Edge *E[maxn],Er[maxn*<span class="number">3</span>];<span class="keyword">int</span> Es=<span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="keyword">struct</span> Data1&#123;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">addEdge</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> w)</span></span>&#123;</div><div class="line">		Edge *P=&amp;Er[++Es];P-&gt;v=v;P-&gt;w=w;P-&gt;next=E[u];E[u]=P;</div><div class="line">		      P=&amp;Er[++Es];P-&gt;v=u;P-&gt;w=w;P-&gt;next=E[v];E[v]=P;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="built_in">memset</span>(E,<span class="number">0</span>,<span class="keyword">sizeof</span>(E));</div><div class="line">		<span class="keyword">int</span> u,v,w;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;u,&amp;v,&amp;w),addEdge(u,v,w);</div><div class="line">	&#125;</div><div class="line">&#125;data1;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span>  <span class="title">calc</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> x1=Front[u],x2=Back[u],y1=Front[v],y2=Back[v],dis=INF;</div><div class="line">	dis=min(dis,<span class="built_in">abs</span>(List[x1]-List[y1]));</div><div class="line">	dis=min(dis,<span class="built_in">abs</span>(List[x1]-List[y2]));</div><div class="line">	dis=min(dis,<span class="built_in">abs</span>(List[x2]-List[y1]));</div><div class="line">	dis=min(dis,<span class="built_in">abs</span>(List[x2]-List[y2]));</div><div class="line">	<span class="keyword">return</span> dis;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span>  <span class="title">LCA</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> fu=u,fv=v;</div><div class="line">	<span class="keyword">if</span>(D[fu]&gt;D[fv])swap(fu,fv);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">19</span>;j&gt;=<span class="number">0</span>;j--)</div><div class="line">	    <span class="keyword">if</span>(F[fv][j]&amp;&amp;D[F[fv][j]]&gt;=D[fu])fv=F[fv][j];</div><div class="line">	<span class="keyword">if</span>(fv==fu)<span class="keyword">return</span> H[u]+H[v]-H[fu]-H[fu];</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">19</span>;j&gt;=<span class="number">0</span>;j--)</div><div class="line">	    <span class="keyword">if</span>(F[fv][j]&amp;&amp;F[fu][j]&amp;&amp;F[fu][j]!=F[fv][j])fu=F[fu][j],fv=F[fv][j];</div><div class="line">	<span class="keyword">if</span>(SCC[fu]!=SCC[fv]||SCC[fu]==<span class="number">0</span>||SCC[fv]==<span class="number">0</span>)<span class="keyword">return</span> H[u]+H[v]-H[F[fu][<span class="number">0</span>]]-H[F[fu][<span class="number">0</span>]];</div><div class="line">	<span class="keyword">return</span> H[u]+H[v]-H[fu]-H[fv]+calc(fu,fv);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">int</span>  Q[maxn],bot;</div><div class="line"><span class="keyword">struct</span> Data2&#123;</div><div class="line">	<span class="keyword">int</span>  Path[maxn],Length[maxn],u;</div><div class="line">	<span class="keyword">bool</span> V[maxn];</div><div class="line">	<span class="keyword">int</span>  P1[maxn*<span class="number">2</span>][<span class="number">2</span>],P2[maxn][<span class="number">2</span>],bot1,bot2;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">getPath</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> f,<span class="keyword">int</span> w)</span></span>&#123;</div><div class="line">		bot1=bot2=<span class="number">0</span>;</div><div class="line">		<span class="comment">//cout&lt;&lt;"getPath "&lt;&lt;u&lt;&lt;" "&lt;&lt;v&lt;&lt;" "&lt;&lt;f&lt;&lt;" "&lt;&lt;w&lt;&lt;endl;</span></div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> P=u;H[P]&gt;=H[f];P=Path[P])&#123;bot1++;P1[bot1][<span class="number">0</span>]=P;P1[bot1+<span class="number">1</span>][<span class="number">1</span>]=Length[P];&#125;</div><div class="line">		<span class="comment">//cout&lt;&lt;"P1"&lt;&lt;endl;</span></div><div class="line">		<span class="comment">//for(int i=1;i&lt;=bot1;i++)cout&lt;&lt;i&lt;&lt;" "&lt;&lt;P1[i][0]&lt;&lt;" "&lt;&lt;P1[i][1]&lt;&lt;endl;</span></div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> P=v;H[P]&gt;H[f];P=Path[P])&#123;bot2++;P2[bot2][<span class="number">0</span>]=P;P2[bot2][<span class="number">1</span>]=Length[P];&#125;</div><div class="line">		<span class="comment">//cout&lt;&lt;"P2"&lt;&lt;endl;</span></div><div class="line">		<span class="comment">//for(int i=1;i&lt;=bot2;i++)cout&lt;&lt;i&lt;&lt;" "&lt;&lt;P2[i][0]&lt;&lt;" "&lt;&lt;P2[i][1]&lt;&lt;endl;</span></div><div class="line">		<span class="keyword">while</span>(bot2)&#123;</div><div class="line">			bot1++;P1[bot1][<span class="number">0</span>]=P2[bot2][<span class="number">0</span>];P1[bot1][<span class="number">1</span>]=P2[bot2][<span class="number">1</span>];bot2--;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=bot1+<span class="number">1</span>;i&lt;=bot1*<span class="number">2</span>;i++)P1[i][<span class="number">0</span>]=P1[i-bot1][<span class="number">0</span>],P1[i][<span class="number">1</span>]=P1[i-bot1][<span class="number">1</span>];</div><div class="line">		P1[bot1+<span class="number">1</span>][<span class="number">1</span>]+=w;</div><div class="line">		</div><div class="line">		Ls++;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=bot1*<span class="number">2</span>;i++)List[Ls+i]=List[Ls+i<span class="number">-1</span>]+P1[i][<span class="number">1</span>];</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=bot1;i++)Front[P1[i][<span class="number">0</span>]]=Ls+i,Back[P1[i][<span class="number">0</span>]]=Ls+i+bot1;</div><div class="line">		Ls+=bot1*<span class="number">2</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">findSCC</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> w)</span></span>&#123;</div><div class="line">		<span class="keyword">int</span> fu=u,fv=v;</div><div class="line">		<span class="keyword">while</span>(fu!=fv)<span class="keyword">if</span>(H[fu]&gt;H[fv])fu=Path[fu];<span class="keyword">else</span> fv=Path[fv];</div><div class="line">		getPath(u,v,fu,w);</div><div class="line">		</div><div class="line">		SCCs++;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=bot1;i++)SCC[P1[i][<span class="number">0</span>]]=SCCs;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=bot1;i++)<span class="keyword">if</span>(P1[i][<span class="number">0</span>]!=fu)F[P1[i][<span class="number">0</span>]][<span class="number">0</span>]=fu;</div><div class="line">		<span class="comment">//cout&lt;&lt;"SCC "&lt;&lt;SCCs&lt;&lt;endl;</span></div><div class="line">		<span class="comment">//for(int i=1;i&lt;=2*bot1;i++)cout&lt;&lt;i&lt;&lt;" "&lt;&lt;P1[i][0]&lt;&lt;" "&lt;&lt;P1[i][1]&lt;&lt;endl;</span></div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">BFS</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="built_in">memset</span>(H,<span class="number">0</span>,<span class="keyword">sizeof</span>(H));</div><div class="line">		<span class="built_in">memset</span>(V,<span class="literal">true</span>,<span class="keyword">sizeof</span>(V));</div><div class="line">		<span class="built_in">memset</span>(List,<span class="number">0</span>,<span class="keyword">sizeof</span>(List));</div><div class="line">		<span class="built_in">memset</span>(SCC,<span class="number">0</span>,<span class="keyword">sizeof</span>(SCC));</div><div class="line">		<span class="built_in">memset</span>(F,<span class="number">0</span>,<span class="keyword">sizeof</span>(F));</div><div class="line">		Q[bot=<span class="number">1</span>]=<span class="number">1</span>;V[<span class="number">1</span>]=<span class="literal">false</span>;Path[<span class="number">1</span>]=Length[<span class="number">1</span>]=<span class="number">0</span>;H[<span class="number">1</span>]=<span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> top=<span class="number">1</span>;top&lt;=bot;top++)&#123;</div><div class="line">			u=Q[top];</div><div class="line">			<span class="comment">//cout&lt;&lt;"BFS "&lt;&lt;u&lt;&lt;endl;</span></div><div class="line">			<span class="keyword">for</span>(Edge *P=E[u];P;P=P-&gt;next)&#123;</div><div class="line">			    <span class="keyword">if</span>(P-&gt;v==Path[u])<span class="keyword">continue</span>;</div><div class="line">			    <span class="keyword">if</span>(V[P-&gt;v])&#123;</div><div class="line">					Q[++bot]=P-&gt;v;</div><div class="line">					H[P-&gt;v]=H[u]+<span class="number">1</span>;V[P-&gt;v]=<span class="literal">false</span>;</div><div class="line">					F[P-&gt;v][<span class="number">0</span>]=Path[P-&gt;v]=u;</div><div class="line">					Length[P-&gt;v]=P-&gt;w;</div><div class="line">			    &#125;</div><div class="line">			    <span class="keyword">else</span> <span class="keyword">if</span>(SCC[u]==<span class="number">0</span>)findSCC(P-&gt;v,u,P-&gt;w);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="comment">//for(int i=1;i&lt;=bot;i++)cout&lt;&lt;Q[i]&lt;&lt;" "&lt;&lt;F[Q[i]][0]&lt;&lt;" "&lt;&lt;SCC[Q[i]]&lt;&lt;" "&lt;&lt;Length[Q[i]]&lt;&lt;endl;</span></div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="built_in">memset</span>(H,<span class="number">0</span>,<span class="keyword">sizeof</span>(H));</div><div class="line">		<span class="built_in">memset</span>(D,<span class="number">0</span>,<span class="keyword">sizeof</span>(D));</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> top=<span class="number">1</span>;top&lt;=bot;top++)&#123;</div><div class="line">			u=Q[top];</div><div class="line">			D[u]=D[F[u][<span class="number">0</span>]]+<span class="number">1</span>;</div><div class="line">			<span class="keyword">if</span>(SCC[F[u][<span class="number">0</span>]]!=SCC[u]||SCC[u]==<span class="number">0</span>)H[u]=H[F[u][<span class="number">0</span>]]+Length[u];</div><div class="line">			                              <span class="keyword">else</span> H[u]=H[F[u][<span class="number">0</span>]]+calc(F[u][<span class="number">0</span>],u);</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;<span class="number">20</span>&amp;&amp;F[u][j<span class="number">-1</span>];j++)F[u][j]=F[F[u][j<span class="number">-1</span>]][j<span class="number">-1</span>];</div><div class="line">		&#125;</div><div class="line">		<span class="comment">/*</span></div><div class="line">		for(int i=1;i&lt;=bot;i++)&#123;</div><div class="line">			u=Q[i];</div><div class="line">			printf("Qi=%d SCC=%d H=%d D=%d\n",u,SCC[u],H[u],D[u]);</div><div class="line">			for(int j=0;j&lt;20;j++)printf("%5d",F[u][j]);cout&lt;&lt;endl;</div><div class="line">		&#125;</div><div class="line">		*/</div><div class="line">	&#125;</div><div class="line">&#125;data2;</div><div class="line"></div><div class="line"><span class="keyword">struct</span> Data3&#123;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">query</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">int</span>  u,v;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;K);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=K;i++)&#123;</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;u,&amp;v);</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,LCA(u,v));</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;data3;</div><div class="line"><span class="function"><span class="keyword">int</span>  <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	freopen(<span class="string">"garden.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"garden.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	data1.init();</div><div class="line">	data2.BFS();</div><div class="line">	data2.work();</div><div class="line">	data3.query();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;P1-é€‰æ•°&quot;&gt;&lt;a href=&quot;#P1-é€‰æ•°&quot; class=&quot;headerlink&quot; title=&quot;P1 é€‰æ•°&quot;&gt;&lt;/a&gt;P1 é€‰æ•°&lt;/h1&gt;&lt;p&gt;ç°åœ¨æœ‰ä¸€æ’å…±Nä¸ªæ•°ï¼Œä½ éœ€è¦ä»ä¸­é€‰å‡ºæ°å¥½Kä¸ªã€‚é€‰å‡ºKä¸ªæ•°åï¼Œè®¡ç®—å®ƒä»¬ä¸¤ä¸¤å·®å€¼çš„ç»å¯¹å€¼çš„æœ€å°å€¼Sã€‚ä½ éœ€è¦ç¡®å®šé€‰å‡ºå“ªKä¸ªï¼Œæ‰èƒ½æœ€å¤§åŒ–è¿™ä¸ªSã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ ¼å¼&quot;&gt;&lt;a href=&quot;#æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;æ ¼å¼&quot;&gt;&lt;/a&gt;æ ¼å¼&lt;/h2&gt;&lt;h3 id=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å…¥æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å…¥æ ¼å¼&lt;/h3&gt;&lt;p&gt;è¾“å…¥ç¬¬ä¸€è¡Œä¸¤ä¸ªæ­£æ•´æ•°Nã€Kï¼Œå«ä¹‰å¦‚ä¸Šã€‚&lt;br&gt;è¾“å…¥ç¬¬äºŒè¡ŒNä¸ªæ­£æ•´æ•°ï¼Œä¾æ¬¡è¡¨ç¤ºè¿™Nä¸ªæ•°A1~Anã€‚0ï¼œAiâ‰¤10^9ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å‡ºæ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å‡ºæ ¼å¼&lt;/h2&gt;&lt;p&gt;ä¸€è¡Œä¸€ä¸ªæ­£æ•´æ•°ï¼ŒSçš„æœ€å¤§å€¼ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="Problem Set" scheme="https://cothrax.github.io/categories/Problem-Set/"/>
    
    
      <category term="OI" scheme="https://cothrax.github.io/tags/OI/"/>
    
      <category term="JSOI" scheme="https://cothrax.github.io/tags/JSOI/"/>
    
      <category term="æ•°æ®ç»“æ„" scheme="https://cothrax.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="å›¾è®º" scheme="https://cothrax.github.io/tags/%E5%9B%BE%E8%AE%BA/"/>
    
      <category term="DP" scheme="https://cothrax.github.io/tags/DP/"/>
    
      <category term="å•è°ƒé˜Ÿåˆ—" scheme="https://cothrax.github.io/tags/%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97/"/>
    
      <category term="äºŒåˆ†ç­”æ¡ˆ" scheme="https://cothrax.github.io/tags/%E4%BA%8C%E5%88%86%E7%AD%94%E6%A1%88/"/>
    
      <category term="BFS" scheme="https://cothrax.github.io/tags/BFS/"/>
    
      <category term="ä»™äººæŒå›¾" scheme="https://cothrax.github.io/tags/%E4%BB%99%E4%BA%BA%E6%8E%8C%E5%9B%BE/"/>
    
  </entry>
  
  <entry>
    <title>[POJ] P2942 Knights of the Round Table</title>
    <link href="https://cothrax.github.io/2016/08/16/POJ-P2942/"/>
    <id>https://cothrax.github.io/2016/08/16/POJ-P2942/</id>
    <published>2016-08-16T05:42:38.000Z</published>
    <updated>2016-08-16T06:04:53.873Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æè¿°"><a href="#æè¿°" class="headerlink" title="æè¿°"></a>æè¿°</h2><p>Being a knight is a very attractive career: searching for the Holy Grail, saving damsels in distress, and drinking with the other knights are fun things to do. Therefore, it is not very surprising that in recent years the kingdom of King Arthur has experienced an unprecedented increase in the number of knights. There are so many knights now, that it is very rare that every Knight of the Round Table can come at the same time to Camelot and sit around the round table; usually only a small group of the knights isthere, while the rest are busy doing heroic deeds around the country.</p>
<p>Knights can easily get over-excited during discussions-especially after a couple of drinks. After some unfortunate accidents, King Arthur asked the famous wizard Merlin to make sure that in the future no fights break out between the knights. After studying the problem carefully, Merlin realized that the fights can only be prevented if the knights are seated according to the following two rules:</p>
<ol>
<li>The knights should be seated such that two knights who hate each other should not be neighbors at the table. (Merlin has a list that says who hates whom.) The knights are sitting around a roundtable, thus every knight has exactly two neighbors.</li>
<li>An odd number of knights should sit around the table. This ensures that if the knights cannot agree on something, then they can settle the issue by voting. (If the number of knights is even, then itcan happen that â€œyesâ€ and â€œnoâ€ have the same number of votes, and the argument goes on.)<a id="more"></a>
</li>
</ol>
<p>Merlin will let the knights sit down only if these two rules are satisfied, otherwise he cancels the meeting. (If only one knight shows up, then the meeting is canceled as well, as one person cannot sit around a table.) Merlin realized that this means that there can be knights who cannot be part of any seating arrangements that respect these rules, and these knights will never be able to sit at the Round Table (one such case is if a knight hates every other knight, but there are many other possible reasons). If a knight cannot sit at the Round Table, then he cannot be a member of the Knights of the Round Table and must be expelled from the order. These knights have to be transferred to a less-prestigious order, such as the Knights of the Square Table, the Knights of the Octagonal Table, or the Knights of the Banana-Shaped Table. To help Merlin, you have to write a program that will determine the number of knights that must be expelled. </p>
<h2 id="æ ¼å¼"><a href="#æ ¼å¼" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼"><a href="#è¾“å…¥æ ¼å¼" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>The input contains several blocks of test cases. Each case begins with a line containing two integers 1 â‰¤ n â‰¤ 1000 and 1 â‰¤ m â‰¤ 1000000 . The number n is the number of knights. The next m lines describe which knight hates which knight. Each of these m lines contains two integers k1 and k2 , which means that knight number k1 and knight number k2 hate each other (the numbers k1 and k2 are between 1 and n ). </p>
<p>The input is terminated by a block with n = m = 0 . </p>
<h2 id="è¾“å‡ºæ ¼å¼"><a href="#è¾“å‡ºæ ¼å¼" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>For each test case you have to output a single integer on a separate line: the number of knights that have to be expelled. </p>
<h2 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥"><a href="#æ ·ä¾‹è¾“å…¥" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>5 5<br>1 4<br>1 5<br>2 5<br>3 4<br>4 5<br>0 0</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º"><a href="#æ ·ä¾‹è¾“å‡º" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>2</p>
</blockquote>
<h2 id="æç¤º"><a href="#æç¤º" class="headerlink" title="æç¤º"></a>æç¤º</h2><p>Huge input file, â€˜scanfâ€™ recommended to avoid TLE. </p>
<h2 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>WAäº†Næ¬¡åå‘ç°åŸæ¥ä¸€ä¸ªè¾“å…¥é‡Œæœ‰å¤šç»„æ•°æ®ï¼ŒåˆWAäº†Næ¬¡åå‘ç°å¿˜è®°åˆå§‹åŒ–è¿é€šåˆ†é‡çš„æ•°ç»„äº†ã€‚æœç„¶å¤–è¯­ä¸å¥½ä¸èƒ½åˆ·POJçš„é¢˜ã€‚<br>é¢˜æ„æ˜¯ï¼š</p>
<blockquote>
<p>æœ‰Nä¸ªéª‘å£«å›´ååœ¨ä¸€ä¸ªåœ†æ¡Œæ—å¼€ä¼šï¼Œç»™å‡ºæŸäº›éª‘å£«ä¹‹é—´çš„ä»‡æ¨å…³ç³»ã€‚ä¸€æ¬¡ä¼šè®®èƒ½å¤Ÿé¡ºåˆ©ä¸¾è¡Œï¼Œè¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š<br>1ï¼šä»»æ„ç›¸äº’æ†æ¨çš„ä¸¤ä¸ªéª‘å£«ä¸èƒ½ç›¸é‚»<br>2ï¼šå¼€ä¼šäººæ•°ä¸ºå¤§äº2çš„å¥‡æ•°<br>è‹¥æŸä¸ªéª‘å£«<strong>ä»»ä½•ä¼šè®®</strong>éƒ½ä¸èƒ½å‚åŠ ï¼Œé‚£ä¹ˆå°±å¿…é¡»å°†ä»–è¸¢å‡ºï¼Œé—®æœ€å°‘éœ€è¦è¸¢å‡ºå¤šå°‘ä¸ªéª‘å£«ï¼Ÿ</p>
</blockquote>
<p>å…ˆæ±‚ä»‡æ¨å…³ç³»çš„è¡¥å›¾ï¼Œè¡¥å›¾ä¸­è¾¹çš„å«ä¹‰å°±æ˜¯ä¸¤ä¸ªéª‘å£«èƒ½ç›¸é‚»ï¼Œ<br>é‚£ä¹ˆè¦å¼€åœ†æ¡Œä¼šå°±æ˜¯æ‰¾å›¾ä¸­çš„n&gt;=3çš„å¥‡åœˆï¼Œ<br>å¥‡åœˆä¸€å®šå½¢æˆäº†åŒè¿é€šåˆ†é‡ï¼Œäºæ˜¯tarjanæ‰¾å‡ºæ‰€æœ‰åˆ†é‡ï¼Œ<br>å¯¹äºæ¯ä¸€ä¸ªåˆ†é‡ï¼Œå¦‚æœn&gt;=3ä¸”ä¸èƒ½äºŒåˆ†æŸ“è‰²ï¼Œå°±æ ‡è®°è¿™ä¸ªåˆ†é‡å†…çš„æ‰€æœ‰ç‚¹ã€‚<br>æœ€åç»Ÿè®¡æ²¡æœ‰è¢«æ ‡è®°çš„ç‚¹æ•°ã€‚</p>
<p>æ³¨æ„ï¼š</p>
<ol>
<li>ä¸€ä¸ªç‚¹å¯èƒ½å¤„åœ¨å¤šä¸ªåˆ†é‡ä¸­ï¼Œæ‰¾åˆ°ç«‹å³å¤„ç†ã€‚</li>
<li>å‰²ç‚¹å¤„ç†åä¸è¦é€€æ ˆã€‚</li>
<li>åˆå§‹åŒ–ï¼</li>
</ol>
<dir style="text-align:right"><a href="/2016/08/16/POJ-P2942/test.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>test.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//uses math;</span></div><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    n,m,cc,i,f,t,tim,ans:int;</div><div class="line">    g:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1010</span>,<span class="number">0</span>..<span class="number">1010</span>] <span class="keyword">of</span> boolean;</div><div class="line">    ins,kick:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1010</span>] <span class="keyword">of</span> boolean;</div><div class="line">    dfn,low,scc,s,col:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1010</span>] <span class="keyword">of</span> int;</div><div class="line">    </div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">min</span><span class="params">(a,b:int)</span>:</span>int;</div><div class="line"><span class="keyword">begin</span> <span class="keyword">if</span> a&lt;b <span class="keyword">then</span> min:=a <span class="keyword">else</span> min:=b <span class="keyword">end</span>;</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">paint</span><span class="params">(v,c:int)</span>:</span>boolean;</div><div class="line"><span class="keyword">var</span> i:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    col[v]:=c;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">        <span class="keyword">if</span> g[v,i] <span class="keyword">and</span> (scc[i]=cc) <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            <span class="keyword">if</span> (col[i]=c) <span class="keyword">then</span> <span class="keyword">exit</span>(false);</div><div class="line">            <span class="keyword">if</span> (col[i]=<span class="number">0</span>) <span class="keyword">and</span> <span class="keyword">not</span> paint(i,-c) <span class="keyword">then</span> <span class="keyword">exit</span>(false);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    paint:=true;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">solve</span><span class="params">(v,i:int)</span>;</span></div><div class="line"><span class="keyword">var</span> </div><div class="line">    tmp:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1010</span>] <span class="keyword">of</span> int;</div><div class="line">    cnt,j:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    inc(cc);cnt:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span> s[t+<span class="number">1</span>]&lt;&gt;i <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        ins[s[t]]:=false;</div><div class="line">        inc(cnt);tmp[cnt]:=s[t];</div><div class="line">        scc[s[t]]:=cc;</div><div class="line">        dec(t);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    inc(cnt);tmp[cnt]:=v;</div><div class="line">    fillchar(col,sizeof(col),<span class="number">0</span>);</div><div class="line">    <span class="keyword">if</span> (cnt&gt;=<span class="number">3</span>) <span class="keyword">and</span> <span class="keyword">not</span> paint(v,<span class="number">1</span>) <span class="keyword">then</span></div><div class="line">        <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> cnt <span class="keyword">do</span> kick[tmp[j]]:=false;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">tarjan</span><span class="params">(v,p:int)</span>;</span></div><div class="line"><span class="keyword">var</span> i:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    inc(tim);dfn[v]:=tim;low[v]:=tim;</div><div class="line">    ins[v]:=true;inc(t);s[t]:=v;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">        <span class="keyword">if</span> g[v,i] <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            <span class="keyword">if</span> i=p <span class="keyword">then</span> continue;</div><div class="line">            <span class="keyword">if</span> dfn[i]=<span class="number">0</span> <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">                tarjan(i,v);</div><div class="line">                low[v]:=min(low[v],low[i]);</div><div class="line">                <span class="keyword">if</span> low[i]&gt;=dfn[v] <span class="keyword">then</span> solve(v,i);</div><div class="line">            <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">if</span> ins[i] <span class="keyword">then</span></div><div class="line">                low[v]:=min(low[v],dfn[i]);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">while</span> true <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(n,m);</div><div class="line">        <span class="keyword">if</span> (n=<span class="number">0</span>) <span class="keyword">and</span> (m=<span class="number">0</span>) <span class="keyword">then</span> break;</div><div class="line">        </div><div class="line">        fillchar(g,sizeof(g),true);</div><div class="line">        <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            <span class="keyword">read</span>(f,t);</div><div class="line">            g[f,t]:=false;g[t,f]:=false;</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">        <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> g[i,i]:=false;</div><div class="line"></div><div class="line">        fillchar(kick,sizeof(kick),true);</div><div class="line">        fillchar(dfn,sizeof(dfn),<span class="number">0</span>);</div><div class="line">        fillchar(scc,sizeof(scc),<span class="number">0</span>);</div><div class="line">        fillchar(ins,sizeof(ins),false);</div><div class="line">        cc:=<span class="number">0</span>;tim:=<span class="number">0</span>;t:=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">if</span> dfn[i]=<span class="number">0</span> <span class="keyword">then</span> tarjan(i,<span class="number">0</span>);</div><div class="line"></div><div class="line">        ans:=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">if</span> kick[i] <span class="keyword">then</span> inc(ans);</div><div class="line">        writeln(ans);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;æè¿°&quot;&gt;&lt;a href=&quot;#æè¿°&quot; class=&quot;headerlink&quot; title=&quot;æè¿°&quot;&gt;&lt;/a&gt;æè¿°&lt;/h2&gt;&lt;p&gt;Being a knight is a very attractive career: searching for the Holy Grail, saving damsels in distress, and drinking with the other knights are fun things to do. Therefore, it is not very surprising that in recent years the kingdom of King Arthur has experienced an unprecedented increase in the number of knights. There are so many knights now, that it is very rare that every Knight of the Round Table can come at the same time to Camelot and sit around the round table; usually only a small group of the knights isthere, while the rest are busy doing heroic deeds around the country.&lt;/p&gt;
&lt;p&gt;Knights can easily get over-excited during discussions-especially after a couple of drinks. After some unfortunate accidents, King Arthur asked the famous wizard Merlin to make sure that in the future no fights break out between the knights. After studying the problem carefully, Merlin realized that the fights can only be prevented if the knights are seated according to the following two rules:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;The knights should be seated such that two knights who hate each other should not be neighbors at the table. (Merlin has a list that says who hates whom.) The knights are sitting around a roundtable, thus every knight has exactly two neighbors.&lt;/li&gt;
&lt;li&gt;An odd number of knights should sit around the table. This ensures that if the knights cannot agree on something, then they can settle the issue by voting. (If the number of knights is even, then itcan happen that â€œyesâ€ and â€œnoâ€ have the same number of votes, and the argument goes on.)
    
    </summary>
    
      <category term="Problem Set" scheme="https://cothrax.github.io/categories/Problem-Set/"/>
    
    
      <category term="OI" scheme="https://cothrax.github.io/tags/OI/"/>
    
      <category term="å›¾è®º" scheme="https://cothrax.github.io/tags/%E5%9B%BE%E8%AE%BA/"/>
    
      <category term="åŒè¿é€šåˆ†é‡" scheme="https://cothrax.github.io/tags/%E5%8F%8C%E8%BF%9E%E9%80%9A%E5%88%86%E9%87%8F/"/>
    
      <category term="å‰²ç‚¹" scheme="https://cothrax.github.io/tags/%E5%89%B2%E7%82%B9/"/>
    
      <category term="äºŒåˆ†å›¾" scheme="https://cothrax.github.io/tags/%E4%BA%8C%E5%88%86%E5%9B%BE/"/>
    
      <category term="è¡¥å›¾" scheme="https://cothrax.github.io/tags/%E8%A1%A5%E5%9B%BE/"/>
    
  </entry>
  
  <entry>
    <title>2048æºç è‡ªå®šä¹‰</title>
    <link href="https://cothrax.github.io/2016/08/16/2048%E6%BA%90%E7%A0%81%E8%87%AA%E5%AE%9A%E4%B9%89/"/>
    <id>https://cothrax.github.io/2016/08/16/2048æºç è‡ªå®šä¹‰/</id>
    <published>2016-08-16T00:35:51.000Z</published>
    <updated>2016-08-16T03:00:23.803Z</updated>
    
    <content type="html"><![CDATA[<p>çœ‹åˆ°å¥½å¤šç¥çŠ‡çš„Blogé‡Œéƒ½æœ‰2048ï¼Œäºæ˜¯è‡ªå·±æ‰¾æºç ç©ä¸€ç©ã€‚<br>2048 jsç‰ˆçš„æºç è¢«æ‰˜ç®¡åœ¨GitHubä¸Šï¼š<a href="https://github.com/gabrielecirulli/2048" target="_blank" rel="external">gabrielecirulli/2048</a>ã€‚<br>è¯´æ¥è¯é•¿ï¼ŒJavaScriptæ˜¯æˆ‘çš„åˆæ‹ï¼Œå››å¹´å‰åœ¨Codeacademyæ¥è§¦äº†å‰ç«¯ç¼–ç¨‹ï¼Œè‡ªæ­¤èµ°ä¸Šäº†ä¸€æ¡ä¸å½’è·¯ã€‚ç„¶è€Œæ‰“å¼€æºç åŒ…ï¼Œçœ‹åˆ°ä¸€å¨JSè¿˜æ˜¯ä¸€è„¸æ‡µã€‚ã€‚ã€‚æ—©å¿˜å¹²å‡€å•¦ã€‚</p>
<h2 id="å¤§æ¦‚çœ‹ä¸€ä¸‹"><a href="#å¤§æ¦‚çœ‹ä¸€ä¸‹" class="headerlink" title="å¤§æ¦‚çœ‹ä¸€ä¸‹"></a>å¤§æ¦‚çœ‹ä¸€ä¸‹</h2><ol>
<li>keyboard_input_manager.jsï¼šinputäº‹ä»¶</li>
<li>html_actuator.jsï¼šå¤„ç†äº¤äº’ç•Œé¢ï¼Œç”¨domæ›´æ–°html</li>
<li>grid.jsï¼šæ ¼å­</li>
<li>tile.jsï¼šæ»‘å—å¯¹è±¡</li>
<li>local_storage_manager.jsï¼šæœ¬åœ°ç¼“å­˜</li>
<li>game_manager.jsï¼šä¸»ç¨‹åº</li>
<li>application.jsï¼šä¸çŸ¥é“æ˜¯ä»€ä¹ˆ</li>
<li>*_polyfill.jsï¼šå„ç§polyfill<a id="more"></a>
</li>
</ol>
<h2 id="è‡ªå®šä¹‰å›¾ç‰‡"><a href="#è‡ªå®šä¹‰å›¾ç‰‡" class="headerlink" title="è‡ªå®šä¹‰å›¾ç‰‡"></a>è‡ªå®šä¹‰å›¾ç‰‡</h2><h3 id="æ”¹CSS"><a href="#æ”¹CSS" class="headerlink" title="æ”¹CSS"></a>æ”¹CSS</h3><p>styleé‡Œçš„cssä½¿ç”¨scssç”Ÿæˆçš„ï¼Œä½†æˆ‘æ²¡å­¦è¿‡ï¼Œäºæ˜¯ç›´æ¥æ”¹main.css<br>æ‰¾åˆ°.tileç±»<br>ç›´æ¥ç»™å¯¹åº”çš„classåŠ background<br>å¦‚.tile-2æ˜¯æ–¹å—2çš„styleï¼ŒåŠ ä¸Šï¼šï¼ˆ<code>img/</code>åœ¨<code>style/</code>ä¸‹ï¼Œåœ¨é‡Œé¢æ”¾å›¾ç‰‡ï¼‰<br><figure class="highlight"><figcaption><span>main.css</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">background-image: url(./img/2.png);</div><div class="line">background-size:contain;</div></pre></td></tr></table></figure></p>
<p>åŒç†åŠ .tile-4, .tile-8ç­‰<br>ä½†è¿™æ ·ä¼šå‡ºç°é—®é¢˜</p>
<ol>
<li>ä¸€ä¸ªä¸ªæ”¹å¥½çƒ¦</li>
<li>å¤§äº2048æ—¶åªæœ‰ä¸€ä¸ª.tile-superç±»ï¼Œæ²¡æ³•æ”¹</li>
</ol>
<h3 id="æ”¹JS"><a href="#æ”¹JS" class="headerlink" title="æ”¹JS"></a>æ”¹JS</h3><p>åœ¨html_actuator.jsä¸‹ï¼Œå¯ä»¥æ‰¾åˆ°<code>HTMLActuator.prototype.addTile</code>æ–¹æ³•ï¼Œå¯ä»¥çœ‹åˆ°å…¶ä¸­æ˜¯é€šè¿‡domæ¥åˆ›å»ºdivå…ƒç´ çš„ï¼Œæ‰¾åˆ°ï¼š<br><figure class="highlight js"><figcaption><span>html_actuator.js</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">inner.textContent = tile.value;</div></pre></td></tr></table></figure></p>
<p>æ»‘å—ä¸Šçš„æ–‡å­—è¢«è®¾ç½®ä¸ºtile.valueï¼Œå°±æ˜¯æ»‘å—çš„æ•°å€¼ã€‚<br>æŠŠå®ƒæ³¨æ‰ï¼Œç„¶åç»™innerè¯¥css<br><figure class="highlight js"><figcaption><span>html_actuator.js</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//inner.textContent = tile.value;</span></div><div class="line">inner.style.backgroundSize = <span class="string">"contain"</span>;</div><div class="line">inner.style.backgroundImage = <span class="string">"url(./style/img/"</span>+tile.value+<span class="string">".jpg)"</span>;</div></pre></td></tr></table></figure></p>
<p>è¿™æ ·valueå¯¹åº”çš„å›¾ç‰‡å°±ä¼šè¢«è®¾ç½®æˆæ»‘å—çš„èƒŒæ™¯ï¼Œç„¶ååœ¨img/ä¸‹æ”¾å¥½$2^k$.jpgï¼Œæˆ‘å€Ÿç”¨ä¸€ä¸‹é»„å­¦é•¿çš„å›¾åŒ…ï¼Œå°±å˜æˆäº†è¿™æ ·ï¼š<br><img src="/2016/08/16/2048æºç è‡ªå®šä¹‰/Screenshot.jpg" alt="Screenshot.jpg" title=""></p>
<p>ä¼šå‘ç°å›¾ç‰‡å¹³é“ºè¦†ç›–äº†ä¸€ä¸ªæ ¼å­ï¼Œè¿™æ˜¯å› ä¸ºå›¾ç‰‡ä¸æ˜¯æ­£æ–¹å½¢çš„ï¼Œpså‰ªä¸€ä¸‹å°±å¯ä»¥äº†ã€‚<br>å¦å¤–æ³¨æ„å›¾ç‰‡æ˜¯jpgè¿˜æ˜¯pngã€‚</p>
<h2 id="åœ¨Hexoä¸­éƒ¨ç½²2048"><a href="#åœ¨Hexoä¸­éƒ¨ç½²2048" class="headerlink" title="åœ¨Hexoä¸­éƒ¨ç½²2048"></a>åœ¨Hexoä¸­éƒ¨ç½²2048</h2><p>æ–°å»ºé¡µé¢<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new page <span class="string">"2048"</span></div></pre></td></tr></table></figure></p>
<p>æŠŠæºç æ‹·åˆ°2048/ä¸‹ï¼Œåœ¨2048/index.mdä¸­æ’å…¥iframeï¼ˆæˆ‘æŠŠåŸæ¥çš„index.htmlé‡å‘½åä¸ºframe.htmlé¿å…å†²çªï¼‰<br><figure class="highlight html"><figcaption><span>index.md</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">"./frame.html"</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"1300"</span> <span class="attr">seamless</span>=<span class="string">"seamless"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>tagæ’ä»¶ä¹Ÿæä¾›äº†iframeæ”¯æŒ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;% iframe ./frame.html %&#125;</div></pre></td></tr></table></figure></p>
<p>æˆ‘çš„two048ï¼š<a href="https://cothrax.github.io/2048">https://cothrax.github.io/2048</a></p>
<h2 id="ä¿®æ”¹game-manager-js"><a href="#ä¿®æ”¹game-manager-js" class="headerlink" title="ä¿®æ”¹game_manager.js"></a>ä¿®æ”¹game_manager.js</h2><blockquote>
<p>ç•™ä¸ªå‘</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;çœ‹åˆ°å¥½å¤šç¥çŠ‡çš„Blogé‡Œéƒ½æœ‰2048ï¼Œäºæ˜¯è‡ªå·±æ‰¾æºç ç©ä¸€ç©ã€‚&lt;br&gt;2048 jsç‰ˆçš„æºç è¢«æ‰˜ç®¡åœ¨GitHubä¸Šï¼š&lt;a href=&quot;https://github.com/gabrielecirulli/2048&quot;&gt;gabrielecirulli/2048&lt;/a&gt;ã€‚&lt;br&gt;è¯´æ¥è¯é•¿ï¼ŒJavaScriptæ˜¯æˆ‘çš„åˆæ‹ï¼Œå››å¹´å‰åœ¨Codeacademyæ¥è§¦äº†å‰ç«¯ç¼–ç¨‹ï¼Œè‡ªæ­¤èµ°ä¸Šäº†ä¸€æ¡ä¸å½’è·¯ã€‚ç„¶è€Œæ‰“å¼€æºç åŒ…ï¼Œçœ‹åˆ°ä¸€å¨JSè¿˜æ˜¯ä¸€è„¸æ‡µã€‚ã€‚ã€‚æ—©å¿˜å¹²å‡€å•¦ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å¤§æ¦‚çœ‹ä¸€ä¸‹&quot;&gt;&lt;a href=&quot;#å¤§æ¦‚çœ‹ä¸€ä¸‹&quot; class=&quot;headerlink&quot; title=&quot;å¤§æ¦‚çœ‹ä¸€ä¸‹&quot;&gt;&lt;/a&gt;å¤§æ¦‚çœ‹ä¸€ä¸‹&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;keyboard_input_manager.jsï¼šinputäº‹ä»¶&lt;/li&gt;
&lt;li&gt;html_actuator.jsï¼šå¤„ç†äº¤äº’ç•Œé¢ï¼Œç”¨domæ›´æ–°html&lt;/li&gt;
&lt;li&gt;grid.jsï¼šæ ¼å­&lt;/li&gt;
&lt;li&gt;tile.jsï¼šæ»‘å—å¯¹è±¡&lt;/li&gt;
&lt;li&gt;local_storage_manager.jsï¼šæœ¬åœ°ç¼“å­˜&lt;/li&gt;
&lt;li&gt;game_manager.jsï¼šä¸»ç¨‹åº&lt;/li&gt;
&lt;li&gt;application.jsï¼šä¸çŸ¥é“æ˜¯ä»€ä¹ˆ&lt;/li&gt;
&lt;li&gt;*_polyfill.jsï¼šå„ç§polyfill
    
    </summary>
    
      <category term="Tinkering Note" scheme="https://cothrax.github.io/categories/Tinkering-Note/"/>
    
    
      <category term="JavaScript" scheme="https://cothrax.github.io/tags/JavaScript/"/>
    
      <category term="CSS" scheme="https://cothrax.github.io/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>[Vijos] P1124 å­—ä¸²å˜æ¢</title>
    <link href="https://cothrax.github.io/2016/08/15/Vijos-P1124/"/>
    <id>https://cothrax.github.io/2016/08/15/Vijos-P1124/</id>
    <published>2016-08-15T10:17:53.000Z</published>
    <updated>2016-08-15T10:32:59.015Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æè¿°"><a href="#æè¿°" class="headerlink" title="æè¿°"></a>æè¿°</h2><p>å·²çŸ¥æœ‰ä¸¤ä¸ªå­—ä¸² A\$, B\$ åŠä¸€ç»„å­—ä¸²å˜æ¢çš„è§„åˆ™ï¼ˆè‡³å¤š6ä¸ªè§„åˆ™ï¼‰:<br>A1\$ -&gt; B1\$<br>A2\$ -&gt; B2\$<br>è§„åˆ™çš„å«ä¹‰ä¸ºï¼šåœ¨ Aï¼„ä¸­çš„å­ä¸² A1\$ å¯ä»¥å˜æ¢ä¸º B1\$ã€A2\$ å¯ä»¥å˜æ¢ä¸º B2\$ â€¦ã€‚<br>ä¾‹å¦‚ï¼šA\$ï¼â€™abcdâ€™ã€€B\$ï¼â€™xyzâ€™<br>å˜æ¢è§„åˆ™ä¸ºï¼š<br>â€˜abcâ€™-&gt;â€˜xuâ€™ã€€â€˜udâ€™-&gt;â€˜yâ€™ã€€â€˜yâ€™-&gt;â€˜yzâ€™<br>åˆ™æ­¤æ—¶ï¼ŒA\$ å¯ä»¥ç»è¿‡ä¸€ç³»åˆ—çš„å˜æ¢å˜ä¸º B\$ï¼Œå…¶å˜æ¢çš„è¿‡ç¨‹ä¸ºï¼š<br>â€˜abcdâ€™-&gt;â€˜xudâ€™-&gt;â€˜xyâ€™-&gt;â€˜xyzâ€™<br>å…±è¿›è¡Œäº†ä¸‰æ¬¡å˜æ¢ï¼Œä½¿å¾— A\$ å˜æ¢ä¸ºB\$ã€‚</p>
<h2 id="æ ¼å¼"><a href="#æ ¼å¼" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼"><a href="#è¾“å…¥æ ¼å¼" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬ä¸€è¡Œä¸ºä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œç¬¬äºŒè¡Œè‡³æ–‡ä»¶å°¾ä¸ºå˜æ¢è§„åˆ™<br>A\$ B\$<br>A1\$ B1\$ \<br>A2\$ B2\$ |-&gt; å˜æ¢è§„åˆ™<br>â€¦ â€¦ /<br>æ‰€æœ‰å­—ç¬¦ä¸²é•¿åº¦çš„ä¸Šé™ä¸º 20ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼"><a href="#è¾“å‡ºæ ¼å¼" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>è‹¥åœ¨ 10 æ­¥ï¼ˆåŒ…å« 10æ­¥ï¼‰ä»¥å†…èƒ½å°† A\$ å˜æ¢ä¸º B\$ ï¼Œåˆ™è¾“å‡ºæœ€å°‘çš„å˜æ¢æ­¥æ•°ï¼›å¦åˆ™è¾“å‡ºâ€NO ANSWER!â€<br><a id="more"></a></p>
<h2 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥"><a href="#æ ·ä¾‹è¾“å…¥" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>abcd xyz<br>abc xu<br>ud y<br>y yz</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º"><a href="#æ ·ä¾‹è¾“å‡º" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>3</p>
</blockquote>
<h2 id="æç¤ºâ€‹"><a href="#æç¤ºâ€‹" class="headerlink" title="æç¤ºâ€‹"></a>æç¤ºâ€‹</h2><p>æ¯ä¸ªæµ‹è¯•ç‚¹1s<br>noip2002æé«˜ç»„ç¬¬äºŒé¢˜</p>
<h2 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>æš´åŠ›BFS+Hash<br>æ³¨æ„ï¼šä¸€ä¸ªå­—ä¸²ä¸­å¯èƒ½å­˜åœ¨å¯¹ä¸€ä¸ªå˜åŒ–çš„å¤šä¸ªåŒ¹é…ï¼Œå¦‚â€aaaâ€å’Œè§„åˆ™â€a-&gt;pâ€å°±æœ‰ä¸‰ç§æƒ…å†µ<br>è¿˜æœ‰hashè¡¨æ¯”è¾ƒå¤§ï¼Œfillè€—æ—¶ï¼Œäºæ˜¯çœæ‰å°±å¥½ã€‚</p>
<h3 id="æ–¹æ³•ä¸€ï¼šå•å‘BFS-Hash"><a href="#æ–¹æ³•ä¸€ï¼šå•å‘BFS-Hash" class="headerlink" title="æ–¹æ³•ä¸€ï¼šå•å‘BFS+Hash"></a>æ–¹æ³•ä¸€ï¼šå•å‘BFS+Hash</h3><dir style="text-align:right"><a href="/2016/08/15/Vijos-P1124/pp1124.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>pp1124.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">const</span> seed=<span class="number">131</span>;p=<span class="number">100000007</span>;</div><div class="line"><span class="keyword">type</span> state=<span class="keyword">record</span> s:<span class="keyword">string</span>;i:integer <span class="keyword">end</span>;</div><div class="line"><span class="keyword">var</span></div><div class="line">    ht:<span class="keyword">array</span>[<span class="number">0</span>..p] <span class="keyword">of</span> boolean;</div><div class="line">    q:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">10010</span>] <span class="keyword">of</span> state;</div><div class="line">    a:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1</span>,<span class="number">0</span>..<span class="number">7</span>] <span class="keyword">of</span> <span class="keyword">string</span>;</div><div class="line">    n,p0,h,t:integer;s:<span class="keyword">string</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">hash</span><span class="params">(s:<span class="keyword">string</span>)</span>:</span>dword;</div><div class="line"><span class="keyword">var</span> i:integer;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    hash:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> length(s) <span class="keyword">do</span></div><div class="line">        hash:=(hash*seed+ord(s[i])) <span class="keyword">and</span> $FFFFFFF;</div><div class="line">    hash:=hash <span class="keyword">mod</span> p;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="comment">//startå¼€å§‹ï¼Œtåœ¨pä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getpos</span><span class="params">(t,p:<span class="keyword">string</span>;start:integer)</span>:</span>integer;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    getpos:=pos(t,copy(p,start,length(p)-start+<span class="number">1</span>));</div><div class="line">    <span class="keyword">if</span> getpos&lt;&gt;<span class="number">0</span> <span class="keyword">then</span> inc(getpos,start-<span class="number">1</span>);</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">bfs</span><span class="params">()</span>;</span></div><div class="line"><span class="keyword">var</span> i,p0:integer;cstr,nstr:<span class="keyword">string</span>;ha:dword;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">if</span> a[<span class="number">0</span>,<span class="number">0</span>]=a[<span class="number">1</span>,<span class="number">0</span>] <span class="keyword">then</span> <span class="keyword">begin</span> <span class="keyword">write</span>(<span class="number">0</span>);halt <span class="keyword">end</span>;</div><div class="line">    h:=<span class="number">1</span>;t:=<span class="number">2</span>;</div><div class="line">    q[h].s:=a[<span class="number">0</span>,<span class="number">0</span>];q[h].i:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span> h&lt;&gt;t <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        cstr:=q[h].s;</div><div class="line">        <span class="keyword">if</span> q[h].i=<span class="number">10</span> <span class="keyword">then</span> <span class="keyword">exit</span>;</div><div class="line">        <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            p0:=getpos(a[<span class="number">0</span>,i],cstr,<span class="number">1</span>);</div><div class="line">            <span class="keyword">while</span> p0&lt;&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">                nstr:=cstr;</div><div class="line">                delete(nstr,p0,length(a[<span class="number">0</span>,i]));</div><div class="line">                insert(a[<span class="number">1</span>,i],nstr,p0);</div><div class="line">                </div><div class="line">                ha:=hash(nstr);</div><div class="line">                <span class="keyword">if</span> <span class="keyword">not</span> ht[ha] <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">                    ht[ha]:=true;</div><div class="line">                    <span class="keyword">if</span> nstr=a[<span class="number">1</span>,<span class="number">0</span>] <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">                        <span class="keyword">write</span>(q[h].i+<span class="number">1</span>);</div><div class="line">                        halt;</div><div class="line">                    <span class="keyword">end</span>;</div><div class="line">                    q[t].s:=nstr;q[t].i:=q[h].i+<span class="number">1</span>;</div><div class="line">                    inc(t);<span class="keyword">if</span> t&gt;<span class="number">10010</span> <span class="keyword">then</span> t:=<span class="number">0</span>;</div><div class="line">                <span class="keyword">end</span>;</div><div class="line">                p0:=getpos(a[<span class="number">0</span>,i],cstr,p0+<span class="number">1</span>);</div><div class="line">            <span class="keyword">end</span>;</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">        inc(h);<span class="keyword">if</span> h&gt;<span class="number">10010</span> <span class="keyword">then</span> h:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span> <span class="comment">&#123;Main&#125;</span></div><div class="line">    n:=-<span class="number">1</span>;</div><div class="line">    <span class="keyword">while</span> <span class="keyword">not</span> eof <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        inc(n);</div><div class="line">        readln(s);</div><div class="line">        p0:=pos(<span class="string">' '</span>,s);</div><div class="line">        a[<span class="number">0</span>,n]:=copy(s,<span class="number">1</span>,p0-<span class="number">1</span>);</div><div class="line">        a[<span class="number">1</span>,n]:=copy(s,p0+<span class="number">1</span>,length(s)-p0);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"></div><div class="line">    <span class="comment">//fillchar(ht,sizeof(ht),false);</span></div><div class="line">    bfs();</div><div class="line">    <span class="keyword">write</span>(<span class="string">'NO ANSWER!'</span>);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h3 id="æ–¹æ³•äºŒï¼šåŒå‘BFS-Hash"><a href="#æ–¹æ³•äºŒï¼šåŒå‘BFS-Hash" class="headerlink" title="æ–¹æ³•äºŒï¼šåŒå‘BFS+Hash"></a>æ–¹æ³•äºŒï¼šåŒå‘BFS+Hash</h3><p>ç›´æ¥ç”¨hashè¡¨å­˜å¾—åˆ°è¯¥å­—ä¸²çš„æœ€å°æ­¥éª¤ï¼Œç„¶åå‘ç°åŒ¹é…å¯ä»¥ç›´æ¥è¾“å‡º</p>
<dir style="text-align:right"><a href="/2016/08/15/Vijos-P1124/p1124.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>p1124.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">const</span> seed=<span class="number">131</span>;p=<span class="number">10000019</span>;</div><div class="line"><span class="keyword">type</span> state=<span class="keyword">record</span> s:ansistring;i:integer <span class="keyword">end</span>;</div><div class="line"><span class="keyword">var</span></div><div class="line">    <span class="comment">//0ï¼šæ­£å‘ï¼›1ï¼šé€†å‘</span></div><div class="line">    ht:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1</span>,<span class="number">0</span>..p] <span class="keyword">of</span> integer;</div><div class="line">    q:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1</span>,<span class="number">0</span>..<span class="number">10010</span>] <span class="keyword">of</span> state;</div><div class="line">    a:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1</span>,<span class="number">0</span>..<span class="number">7</span>] <span class="keyword">of</span> ansistring;</div><div class="line">    n,p0:integer;s:ansistring;</div><div class="line">    h,t:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">1</span>] <span class="keyword">of</span> integer;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">hash</span><span class="params">(s:ansistring)</span>:</span>dword;</div><div class="line"><span class="keyword">var</span> i:integer;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    hash:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> length(s) <span class="keyword">do</span></div><div class="line">        hash:=(hash*seed+ord(s[i])) <span class="keyword">and</span> $FFFFFFF;</div><div class="line">    hash:=hash <span class="keyword">mod</span> p;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getpos</span><span class="params">(t,p:<span class="keyword">string</span>;start:integer)</span>:</span>integer;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    getpos:=pos(t,copy(p,start,length(p)-start+<span class="number">1</span>));</div><div class="line">    <span class="keyword">if</span> getpos&lt;&gt;<span class="number">0</span> <span class="keyword">then</span> inc(getpos,start-<span class="number">1</span>);</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">expand</span><span class="params">(x:integer)</span>;</span></div><div class="line"><span class="keyword">var</span> i,p0:integer;cstr,nstr:ansistring;ha:dword;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    cstr:=q[x,h[x]].s;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        p0:=getpos(a[x,i],cstr,<span class="number">1</span>);</div><div class="line">        <span class="keyword">while</span> p0&lt;&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            nstr:=cstr;</div><div class="line">            delete(nstr,p0,length(a[x,i]));</div><div class="line">            insert(a[<span class="number">1</span>-x,i],nstr,p0);</div><div class="line"></div><div class="line">            ha:=hash(nstr);</div><div class="line">            <span class="keyword">if</span> ht[<span class="number">1</span>-x,ha]&lt;&gt;<span class="number">0</span> <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">                <span class="keyword">write</span>(ht[<span class="number">1</span>-x,ha]+q[x,h[x]].i+<span class="number">1</span>);</div><div class="line">                halt;</div><div class="line">            <span class="keyword">end</span>;</div><div class="line">            <span class="keyword">if</span> ht[x,ha]=<span class="number">0</span> <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">                q[x,t[x]].s:=nstr;q[x,t[x]].i:=q[x,h[x]].i+<span class="number">1</span>;</div><div class="line">                ht[x,ha]:=q[x,t[x]].i;</div><div class="line">                inc(t[x]);<span class="keyword">if</span> t[x]&gt;<span class="number">10010</span> <span class="keyword">then</span> t[x]:=<span class="number">0</span>;</div><div class="line">            <span class="keyword">end</span>;</div><div class="line">            p0:=getpos(a[x,i],cstr,p0+<span class="number">1</span>);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    inc(h[x]);<span class="keyword">if</span> h[x]&gt;<span class="number">10010</span> <span class="keyword">then</span> h[x]:=<span class="number">0</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">bfs</span><span class="params">()</span>;</span></div><div class="line"><span class="keyword">var</span> i:integer;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">for</span> i:=<span class="number">0</span> <span class="keyword">to</span> <span class="number">1</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        h[i]:=<span class="number">1</span>;t[i]:=<span class="number">2</span>;</div><div class="line">        q[i,<span class="number">1</span>].s:=a[i,<span class="number">0</span>];q[i,<span class="number">1</span>].i:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">repeat</span></div><div class="line">        <span class="keyword">for</span> i:=<span class="number">0</span> <span class="keyword">to</span> <span class="number">1</span> <span class="keyword">do</span></div><div class="line">            <span class="keyword">if</span> (h[i]&lt;&gt;t[i]) <span class="keyword">and</span> (q[i,t[i]].i&lt;=<span class="number">10</span>) <span class="keyword">then</span> expand(i);</div><div class="line">    <span class="keyword">until</span> ((h[<span class="number">0</span>]=t[<span class="number">0</span>]) <span class="keyword">and</span> (h[<span class="number">1</span>]=t[<span class="number">1</span>])) <span class="keyword">or</span> </div><div class="line">          (q[<span class="number">0</span>,h[<span class="number">0</span>]].i+q[<span class="number">1</span>,h[<span class="number">1</span>]].i&gt;<span class="number">10</span>);</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span> <span class="comment">&#123;Main&#125;</span></div><div class="line">    n:=-<span class="number">1</span>;</div><div class="line">    <span class="keyword">while</span> <span class="keyword">not</span> eof <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        inc(n);</div><div class="line">        readln(s);</div><div class="line">        p0:=pos(<span class="string">' '</span>,s);</div><div class="line">        a[<span class="number">0</span>,n]:=copy(s,<span class="number">1</span>,p0-<span class="number">1</span>);</div><div class="line">        a[<span class="number">1</span>,n]:=copy(s,p0+<span class="number">1</span>,length(s)-p0);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="comment">//fillchar(ht,sizeof(ht),0);</span></div><div class="line">    bfs();</div><div class="line">    <span class="keyword">write</span>(<span class="string">'NO ANSWER!'</span>);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;æè¿°&quot;&gt;&lt;a href=&quot;#æè¿°&quot; class=&quot;headerlink&quot; title=&quot;æè¿°&quot;&gt;&lt;/a&gt;æè¿°&lt;/h2&gt;&lt;p&gt;å·²çŸ¥æœ‰ä¸¤ä¸ªå­—ä¸² A\$, B\$ åŠä¸€ç»„å­—ä¸²å˜æ¢çš„è§„åˆ™ï¼ˆè‡³å¤š6ä¸ªè§„åˆ™ï¼‰:&lt;br&gt;A1\$ -&amp;gt; B1\$&lt;br&gt;A2\$ -&amp;gt; B2\$&lt;br&gt;è§„åˆ™çš„å«ä¹‰ä¸ºï¼šåœ¨ Aï¼„ä¸­çš„å­ä¸² A1\$ å¯ä»¥å˜æ¢ä¸º B1\$ã€A2\$ å¯ä»¥å˜æ¢ä¸º B2\$ â€¦ã€‚&lt;br&gt;ä¾‹å¦‚ï¼šA\$ï¼â€™abcdâ€™ã€€B\$ï¼â€™xyzâ€™&lt;br&gt;å˜æ¢è§„åˆ™ä¸ºï¼š&lt;br&gt;â€˜abcâ€™-&amp;gt;â€˜xuâ€™ã€€â€˜udâ€™-&amp;gt;â€˜yâ€™ã€€â€˜yâ€™-&amp;gt;â€˜yzâ€™&lt;br&gt;åˆ™æ­¤æ—¶ï¼ŒA\$ å¯ä»¥ç»è¿‡ä¸€ç³»åˆ—çš„å˜æ¢å˜ä¸º B\$ï¼Œå…¶å˜æ¢çš„è¿‡ç¨‹ä¸ºï¼š&lt;br&gt;â€˜abcdâ€™-&amp;gt;â€˜xudâ€™-&amp;gt;â€˜xyâ€™-&amp;gt;â€˜xyzâ€™&lt;br&gt;å…±è¿›è¡Œäº†ä¸‰æ¬¡å˜æ¢ï¼Œä½¿å¾— A\$ å˜æ¢ä¸ºB\$ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ ¼å¼&quot;&gt;&lt;a href=&quot;#æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;æ ¼å¼&quot;&gt;&lt;/a&gt;æ ¼å¼&lt;/h2&gt;&lt;h3 id=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å…¥æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å…¥æ ¼å¼&lt;/h3&gt;&lt;p&gt;ç¬¬ä¸€è¡Œä¸ºä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œç¬¬äºŒè¡Œè‡³æ–‡ä»¶å°¾ä¸ºå˜æ¢è§„åˆ™&lt;br&gt;A\$ B\$&lt;br&gt;A1\$ B1\$ \&lt;br&gt;A2\$ B2\$ |-&amp;gt; å˜æ¢è§„åˆ™&lt;br&gt;â€¦ â€¦ /&lt;br&gt;æ‰€æœ‰å­—ç¬¦ä¸²é•¿åº¦çš„ä¸Šé™ä¸º 20ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å‡ºæ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å‡ºæ ¼å¼&lt;/h2&gt;&lt;p&gt;è‹¥åœ¨ 10 æ­¥ï¼ˆåŒ…å« 10æ­¥ï¼‰ä»¥å†…èƒ½å°† A\$ å˜æ¢ä¸º B\$ ï¼Œåˆ™è¾“å‡ºæœ€å°‘çš„å˜æ¢æ­¥æ•°ï¼›å¦åˆ™è¾“å‡ºâ€NO ANSWER!â€&lt;br&gt;
    
    </summary>
    
      <category term="Problem Set" scheme="https://cothrax.github.io/categories/Problem-Set/"/>
    
    
      <category term="OI" scheme="https://cothrax.github.io/tags/OI/"/>
    
      <category term="BFS" scheme="https://cothrax.github.io/tags/BFS/"/>
    
      <category term="NOIP" scheme="https://cothrax.github.io/tags/NOIP/"/>
    
      <category term="å­—ç¬¦ä¸²" scheme="https://cothrax.github.io/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
    
      <category term="Hash" scheme="https://cothrax.github.io/tags/Hash/"/>
    
      <category term="åŒå‘BFS" scheme="https://cothrax.github.io/tags/%E5%8F%8C%E5%90%91BFS/"/>
    
      <category term="æœç´¢" scheme="https://cothrax.github.io/tags/%E6%90%9C%E7%B4%A2/"/>
    
  </entry>
  
  <entry>
    <title>[Vijos] p1023 Victoriaçš„èˆä¼š3</title>
    <link href="https://cothrax.github.io/2016/08/15/Vijos-p1023/"/>
    <id>https://cothrax.github.io/2016/08/15/Vijos-p1023/</id>
    <published>2016-08-15T01:32:52.000Z</published>
    <updated>2016-08-15T03:43:49.825Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æè¿°"><a href="#æè¿°" class="headerlink" title="æè¿°"></a>æè¿°</h2><p>Victoriaæ˜¯ä¸€ä½é¢‡æœ‰æˆå°±çš„è‰ºæœ¯å®¶ï¼Œä»–å› æ²¹ç”»ä½œå“ã€Šæˆ‘çˆ±åŒ—äº¬å¤©å®‰é—¨ã€‹é—»åäºä¸–ç•Œã€‚ç°åœ¨ï¼Œä»–ä¸ºäº†æŠ¥ç­”å¸®åŠ©ä»–çš„åŒè¡Œä»¬ï¼Œå‡†å¤‡å¼€ä¸€ä¸ªèˆä¼šã€‚<br>Victoriaå‡†å¤‡é‚€è¯·nä¸ªå·²ç»ç¡®å®šçš„äººï¼Œå¯æ˜¯é—®é¢˜æ¥äº†ï¼š<br>è¿™nä¸ªäººæ¯ä¸€ä¸ªäººéƒ½æœ‰ä¸€ä¸ªå°èŠ±åå†Œï¼Œåå†Œé‡Œé¢å†™ç€ä»–èƒ½å¤Ÿé€šçŸ¥åˆ°çš„äººçš„åå­—ã€‚æ¯”å¦‚è¯´åœ¨Açš„äººåå•é‡Œå†™äº†Bï¼Œé‚£ä¹ˆè¡¨ç¤ºAèƒ½å¤Ÿé€šçŸ¥åˆ°Bï¼›ä½†æ˜¯Bçš„åå•é‡Œä¸è§çš„æœ‰Aï¼Œä¹Ÿå°±æ˜¯è¯´Bä¸è§å¾—é€šçŸ¥åˆ°Aã€‚<br>Victoriaè§‰å¾—éœ€è¦ç¡®å®šè‡ªå·±éœ€è¦é€šçŸ¥å¤šå°‘ä¸ªäººmï¼Œèƒ½å¤Ÿå®é™…å°†æ‰€æœ‰äººnéƒ½é€šçŸ¥åˆ°ã€‚å¹¶æ±‚å‡ºä¸€ç§æ–¹æ¡ˆä»¥ç¡®å®šmçš„æœ€å°å€¼æ˜¯å¤šå°‘ã€‚<br>æ³¨æ„ï¼šè‡ªå·±çš„åå•é‡Œé¢ä¸ä¼šæœ‰è‡ªå·±çš„åå­—ã€‚Victoriaå¯ä»¥è‡ªèº«é€šçŸ¥åˆ°æ‰€æœ‰nä¸ªäººã€‚</p>
<h2 id="æ ¼å¼"><a href="#æ ¼å¼" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼"><a href="#è¾“å…¥æ ¼å¼" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬ä¸€è¡Œä¸€ä¸ªæ•°nã€‚æ¥ä¸‹æ¥nè¡Œï¼Œæ¯i+1è¡Œè¡¨ç¤ºç¼–å·ä¸ºiçš„äººçš„å°èŠ±åå†Œåå•ï¼Œåå•ä»¥0ç»“æŸã€‚\<br>1&lt;=n&lt;=200ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼"><a href="#è¾“å‡ºæ ¼å¼" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>ä¸€ä¸ªæ•°ï¼Œmã€‚<br><a id="more"></a></p>
<h2 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥"><a href="#æ ·ä¾‹è¾“å…¥" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>18<br>0<br>11 0<br>0<br>0<br>0<br>16 0<br>14 0<br>0<br>0<br>0<br>2 13 0<br>0<br>11 0<br>7 0<br>0<br>6 0<br>0<br>0</p>
<h3 id="æ ·ä¾‹è¾“å‡º"><a href="#æ ·ä¾‹è¾“å‡º" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><p>14</p>
</blockquote>
<h2 id="æç¤ºâ€‹"><a href="#æç¤ºâ€‹" class="headerlink" title="æç¤ºâ€‹"></a>æç¤ºâ€‹</h2><p>å„ä¸ªæµ‹è¯•ç‚¹1s</p>
<h2 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>åˆè§å¼ºè¿é€šåˆ†é‡ï¼Œtarjanç¼©ç‚¹ï¼Œç­”æ¡ˆæ˜¯å…¥åº¦ä¸º0çš„åˆ†é‡æ•°</p>
<dir style="text-align:right"><a href="/2016/08/15/Vijos-p1023/p1023.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>p1023.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">var</span></div><div class="line">    g:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">201</span>,<span class="number">0</span>..<span class="number">201</span>] <span class="keyword">of</span> boolean;</div><div class="line">    dfn,low,scc,ind,s:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">201</span>] <span class="keyword">of</span> integer;</div><div class="line">    ins,used:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">201</span>] <span class="keyword">of</span> boolean;</div><div class="line">    n,i,j,t,cc,tim,ans:integer;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">tarjan</span><span class="params">(v:integer)</span>;</span></div><div class="line"><span class="keyword">var</span> i:integer;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    inc(tim);dfn[v]:=tim;low[v]:=tim;</div><div class="line">    used[v]:=true;ins[v]:=true;</div><div class="line">    inc(t);s[t]:=v;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">        <span class="keyword">if</span> g[v,i] <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            <span class="keyword">if</span> <span class="keyword">not</span> used[i] <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">                tarjan(i);</div><div class="line">                low[v]:=min(low[v],low[i]);</div><div class="line">            <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">if</span> ins[i] <span class="keyword">then</span></div><div class="line">                low[v]:=min(low[v],dfn[i]);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">if</span> dfn[v]=low[v] <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">        inc(cc);</div><div class="line">        <span class="keyword">while</span> s[t+<span class="number">1</span>]&lt;&gt;v <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            scc[s[t]]:=cc;</div><div class="line">            ins[s[t]]:=false;</div><div class="line">            dec(t);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">read</span>(n);</div><div class="line">    fillchar(g,sizeof(g),false);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(j);</div><div class="line">        <span class="keyword">while</span> j&lt;&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            g[i,j]:=true;</div><div class="line">            <span class="keyword">read</span>(j);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    fillchar(ins,sizeof(ins),false);</div><div class="line">    fillchar(used,sizeof(used),false);</div><div class="line">    fillchar(ind,sizeof(ind),<span class="number">0</span>);</div><div class="line">    tim:=<span class="number">0</span>;cc:=<span class="number">0</span>;t:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">        <span class="keyword">if</span> <span class="keyword">not</span> used[i] <span class="keyword">then</span> tarjan(i);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">        <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">            <span class="keyword">if</span> g[i,j] <span class="keyword">and</span> (scc[i]&lt;&gt;scc[j]) <span class="keyword">then</span> </div><div class="line">                inc(ind[scc[j]]);</div><div class="line">    ans:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> cc <span class="keyword">do</span></div><div class="line">        <span class="keyword">if</span> ind[i]=<span class="number">0</span> <span class="keyword">then</span> inc(ans);</div><div class="line">    <span class="keyword">write</span>(ans);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;æè¿°&quot;&gt;&lt;a href=&quot;#æè¿°&quot; class=&quot;headerlink&quot; title=&quot;æè¿°&quot;&gt;&lt;/a&gt;æè¿°&lt;/h2&gt;&lt;p&gt;Victoriaæ˜¯ä¸€ä½é¢‡æœ‰æˆå°±çš„è‰ºæœ¯å®¶ï¼Œä»–å› æ²¹ç”»ä½œå“ã€Šæˆ‘çˆ±åŒ—äº¬å¤©å®‰é—¨ã€‹é—»åäºä¸–ç•Œã€‚ç°åœ¨ï¼Œä»–ä¸ºäº†æŠ¥ç­”å¸®åŠ©ä»–çš„åŒè¡Œä»¬ï¼Œå‡†å¤‡å¼€ä¸€ä¸ªèˆä¼šã€‚&lt;br&gt;Victoriaå‡†å¤‡é‚€è¯·nä¸ªå·²ç»ç¡®å®šçš„äººï¼Œå¯æ˜¯é—®é¢˜æ¥äº†ï¼š&lt;br&gt;è¿™nä¸ªäººæ¯ä¸€ä¸ªäººéƒ½æœ‰ä¸€ä¸ªå°èŠ±åå†Œï¼Œåå†Œé‡Œé¢å†™ç€ä»–èƒ½å¤Ÿé€šçŸ¥åˆ°çš„äººçš„åå­—ã€‚æ¯”å¦‚è¯´åœ¨Açš„äººåå•é‡Œå†™äº†Bï¼Œé‚£ä¹ˆè¡¨ç¤ºAèƒ½å¤Ÿé€šçŸ¥åˆ°Bï¼›ä½†æ˜¯Bçš„åå•é‡Œä¸è§çš„æœ‰Aï¼Œä¹Ÿå°±æ˜¯è¯´Bä¸è§å¾—é€šçŸ¥åˆ°Aã€‚&lt;br&gt;Victoriaè§‰å¾—éœ€è¦ç¡®å®šè‡ªå·±éœ€è¦é€šçŸ¥å¤šå°‘ä¸ªäººmï¼Œèƒ½å¤Ÿå®é™…å°†æ‰€æœ‰äººnéƒ½é€šçŸ¥åˆ°ã€‚å¹¶æ±‚å‡ºä¸€ç§æ–¹æ¡ˆä»¥ç¡®å®šmçš„æœ€å°å€¼æ˜¯å¤šå°‘ã€‚&lt;br&gt;æ³¨æ„ï¼šè‡ªå·±çš„åå•é‡Œé¢ä¸ä¼šæœ‰è‡ªå·±çš„åå­—ã€‚Victoriaå¯ä»¥è‡ªèº«é€šçŸ¥åˆ°æ‰€æœ‰nä¸ªäººã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ ¼å¼&quot;&gt;&lt;a href=&quot;#æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;æ ¼å¼&quot;&gt;&lt;/a&gt;æ ¼å¼&lt;/h2&gt;&lt;h3 id=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å…¥æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å…¥æ ¼å¼&lt;/h3&gt;&lt;p&gt;ç¬¬ä¸€è¡Œä¸€ä¸ªæ•°nã€‚æ¥ä¸‹æ¥nè¡Œï¼Œæ¯i+1è¡Œè¡¨ç¤ºç¼–å·ä¸ºiçš„äººçš„å°èŠ±åå†Œåå•ï¼Œåå•ä»¥0ç»“æŸã€‚\&lt;br&gt;1&amp;lt;=n&amp;lt;=200ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å‡ºæ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å‡ºæ ¼å¼&lt;/h2&gt;&lt;p&gt;ä¸€ä¸ªæ•°ï¼Œmã€‚&lt;br&gt;
    
    </summary>
    
      <category term="Problem Set" scheme="https://cothrax.github.io/categories/Problem-Set/"/>
    
    
      <category term="OI" scheme="https://cothrax.github.io/tags/OI/"/>
    
      <category term="å›¾è®º" scheme="https://cothrax.github.io/tags/%E5%9B%BE%E8%AE%BA/"/>
    
      <category term="å¼ºè¿é€šåˆ†é‡" scheme="https://cothrax.github.io/tags/%E5%BC%BA%E8%BF%9E%E9%80%9A%E5%88%86%E9%87%8F/"/>
    
  </entry>
  
  <entry>
    <title>[Vijos] p1595 å­¦æ ¡ç½‘ç»œ</title>
    <link href="https://cothrax.github.io/2016/08/15/Vijos-p1595/"/>
    <id>https://cothrax.github.io/2016/08/15/Vijos-p1595/</id>
    <published>2016-08-15T01:27:03.000Z</published>
    <updated>2016-08-15T03:44:02.727Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æè¿°"><a href="#æè¿°" class="headerlink" title="æè¿°"></a>æè¿°</h2><p>ä¸€äº›å­¦æ ¡çš„æ ¡å›­ç½‘è¿æ¥åœ¨ä¸€ä¸ªè®¡ç®—æœºç½‘ç»œä¸Šã€‚å­¦æ ¡ä¹‹é—´å­˜åœ¨è½¯ä»¶æ”¯æ´åè®®ã€‚æ¯ä¸ªå­¦æ ¡éƒ½æœ‰å®ƒåº”æ”¯æ´çš„å­¦æ ¡åå•ï¼ˆå­¦æ ¡aæ”¯æ´å­¦æ ¡bï¼Œå¹¶ä¸è¡¨ç¤ºå­¦æ ¡bä¸€å®šæ”¯æ´å­¦æ ¡aï¼‰ã€‚å½“æŸæ ¡è·å¾—ä¸€ä¸ªæ–°è½¯ä»¶æ—¶ï¼Œæ— è®ºæ˜¯ç›´æ¥å¾—åˆ°çš„è¿˜æ˜¯ä»ç½‘ç»œå¾—åˆ°çš„ï¼Œè¯¥æ ¡éƒ½åº”ç«‹å³å°†è¿™ä¸ªè½¯ä»¶é€šè¿‡ç½‘ç»œä¼ é€ç»™å®ƒåº”æ”¯æ´çš„å­¦æ ¡ã€‚å› æ­¤ï¼Œè‹¥éœ€è¦è®©æ‰€æœ‰è¿æ¥åœ¨ç½‘ç»œä¸Šçš„å­¦æ ¡éƒ½èƒ½ä½¿ç”¨ä¸€ä¸ªæ–°è½¯ä»¶ï¼Œåªéœ€è¦å°†å…¶æä¾›ç»™å…¶ä¸­ä¸€äº›å­¦æ ¡å³å¯ã€‚<br>å­ä»»åŠ¡aï¼šæ ¹æ®å­¦æ ¡é—´è½¯ä»¶æ”¯æ´åè®®ï¼ˆå„ä¸ªå­¦æ ¡çš„æ”¯æ´åå•ï¼‰ï¼Œè®¡ç®—æœ€å°‘éœ€è¦å°†ä¸€ä¸ªè½¯ä»¶ç›´æ¥æä¾›ç»™å¤šå°‘ä¸ªå­¦æ ¡ï¼Œæ‰èƒ½ä½¿è¯¥è½¯ä»¶é€šè¿‡ç½‘ç»œä¼ é€åˆ°æ‰€æœ‰å­¦æ ¡ã€‚<br>å­ä»»åŠ¡bï¼šå¦‚æœå…è®¸åœ¨åŸæœ‰æ”¯æ´åè®®ä¸Šæ·»åŠ æ–°çš„æ”¯æ´å…³ç³»ï¼Œåˆ™æ€»å¯ä»¥å½¢æˆä¸€ä¸ªæ–°çš„åè®®ï¼Œä½¿å¾—æ­¤æ—¶åªéœ€è¦å°†ä¸€ä¸ªæ–°è½¯ä»¶æä¾›ç»™ä»»ä½•ä¸€ä¸ªå­¦æ ¡ï¼Œå…¶ä»–æ‰€æœ‰å­¦æ ¡å°±éƒ½å¯ä»¥é€šè¿‡ç½‘ç»œè·å¾—è¯¥è½¯ä»¶ã€‚è¯·è®¡ç®—å‡ºæœ€å°‘éœ€è¦æ·»åŠ å‡ æ¡æ–°çš„æ”¯æ´å…³ç³»ã€‚</p>
<h2 id="æ ¼å¼"><a href="#æ ¼å¼" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼"><a href="#è¾“å…¥æ ¼å¼" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•´æ•° n(2â‰¤nâ‰¤100)ï¼Œè¡¨ç¤ºä¸ç½‘ç»œè¿æ¥çš„å­¦æ ¡æ€»æ•°ã€‚æ¥ä¸‹æ¥ nè¡Œæè¿°äº†æ¯ä¸ªå­¦æ ¡è¦æ”¯æ´çš„å­¦æ ¡ã€‚ç¬¬i+1è¡Œè¡¨ç¤ºç¬¬i å·å­¦æ ¡è¦æ”¯æ´çš„æ‰€æœ‰å­¦æ ¡çš„ç¼–å·ï¼Œç¼–å·ä¹‹é—´ç”¨ç©ºæ ¼éš”å¼€ï¼Œæ¯è¡Œä»¥æ•°å­—0 ç»“æŸã€‚å¦‚æœæŸä¸ªå­¦æ ¡ä¸æ”¯æ´ä»»ä½•å­¦æ ¡ï¼Œåˆ™ç›¸åº”çš„è¡Œä¼šæœ‰ä¸€ä¸ª0ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼"><a href="#è¾“å‡ºæ ¼å¼" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>åŒ…å«ä¸¤è¡Œï¼Œç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºå­ä»»åŠ¡açš„è§£ã€‚ç¬¬äºŒè¡Œä¹Ÿæ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºå­ä»»åŠ¡bçš„è§£ã€‚<br><a id="more"></a></p>
<h2 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥"><a href="#æ ·ä¾‹è¾“å…¥" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>5<br>2 4 3 0<br>4 5 0<br>0<br>0<br>1 0</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º"><a href="#æ ·ä¾‹è¾“å‡º" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>1<br>2</p>
</blockquote>
<h2 id="æç¤ºâ€‹"><a href="#æç¤ºâ€‹" class="headerlink" title="æç¤ºâ€‹"></a>æç¤ºâ€‹</h2><p>å›¾ç»“æ„</p>
<h2 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>è£¸çš„å¼ºè¿é€šåˆ†é‡ã€‚<br>tarjanç¼©ç‚¹<br>ç»Ÿè®¡æ¯ä¸ªå¼ºè¿é€šåˆ†é‡çš„å…¥åº¦å’Œå‡ºåº¦<br>ç¬¬ä¸€é—®ç­”æ¡ˆæ˜¯å…¥åº¦ä¸º0çš„åˆ†é‡æ•°<br>ç¬¬äºŒé—®çš„ç­”æ¡ˆæ˜¯max(å…¥åº¦ä¸º0çš„åˆ†é‡æ•°ï¼Œå‡ºåº¦ä¸º0çš„åˆ†é‡æ•°)<br>å¯ä»¥é€šè¿‡ä»å…¥åº¦0çš„ç‚¹å‘å‡ºåº¦ä¸º0çš„ç‚¹è¿æœ‰å‘è¾¹æ¥æ„é€ <br><strong>æ³¨æ„åªæœ‰ä¸€ä¸ªåˆ†é‡æ—¶ï¼Œç­”æ¡ˆä¸º1 0ï¼Œä¸ç‰¹åˆ¤çš„è¯è¾“å‡ºçš„æ˜¯1 1</strong></p>
<dir style="text-align:right"><a href="/2016/08/15/Vijos-p1595/p1595.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>p1595.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">var</span></div><div class="line">    g:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">101</span>,<span class="number">0</span>..<span class="number">101</span>] <span class="keyword">of</span> boolean; </div><div class="line">    dfn,low,scc,s,ind,outd:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">101</span>] <span class="keyword">of</span> integer;</div><div class="line">    used,ins:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">101</span>] <span class="keyword">of</span> boolean;</div><div class="line">    n,i,j,t,cc,tim:integer;</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">tarjan</span><span class="params">(v:integer)</span>;</span></div><div class="line"><span class="keyword">var</span> i:integer;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    inc(tim);dfn[v]:=tim;low[v]:=tim;</div><div class="line">    ins[v]:=true;used[v]:=true;</div><div class="line">    inc(t);s[t]:=v;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> </div><div class="line">        <span class="keyword">if</span> g[v,i] <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            <span class="keyword">if</span> <span class="keyword">not</span> used[i] <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">                tarjan(i);</div><div class="line">                low[v]:=min(low[v],low[i]);</div><div class="line">            <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">if</span> ins[i] <span class="keyword">then</span> </div><div class="line">                low[v]:=min(low[v],dfn[i]);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">if</span> low[v]=dfn[v] <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">        inc(cc);</div><div class="line">        <span class="keyword">while</span> s[t+<span class="number">1</span>]&lt;&gt;v <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            ins[s[t]]:=false;</div><div class="line">            scc[s[t]]:=cc;</div><div class="line">            dec(t);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">read</span>(n);</div><div class="line">    fillchar(g,sizeof(g),false);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">read</span>(j);</div><div class="line">        <span class="keyword">while</span> j&lt;&gt;<span class="number">0</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            g[i,j]:=true;</div><div class="line">            <span class="keyword">read</span>(j);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">end</span>;</div><div class="line"></div><div class="line">    fillchar(used,sizeof(used),false);</div><div class="line">    fillchar(ins,sizeof(ins),false);</div><div class="line">    cc:=<span class="number">0</span>;tim:=<span class="number">0</span>;t:=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">if</span> <span class="keyword">not</span> used[i] <span class="keyword">then</span> tarjan(i);</div><div class="line"></div><div class="line">    <span class="keyword">if</span> cc=<span class="number">1</span> <span class="keyword">then</span> <span class="keyword">begin</span> writeln(<span class="number">1</span>);<span class="keyword">write</span>(<span class="number">0</span>);halt <span class="keyword">end</span>;</div><div class="line">    fillchar(ind,sizeof(ind),<span class="number">0</span>);</div><div class="line">    fillchar(outd,sizeof(outd),<span class="number">0</span>);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> </div><div class="line">        <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span></div><div class="line">            <span class="keyword">if</span> (g[i,j]) <span class="keyword">and</span> (scc[i]&lt;&gt;scc[j]) <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">                inc(outd[scc[i]]);</div><div class="line">                inc(ind[scc[j]]);</div><div class="line">            <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> cc <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">if</span> ind[i]=<span class="number">0</span> <span class="keyword">then</span> inc(ind[<span class="number">0</span>]);</div><div class="line">        <span class="keyword">if</span> outd[i]=<span class="number">0</span> <span class="keyword">then</span> inc(outd[<span class="number">0</span>]);</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    writeln(ind[<span class="number">0</span>]);</div><div class="line">    <span class="keyword">write</span>(max(ind[<span class="number">0</span>],outd[<span class="number">0</span>]));</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;æè¿°&quot;&gt;&lt;a href=&quot;#æè¿°&quot; class=&quot;headerlink&quot; title=&quot;æè¿°&quot;&gt;&lt;/a&gt;æè¿°&lt;/h2&gt;&lt;p&gt;ä¸€äº›å­¦æ ¡çš„æ ¡å›­ç½‘è¿æ¥åœ¨ä¸€ä¸ªè®¡ç®—æœºç½‘ç»œä¸Šã€‚å­¦æ ¡ä¹‹é—´å­˜åœ¨è½¯ä»¶æ”¯æ´åè®®ã€‚æ¯ä¸ªå­¦æ ¡éƒ½æœ‰å®ƒåº”æ”¯æ´çš„å­¦æ ¡åå•ï¼ˆå­¦æ ¡aæ”¯æ´å­¦æ ¡bï¼Œå¹¶ä¸è¡¨ç¤ºå­¦æ ¡bä¸€å®šæ”¯æ´å­¦æ ¡aï¼‰ã€‚å½“æŸæ ¡è·å¾—ä¸€ä¸ªæ–°è½¯ä»¶æ—¶ï¼Œæ— è®ºæ˜¯ç›´æ¥å¾—åˆ°çš„è¿˜æ˜¯ä»ç½‘ç»œå¾—åˆ°çš„ï¼Œè¯¥æ ¡éƒ½åº”ç«‹å³å°†è¿™ä¸ªè½¯ä»¶é€šè¿‡ç½‘ç»œä¼ é€ç»™å®ƒåº”æ”¯æ´çš„å­¦æ ¡ã€‚å› æ­¤ï¼Œè‹¥éœ€è¦è®©æ‰€æœ‰è¿æ¥åœ¨ç½‘ç»œä¸Šçš„å­¦æ ¡éƒ½èƒ½ä½¿ç”¨ä¸€ä¸ªæ–°è½¯ä»¶ï¼Œåªéœ€è¦å°†å…¶æä¾›ç»™å…¶ä¸­ä¸€äº›å­¦æ ¡å³å¯ã€‚&lt;br&gt;å­ä»»åŠ¡aï¼šæ ¹æ®å­¦æ ¡é—´è½¯ä»¶æ”¯æ´åè®®ï¼ˆå„ä¸ªå­¦æ ¡çš„æ”¯æ´åå•ï¼‰ï¼Œè®¡ç®—æœ€å°‘éœ€è¦å°†ä¸€ä¸ªè½¯ä»¶ç›´æ¥æä¾›ç»™å¤šå°‘ä¸ªå­¦æ ¡ï¼Œæ‰èƒ½ä½¿è¯¥è½¯ä»¶é€šè¿‡ç½‘ç»œä¼ é€åˆ°æ‰€æœ‰å­¦æ ¡ã€‚&lt;br&gt;å­ä»»åŠ¡bï¼šå¦‚æœå…è®¸åœ¨åŸæœ‰æ”¯æ´åè®®ä¸Šæ·»åŠ æ–°çš„æ”¯æ´å…³ç³»ï¼Œåˆ™æ€»å¯ä»¥å½¢æˆä¸€ä¸ªæ–°çš„åè®®ï¼Œä½¿å¾—æ­¤æ—¶åªéœ€è¦å°†ä¸€ä¸ªæ–°è½¯ä»¶æä¾›ç»™ä»»ä½•ä¸€ä¸ªå­¦æ ¡ï¼Œå…¶ä»–æ‰€æœ‰å­¦æ ¡å°±éƒ½å¯ä»¥é€šè¿‡ç½‘ç»œè·å¾—è¯¥è½¯ä»¶ã€‚è¯·è®¡ç®—å‡ºæœ€å°‘éœ€è¦æ·»åŠ å‡ æ¡æ–°çš„æ”¯æ´å…³ç³»ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ ¼å¼&quot;&gt;&lt;a href=&quot;#æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;æ ¼å¼&quot;&gt;&lt;/a&gt;æ ¼å¼&lt;/h2&gt;&lt;h3 id=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å…¥æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å…¥æ ¼å¼&lt;/h3&gt;&lt;p&gt;ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•´æ•° n(2â‰¤nâ‰¤100)ï¼Œè¡¨ç¤ºä¸ç½‘ç»œè¿æ¥çš„å­¦æ ¡æ€»æ•°ã€‚æ¥ä¸‹æ¥ nè¡Œæè¿°äº†æ¯ä¸ªå­¦æ ¡è¦æ”¯æ´çš„å­¦æ ¡ã€‚ç¬¬i+1è¡Œè¡¨ç¤ºç¬¬i å·å­¦æ ¡è¦æ”¯æ´çš„æ‰€æœ‰å­¦æ ¡çš„ç¼–å·ï¼Œç¼–å·ä¹‹é—´ç”¨ç©ºæ ¼éš”å¼€ï¼Œæ¯è¡Œä»¥æ•°å­—0 ç»“æŸã€‚å¦‚æœæŸä¸ªå­¦æ ¡ä¸æ”¯æ´ä»»ä½•å­¦æ ¡ï¼Œåˆ™ç›¸åº”çš„è¡Œä¼šæœ‰ä¸€ä¸ª0ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å‡ºæ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å‡ºæ ¼å¼&lt;/h2&gt;&lt;p&gt;åŒ…å«ä¸¤è¡Œï¼Œç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºå­ä»»åŠ¡açš„è§£ã€‚ç¬¬äºŒè¡Œä¹Ÿæ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºå­ä»»åŠ¡bçš„è§£ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="Problem Set" scheme="https://cothrax.github.io/categories/Problem-Set/"/>
    
    
      <category term="OI" scheme="https://cothrax.github.io/tags/OI/"/>
    
      <category term="å›¾è®º" scheme="https://cothrax.github.io/tags/%E5%9B%BE%E8%AE%BA/"/>
    
      <category term="å¼ºè¿é€šåˆ†é‡" scheme="https://cothrax.github.io/tags/%E5%BC%BA%E8%BF%9E%E9%80%9A%E5%88%86%E9%87%8F/"/>
    
      <category term="IOI" scheme="https://cothrax.github.io/tags/IOI/"/>
    
  </entry>
  
  <entry>
    <title>[Vijos] P1845 èŠ±åŒ </title>
    <link href="https://cothrax.github.io/2016/08/14/Vijos-P1845/"/>
    <id>https://cothrax.github.io/2016/08/14/Vijos-P1845/</id>
    <published>2016-08-14T13:55:22.000Z</published>
    <updated>2016-08-15T04:58:27.108Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æè¿°"><a href="#æè¿°" class="headerlink" title="æè¿°"></a>æè¿°</h2><p>èŠ±åŒ æ ‹æ ‹ç§äº†ä¸€æ’èŠ±ï¼Œæ¯æ ªèŠ±éƒ½æœ‰è‡ªå·±çš„é«˜åº¦ã€‚èŠ±å„¿è¶Šé•¿è¶Šå¤§ï¼Œä¹Ÿè¶Šæ¥è¶ŠæŒ¤ã€‚æ ‹æ ‹å†³å®šæŠŠè¿™æ’ä¸­çš„ä¸€éƒ¨åˆ†èŠ±ç§»èµ°ï¼Œå°†å‰©ä¸‹çš„ç•™åœ¨åŸåœ°ï¼Œä½¿å¾—å‰©ä¸‹çš„èŠ±èƒ½æœ‰ç©ºé—´é•¿å¤§ï¼ŒåŒæ—¶ï¼Œæ ‹æ ‹å¸Œæœ›å‰©ä¸‹çš„èŠ±æ’åˆ—å¾—æ¯”è¾ƒåˆ«è‡´ã€‚<br>å…·ä½“è€Œè¨€ï¼Œæ ‹æ ‹çš„èŠ±çš„é«˜åº¦å¯ä»¥çœ‹æˆä¸€åˆ—æ•´æ•°h1, h2, â€¦ , hnã€‚è®¾å½“ä¸€éƒ¨åˆ†èŠ±è¢«ç§»èµ°åï¼Œå‰©ä¸‹çš„èŠ±çš„é«˜åº¦ä¾æ¬¡ä¸ºg1, g2, â€¦ , gmï¼Œåˆ™æ ‹æ ‹å¸Œæœ›ä¸‹é¢ä¸¤ä¸ªæ¡ä»¶ä¸­è‡³å°‘æœ‰ä¸€ä¸ªæ»¡è¶³ï¼š</p>
<p>æ¡ä»¶ Aï¼šå¯¹äºæ‰€æœ‰çš„<span>$1&lt;i&lt;m/2$</span><!-- Has MathJax -->ï¼Œ<span>$g_{2i}&gt;g_{2i-1}$</span><!-- Has MathJax -->ï¼Œä¸”<span>$g_{2i}&gt;g_{2i+1}$</span><!-- Has MathJax -->ï¼›<br>æ¡ä»¶ Bï¼šå¯¹äºæ‰€æœ‰çš„<span>$1&lt;i&lt;m/2$</span><!-- Has MathJax -->ï¼Œ<span>$g_{2i}&lt;g_{2i-1}$</span><!-- Has MathJax -->ï¼Œä¸”<span>$g_{2i}&lt;g_{2i+1}$</span><!-- Has MathJax -->ã€‚</p>
<p>æ³¨æ„ä¸Šé¢ä¸¤ä¸ªæ¡ä»¶åœ¨m=1æ—¶åŒæ—¶æ»¡è¶³ï¼Œå½“m&gt;1æ—¶æœ€å¤šæœ‰ä¸€ä¸ªèƒ½æ»¡è¶³ã€‚<br>è¯·é—®ï¼Œæ ‹æ ‹æœ€å¤šèƒ½å°†å¤šå°‘æ ªèŠ±ç•™åœ¨åŸåœ°ã€‚</p>
<h2 id="æ ¼å¼"><a href="#æ ¼å¼" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><h3 id="è¾“å…¥æ ¼å¼"><a href="#è¾“å…¥æ ¼å¼" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>è¾“å…¥çš„ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•° nï¼Œè¡¨ç¤ºå¼€å§‹æ—¶èŠ±çš„æ ªæ•°ã€‚<br>ç¬¬äºŒè¡ŒåŒ…å« n ä¸ªæ•´æ•°ï¼Œä¾æ¬¡ä¸ºh1, h2,â€¦ , hnï¼Œè¡¨ç¤ºæ¯æ ªèŠ±çš„é«˜åº¦ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼"><a href="#è¾“å‡ºæ ¼å¼" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>è¾“å‡ºä¸€è¡Œï¼ŒåŒ…å«ä¸€ä¸ªæ•´æ•° mï¼Œè¡¨ç¤ºæœ€å¤šèƒ½ç•™åœ¨åŸåœ°çš„èŠ±çš„æ ªæ•°ã€‚<br><a id="more"></a></p>
<h2 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h2><h3 id="æ ·ä¾‹è¾“å…¥"><a href="#æ ·ä¾‹è¾“å…¥" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h3><blockquote>
<p>5<br>5 3 2 1 2</p>
</blockquote>
<h3 id="æ ·ä¾‹è¾“å‡º"><a href="#æ ·ä¾‹è¾“å‡º" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h3><blockquote>
<p>3</p>
</blockquote>
<h2 id="æç¤ºâ€‹"><a href="#æç¤ºâ€‹" class="headerlink" title="æç¤ºâ€‹"></a>æç¤ºâ€‹</h2><p>å¯¹äº 20%çš„æ•°æ®ï¼Œn â‰¤ 10ï¼›<br>å¯¹äº 30%çš„æ•°æ®ï¼Œn â‰¤ 25ï¼›<br>å¯¹äº 70%çš„æ•°æ®ï¼Œn â‰¤ 1000ï¼Œ0 â‰¤ hi â‰¤ 1000ï¼›<br>å¯¹äº 100%çš„æ•°æ®ï¼Œ1 â‰¤ n â‰¤ 100,000ï¼Œ0 â‰¤ hi â‰¤ 1,000,000ï¼Œæ‰€æœ‰çš„h_iéšæœºç”Ÿæˆï¼Œæ‰€æœ‰éšæœºæ•°æœä»æŸåŒºé—´å†…çš„å‡åŒ€åˆ†å¸ƒã€‚</p>
<p>NOIP 2013 æé«˜ç»„ day 2</p>
<h2 id="æ°´è§£"><a href="#æ°´è§£" class="headerlink" title="æ°´è§£"></a>æ°´è§£</h2><p>é¦–å…ˆæƒ³åˆ°LISï¼Œç„¶å5åˆ†é’ŸDPå°±å†™å¥½å•¦ï¼Œ80åˆ†ç„¶åTLE</p>
<blockquote>
<p>f[i,j] ä»¥h[i]ç»“å°¾çš„åˆæ³•åºåˆ—çš„æœ€é•¿é•¿åº¦<br>j=0æ—¶h[i]å°äºå‰ä¸€ä¸ªæ•°ï¼Œj=1æ—¶h[i]å¤§äºå‰ä¸€ä¸ªæ•°<br>äºæ˜¯<br><span>$f[i,0]=max\{f[k,1]+1\ |\ h[k]&gt;h[i]\ and\ 1\leq k\leq i\}$</span><!-- Has MathJax --><br><span>$f[i,1]=max\{f[k,0]+1\ |\ h[k]&lt;h[i]\ and\ 1\leq k\leq i\}$</span><!-- Has MathJax --></p>
</blockquote>
<dir style="text-align:right"><a href="/2016/08/14/Vijos-P1845/p1845.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>p1845.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    h:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">100010</span>] <span class="keyword">of</span> int;</div><div class="line">    f:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">100010</span>,<span class="number">0</span>..<span class="number">1</span>] <span class="keyword">of</span> int;</div><div class="line">    i,j,n,len:int;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">read</span>(n);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">read</span>(h[i]);</div><div class="line">    fillchar(f,sizeof(f),<span class="number">0</span>);</div><div class="line">    f[<span class="number">1</span>,<span class="number">0</span>]:=<span class="number">1</span>;f[<span class="number">1</span>,<span class="number">1</span>]:=<span class="number">1</span>;len:=<span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">2</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">for</span> j:=<span class="number">1</span> <span class="keyword">to</span> i-<span class="number">1</span> <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">            <span class="keyword">if</span> h[i]&gt;h[j] <span class="keyword">then</span> f[i,<span class="number">1</span>]:=max(f[i,<span class="number">1</span>],f[j,<span class="number">0</span>]+<span class="number">1</span>);</div><div class="line">            <span class="keyword">if</span> h[i]&lt;h[j] <span class="keyword">then</span> f[i,<span class="number">0</span>]:=max(f[i,<span class="number">0</span>],f[j,<span class="number">1</span>]+<span class="number">1</span>);</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">        len:=max(len,max(f[i,<span class="number">0</span>],f[i,<span class="number">1</span>]));</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    <span class="keyword">write</span>(len);</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
<h2 id="æ­£è§£"><a href="#æ­£è§£" class="headerlink" title="æ­£è§£"></a>æ­£è§£</h2><p>å…¶å®LISæ˜¯å¯ä»¥ç”¨å•è°ƒæ ˆåšçš„ï¼Œäºæ˜¯è¿™ä¸€é¢˜æœ‰äº†ä¸€ä¸ªç±»ä¼¼å•è°ƒæ ˆçš„åšæ³•ï¼Œç„¶åä¹±æå°±Aäº†ã€‚</p>
<dir style="text-align:right"><a href="/2016/08/14/Vijos-P1845/pp1845.pas" title="å¤åˆ¶ä»£ç ">å¤åˆ¶ä»£ç </a></dir>

<figure class="highlight delphi"><figcaption><span>pp1845.pas</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">uses</span> math;</div><div class="line"><span class="keyword">type</span> int=longint;</div><div class="line"><span class="keyword">var</span> </div><div class="line">    h,s:<span class="keyword">array</span>[<span class="number">0</span>..<span class="number">100010</span>] <span class="keyword">of</span> int;</div><div class="line">    i,n,t:int;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">cal</span><span class="params">(sym:int)</span>:</span>int;</div><div class="line"><span class="keyword">var</span> i:int;</div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="comment">//sym=1 ä¸‹ä¸€ä¸ªæ•°å¤§</span></div><div class="line">    <span class="comment">//sym=-1 ä¸‹ä¸€ä¸ªæ•°å°</span></div><div class="line">    t:=<span class="number">1</span>;s[t]:=h[<span class="number">1</span>];</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">2</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">begin</span></div><div class="line">        <span class="keyword">if</span> ((sym&gt;<span class="number">0</span>) <span class="keyword">and</span> (h[i]&gt;s[t])) <span class="keyword">or</span></div><div class="line">           ((sym&lt;<span class="number">0</span>) <span class="keyword">and</span> (h[i]&lt;s[t])) <span class="keyword">then</span> <span class="keyword">begin</span></div><div class="line">            inc(t);</div><div class="line">            sym:=-sym;</div><div class="line">        <span class="keyword">end</span>;</div><div class="line">        s[t]:=h[i];</div><div class="line">    <span class="keyword">end</span>;</div><div class="line">    cal:=t;</div><div class="line"><span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">    <span class="keyword">read</span>(n);</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span> <span class="keyword">read</span>(h[i]);</div><div class="line">    <span class="keyword">write</span>(max(cal(<span class="number">1</span>),cal(-<span class="number">1</span>)));</div><div class="line"><span class="keyword">end</span>.</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;æè¿°&quot;&gt;&lt;a href=&quot;#æè¿°&quot; class=&quot;headerlink&quot; title=&quot;æè¿°&quot;&gt;&lt;/a&gt;æè¿°&lt;/h2&gt;&lt;p&gt;èŠ±åŒ æ ‹æ ‹ç§äº†ä¸€æ’èŠ±ï¼Œæ¯æ ªèŠ±éƒ½æœ‰è‡ªå·±çš„é«˜åº¦ã€‚èŠ±å„¿è¶Šé•¿è¶Šå¤§ï¼Œä¹Ÿè¶Šæ¥è¶ŠæŒ¤ã€‚æ ‹æ ‹å†³å®šæŠŠè¿™æ’ä¸­çš„ä¸€éƒ¨åˆ†èŠ±ç§»èµ°ï¼Œå°†å‰©ä¸‹çš„ç•™åœ¨åŸåœ°ï¼Œä½¿å¾—å‰©ä¸‹çš„èŠ±èƒ½æœ‰ç©ºé—´é•¿å¤§ï¼ŒåŒæ—¶ï¼Œæ ‹æ ‹å¸Œæœ›å‰©ä¸‹çš„èŠ±æ’åˆ—å¾—æ¯”è¾ƒåˆ«è‡´ã€‚&lt;br&gt;å…·ä½“è€Œè¨€ï¼Œæ ‹æ ‹çš„èŠ±çš„é«˜åº¦å¯ä»¥çœ‹æˆä¸€åˆ—æ•´æ•°h1, h2, â€¦ , hnã€‚è®¾å½“ä¸€éƒ¨åˆ†èŠ±è¢«ç§»èµ°åï¼Œå‰©ä¸‹çš„èŠ±çš„é«˜åº¦ä¾æ¬¡ä¸ºg1, g2, â€¦ , gmï¼Œåˆ™æ ‹æ ‹å¸Œæœ›ä¸‹é¢ä¸¤ä¸ªæ¡ä»¶ä¸­è‡³å°‘æœ‰ä¸€ä¸ªæ»¡è¶³ï¼š&lt;/p&gt;
&lt;p&gt;æ¡ä»¶ Aï¼šå¯¹äºæ‰€æœ‰çš„&lt;span&gt;$1&amp;lt;i&amp;lt;m/2$&lt;/span&gt;&lt;!-- Has MathJax --&gt;ï¼Œ&lt;span&gt;$g_{2i}&amp;gt;g_{2i-1}$&lt;/span&gt;&lt;!-- Has MathJax --&gt;ï¼Œä¸”&lt;span&gt;$g_{2i}&amp;gt;g_{2i+1}$&lt;/span&gt;&lt;!-- Has MathJax --&gt;ï¼›&lt;br&gt;æ¡ä»¶ Bï¼šå¯¹äºæ‰€æœ‰çš„&lt;span&gt;$1&amp;lt;i&amp;lt;m/2$&lt;/span&gt;&lt;!-- Has MathJax --&gt;ï¼Œ&lt;span&gt;$g_{2i}&amp;lt;g_{2i-1}$&lt;/span&gt;&lt;!-- Has MathJax --&gt;ï¼Œä¸”&lt;span&gt;$g_{2i}&amp;lt;g_{2i+1}$&lt;/span&gt;&lt;!-- Has MathJax --&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ä¸Šé¢ä¸¤ä¸ªæ¡ä»¶åœ¨m=1æ—¶åŒæ—¶æ»¡è¶³ï¼Œå½“m&amp;gt;1æ—¶æœ€å¤šæœ‰ä¸€ä¸ªèƒ½æ»¡è¶³ã€‚&lt;br&gt;è¯·é—®ï¼Œæ ‹æ ‹æœ€å¤šèƒ½å°†å¤šå°‘æ ªèŠ±ç•™åœ¨åŸåœ°ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ ¼å¼&quot;&gt;&lt;a href=&quot;#æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;æ ¼å¼&quot;&gt;&lt;/a&gt;æ ¼å¼&lt;/h2&gt;&lt;h3 id=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å…¥æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å…¥æ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å…¥æ ¼å¼&lt;/h3&gt;&lt;p&gt;è¾“å…¥çš„ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•° nï¼Œè¡¨ç¤ºå¼€å§‹æ—¶èŠ±çš„æ ªæ•°ã€‚&lt;br&gt;ç¬¬äºŒè¡ŒåŒ…å« n ä¸ªæ•´æ•°ï¼Œä¾æ¬¡ä¸ºh1, h2,â€¦ , hnï¼Œè¡¨ç¤ºæ¯æ ªèŠ±çš„é«˜åº¦ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;a href=&quot;#è¾“å‡ºæ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è¾“å‡ºæ ¼å¼&quot;&gt;&lt;/a&gt;è¾“å‡ºæ ¼å¼&lt;/h2&gt;&lt;p&gt;è¾“å‡ºä¸€è¡Œï¼ŒåŒ…å«ä¸€ä¸ªæ•´æ•° mï¼Œè¡¨ç¤ºæœ€å¤šèƒ½ç•™åœ¨åŸåœ°çš„èŠ±çš„æ ªæ•°ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="Problem Set" scheme="https://cothrax.github.io/categories/Problem-Set/"/>
    
    
      <category term="OI" scheme="https://cothrax.github.io/tags/OI/"/>
    
      <category term="DP" scheme="https://cothrax.github.io/tags/DP/"/>
    
      <category term="è´ªå¿ƒ" scheme="https://cothrax.github.io/tags/%E8%B4%AA%E5%BF%83/"/>
    
      <category term="çº¿æ€§DP" scheme="https://cothrax.github.io/tags/%E7%BA%BF%E6%80%A7DP/"/>
    
      <category term="NOIP" scheme="https://cothrax.github.io/tags/NOIP/"/>
    
  </entry>
  
</feed>
